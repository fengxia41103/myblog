{% extends "layout.html" %}

{% block content %}
<div style="background-color: #fefefe;">
  <article class="container" style="padding-top:1em;">
    {% block main_content %}
    <div class="page-header row">

      {# article title #}
      <div class="col s12">
        {# article date #}
        <i class="fa fa-calendar" style="opacity:0.5;">&nbsp;</i>
        {{ article.date|strftime('%Y-%m-%d') }}

        {# translations #}
        {% if article.translations %}
        &nbsp;|%nbsp;
        <i class="fa fa-language"></i>
        <span class="active">{{ article.lang }}</span>
        {% for t in article.translations %}
        <a href="{{ t.url }}">
          | {{ t.lang }}
        </a>
        {% endfor %}
        {% endif %}

        {# tags & categories #}
          {# article category #}
          {% if article.category %}
            <a class="wave-effect" href="{{article.category.url}}">
              <i class="fa fa-folder-open-o"></i>
              {{ article.category.name }}
            </a>
          {% endif %}

          {# tags #}
          {% if article.tags %}
          {% for t in article.tags %}
            <a class="wave-effect" href="{{ t.url }}">
              <i class="fa fa-tag"></i>
              {{ t.name }}
            </a>
          {% endfor %}
          {% endif %}

        {# article title #}
        <h1 class="myhighlight">{{ article.title }}</h1>
      </div>


    </div>

    {# table of contents #}
    <ol id="toc" class="row"></ol>

    {# article contents #}
    <div class="row">
      {# article main body #}
      <div class="col-md-12 col-sm-12" id="article-content">
        <p>
          {{ article.content }}
        </p>

        {# article footer #}
        <p>
          &mdash; by
          <a href="{{article.author.url}}">{{ article.author }}</a>
        </p>

        {# disqus #}
        <div id="disqus_thread"></div>
        <script>

         /**
          *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
          *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
         /*
            var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
          */
         (function() { // DON'T EDIT BELOW THIS LINE
           var d = document, s = d.createElement('script');
           s.src = '//fengxia-co.disqus.com/embed.js';
           s.setAttribute('data-timestamp', +new Date());
           (d.head || d.body).appendChild(s);
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </div>
    {% endblock %}
  </article>

  {% endblock %}

  {% block related %}
  <h2>Related:</h2>
  <div class="row" style="max-height:200px;">
  {% for cat,articles in categories %}
  {% if cat == category %}
  {% for a in articles %}
    {% if article != a and loop.index < 4 %}
    <div class="col s6">
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <div>
            <i class="fa fa-calendar" style="opacity:0.5;">&nbsp;</i>
            {{ a.date|strftime('%Y-%m-%d') }}
          </div>

          <h5 class="card-title">
            {{ a.title }}
          </h5>

          <p>
            {{ a.summary | truncate }}
          </p>

          <div class="card-action">
            <a class="flabel wave-effect"
               href="{{SITEURL}}/{{a.url}}">
              read more
            </a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  {% endfor %}
  {% endif %}
  {% endfor %}
  </div>

  {% endblock %}
