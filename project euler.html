<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta
      name="viewport"
      content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"
    />

    <meta name="description" content="" />
    <meta name="author" content="" />

    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
    />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/monokai-sublime.min.css" integrity="sha512-ade8vHOXH67Cm9z/U2vBpckPD1Enhdxl3N05ChXyFx5xikfqggrK4RrEele+VWY/iaZyfk7Bhk6CyZvlh7+5JQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css"
    />

    <link rel="stylesheet" href="https://fengxia41103.github.io/myblog/theme/css/my.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
            integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>



    <title>Be Care Free</title>
  </head>

  <body>
    <header id="mypage-index">
      <a href="https://fengxia41103.github.io/myblog/">Be Care Free </a>

      <a href="https://fengxia41103.github.io/myblog/about.html"> . About </a>
      <a href="https://fengxia41103.github.io/myblog/lei.html"> . 夏雷 </a>
      <a href="https://fengxia41103.github.io/myblog/project euler.html"> . Project Euler </a>
      <a href="https://fengxia41103.github.io/myblog/quote.html"> . Quote </a>
      <a href="https://fengxia41103.github.io/myblog/resume.html"> . Resum&eacute; </a>
      <a href="https://fengxia41103.github.io/myblog/search.html"> . Search </a>
      <a href="https://fengxia41103.github.io/myblog/slides.html"> . Impression </a>
    </header>
    <!-- end of block navbar -->

    <div class="split-screen">
      <div class="split-left-pane">
<!-- <video autoplay muted loop id="myVideo">
     <source src="downloads/polina.mp4" type="video/mp4" />}
     </video>
-->
      </div>

      <div class="split-right-pane">
        <div id="content" class="container">
<article>

<h1>Project Euler</h1>

<resume> <hr>
<h1>Code</h1>
<p><a href="https://fengxia41103.github.io/myblog/downloads/euler/p1.py">1</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p2.py">2</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p3.py">3</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p4.py">4</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p5.py">5</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p6.py">6</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p7.py">7</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p8.py">8</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p9.py">9</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p10.py">10</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p11.py">11</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p12.py">12</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p13.py">13</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p14.py">14</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p15.py">15</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p16.py">16</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p17.py">17</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p18.py">18</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p19.py">19</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p20.py">20</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p21.py">21</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p22.py">22</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p23.py">23</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p24.py">24</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p25.py">25</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p26.py">26</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p27.py">27</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p28.py">28</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p29.py">29</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p30.py">30</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p31.py">31</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p32.py">32</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p33.py">33</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p34.py">34</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p35.py">35</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p36.py">36</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p37.py">37</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p38.py">38</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p39.py">39</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p40.py">40</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p41.py">41</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p42.py">42</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p43.py">43</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p44.py">44</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p45.py">45</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p46.py">46</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p47.py">47</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p48.py">48</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p49.py">49</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p50.py">50</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p51.py">51</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p52.py">52</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p53.py">53</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p54.py">54</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p55.py">55</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p56.py">56</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p57.py">57</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p58.py">58</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p59.py">59</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p60.py">60</a>
<a href="https://fengxia41103.github.io/myblog/downloads/euler/p61.py">61</a></p>
<hr>
<h1 id="problem1">problem 1</h1>
<p><a href="https://projecteuler.net/problem=1">Question</a>:</p>
<blockquote>
<p>If we list all the natural numbers below 10 that are multiples of 3 or
5, we get 3, 5, 6 and 9. The sum of these multiples is 23.</p>
<p>Find the sum of all the multiples of 3 or 5 below 1000.
</p>
</blockquote>
<p>I'm forming a pattern on strategy:</p>
<ul>
<li><strong>problem space</strong>: how many numbers we are to search through if
  using brute force &rarr; what is the value of '''n''' in
  ''range(n)''? In this one, problem space ''n=1000''.</li>
<li><strong>test criteria</strong>: what type of number we are interested in? &rarr;
  divisible by 3 or 5.</li>
</ul>
<p>Once you have this, another question usually surfaces is that it is
may not be a good idea or even feasible to search through the entire
problem space, eg. multiplication of two super large numbers &rarr;
this can overwhelm the computer to the point that result is not
reliable anymore. But anyway, it is not the case here. But keep that
in mind.</p>
<p>So once we have determined the summary above, the key is to define
<strong>test criteria</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">natural_number_divisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Find natural number between [1,n] that is</span>
<span class="sd">    divisible by &quot;d&quot;.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">num</span> <span class="o">%</span> <span class="n">d</span><span class="p">:</span>  <span class="c1"># num%d=0</span>
            <span class="k">yield</span> <span class="n">num</span>
        <span class="n">num</span> <span class="o">+=</span> <span class="n">d</span>
</code></pre></div>

<p>With that, the rest is simply a main function wrap:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">natural_number_divisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">c</span>

    <span class="c1"># multiple of 3*5 has been counted twice</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">natural_number_divisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">5</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">-=</span> <span class="n">c</span>

    <span class="c1"># final result</span>
    <span class="nb">print</span> <span class="n">result</span>
</code></pre></div>

<hr>
<h1 id="problem2">problem 2</h1>
<p><a href="https://projecteuler.net/problem=2">Question</a>:</p>
<blockquote>
<p>Each new term in the Fibonacci sequence is generated by adding the
previous two terms. By starting with 1 and 2, the first 10 terms
will be:</p>
<p>1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...</p>
<p>By considering the terms in the Fibonacci sequence whose values do
not exceed four million, find the sum of the even-valued terms.</p>
</blockquote>
<p>The key is to learn and understand <a href="https://en.wikipedia.org/wiki/Fibonacci_number">fibonacci sequence</a>.</p>
<ul>
<li><strong>problem space</strong>: &lt; 4000,000</li>
<li><strong>test criteria</strong>:<ol>
<li>is fibonacci number</li>
<li>is even number</li>
</ol>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fibonacci</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Generate Fibonacci number less than N</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">p1</span> <span class="o">&lt;=</span> <span class="n">N</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">p1</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">bound</span> <span class="o">=</span> <span class="mi">4000000</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="ow">not</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">bound</span><span class="p">))</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>

<p><strong>Note</strong>: we are using <code>filter</code> which will actually build a list in
memory. This works when problem space is not overwhelmingly
large. What if <code>bound=4*10^100000000000</code> (hypothetically speaking)?
Generator can run iterate up to that bound, but building in memory
list would be disastrous. So here we are being cheap. A proper
approach is simply counting the <code>sum</code> value as we go &rarr; <code>count
+= next number</code>.</p>
<hr>
<h1 id="problem3">problem 3</h1>
<p><a href="https://projecteuler.net/problem=3">Question</a>:</p>
<blockquote>
<p>The prime factors of 13195 are 5, 7, 13 and 29.</p>
<p>What is the largest prime factor of the number 600851475143 ?</p>
</blockquote>
<p>I certainly learned a lot from this seemingly simple question!</p>
<ul>
<li><strong>problem space</strong>: <code>int &lt; 600851475143</code></li>
<li><strong>test criteria</strong>: is prime?</li>
</ul>
<p>First of all, how to determine a number is a prime? <a href="https://en.wikipedia.org/wiki/Primality_test">primality
test</a>.  The easiest
<a href="https://en.wikipedia.org/wiki/Trial_division">trial division</a> is the
only one I was able to grasp after reading all the others.</p>
<p>Further, problem space is not what seems &larr; it can be reduced to
<code>sqrt(n)</code> when searching for prime factor of <code>n</code>! The <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of
Eratosthenes</a>
looks really cool, but I couldn't quite yet figure out how to
implement this in code (well, I'm sure there are code snippet out
there that has done this. But I want to come up one myself. Therefore,
it requires me to fully understand this method in order to translate
this into code I can write.)</p>
<p>Here goes the trial division primality test:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">6</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<h2>method 1</h2>
<p>So we then search for the next prime one and one until we find all
of them, then <code>max(list of primes)</code>?</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">next_prime</span><span class="p">(</span><span class="n">max_prime</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">max_prime</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">i</span>

<span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method 1 is searching for the largest prime factor from bottom</span>
<span class="sd">    up. Starting with the smallest prime number, 2, we divide target</span>
<span class="sd">    as much as possible to reduce it, then move on to the next prime</span>
<span class="sd">    number and repeat. The remainder, if is a prime, is the result.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="n">primes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_prime</span><span class="p">(</span><span class="n">primes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">p</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">p</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">%</span> <span class="n">p</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">p</span>

    <span class="nb">print</span> <span class="s1">&#39;max prime&#39;</span><span class="p">,</span> <span class="n">n</span>
</code></pre></div>

<h2>method 2</h2>
<p>That's a waste! There is a smarter way to this problem.</p>
<ol>
<li>max problem space is <code>&lt; sqrt(n)</code></li>
<li>What is <strong>n's prime factor y</strong>?  &rarr; <code>n</code> is divisible by <code>y</code>! So
   if we ever find a <code>y</code>, we can reduce <code>n</code> by <code>n /= y</code>. This
   will shrink problem space each step we take.</li>
<li>next, instead finding prime factors, we are to <strong>eliminate</strong> all
   non-prime factors! If given a divisible prime, say <code>2</code>, we can
   keep looping <code>n /= 2</code> until it is not divisible by 2 any
   further.</li>
</ol>
<p>This would have eliminated all factors that are multiple of 2. By this
point, <code>n</code> has probably been reduced quite a bit.</p>
<p>Next, search for the next divisible, 3. If we search starting with 2,
we are guaranteed that next divisible, if exist, would be a prime!
&rarr; therefore, the problem reduces to looping in this fashion until
<code>y</code> is not divisible by reduced <code>n</code> anymore. What's left of <code>n</code> is the
largest prime factor!</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method 2 follows the same logic as method 1&#39;s. But its</span>
<span class="sd">    implementation is much simpler. We simply searching from 2 and up</span>
<span class="sd">    until we find the result. In between, we don&#39;t search for the next</span>
<span class="sd">    prime as method 1 does. Instead, we step by +1. Since the search</span>
<span class="sd">    is from bottom up, only the next prime will possibly yield a %==0</span>
<span class="sd">    anyway, so it&#39;s the same as method 1&#39;s.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span>
</code></pre></div>

<h2>performance</h2>
<ul>
<li>Method 1: <strong>2.97s</strong></li>
<li>Method 2: <strong>0.056s</strong></li>
</ul>
<hr>
<h1 id="problem4">problem 4</h1>
<p><a href="https://projecteuler.net/problem=4">Question</a>:</p>
<blockquote>
<p>A palindromic number reads the same both ways. The largest
palindrome made from the product of two 2-digit numbers is 9009 = 91
× 99.</p>
<p>Find the largest palindrome made from the product of two 3-digit
numbers.</p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>100*100 &amp;mdash; 999*999</code></li>
<li><strong>test criteria</strong>: is
  <a href="https://en.wikipedia.org/wiki/Palindromic_number">palindromic</a>?
  (see <a href="#problem36">problem 36</a> for a cool trick on palindromic test).</li>
</ul>
<p>Take the brute force way:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>


<span class="k">def</span><span class="w"> </span><span class="nf">is_palindromic</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test n to be palindromic number.</span>

<span class="sd">    The easiest way, I think, is to convert &quot;n&quot; to</span>
<span class="sd">    string and test its reverse == itself.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">string_version</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">string_version</span><span class="p">))</span> <span class="o">==</span> <span class="n">string_version</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">999</span><span class="p">),</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">is_palindromic</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">matrix</span><span class="p">)</span>
    <span class="nb">print</span> <span class="nb">max</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>

<p>A couple thoughts for improvement:</p>
<ol>
<li>this will build an in memory <code>set</code> with all possible combinations
   of 2 numbers in <code>range(100,999)</code>. This is ok when problem space is
   limited. What if the upper bound is 1 million times greater?</li>
<li>Another thought is that product of the two numbers specified in the
   problem range will generate quite some redundant results,
   eg. <code>100*300 = 150*200</code>.</li>
</ol>
<hr>
<h1 id="problem5">problem 5</h1>
<p><a href="https://projecteuler.net/problem=5">Question</a>:</p>
<blockquote>
<p>2520 is the smallest number that can be divided by each of the
numbers from 1 to 10 without any remainder.</p>
<p>What is the smallest positive number that is evenly divisible by all
of the numbers from 1 to 20?</p>
</blockquote>
<ul>
<li><strong>problem space</strong>: &lt; 20!</li>
<li><strong>test criteria</strong>: divisible by all numbers between 1-20 without
  redundancy, eg. <code>%4==0 includes %2==0</code>.</li>
</ul>
<h2>method 1</h2>
<p>Don't know what I was thinking. Definitely an example of overthinking
and over engineering.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method 1 is a bit over complex.  We are to turn all target values</span>
<span class="sd">    into a list of prime factors.  Then we compare each factor list to</span>
<span class="sd">    compute how many 2s, 3s.. and so on each list represents. We then</span>
<span class="sd">    take the max count of 2s, 3s... and so on to form a master list.</span>
<span class="sd">    This master list will be able to derive all target values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># find prime factors</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
        <span class="n">factors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">while</span> <span class="n">j</span> <span class="o">*</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">i</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">i</span> <span class="o">%</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">j</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">j</span>
                <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
            <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">factors</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
                <span class="n">results</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)),</span> <span class="n">results</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">results</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>

    <span class="n">multiple</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="n">multiple</span> <span class="o">+=</span> <span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">*</span> <span class="n">count</span>

    <span class="nb">print</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">multiple</span><span class="p">)</span>
</code></pre></div>

<h2>method 2</h2>
<p>Much better. Build a minimum factor list of a given target.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method 2 uses a base factor list</span>
<span class="sd">    to iterate. The idea is to divide target as much</span>
<span class="sd">    as possible using all factors on the list. If there is</span>
<span class="sd">    still a remainder, add that to factor list. This way,</span>
<span class="sd">    we are searching the minimum factor list that represents</span>
<span class="sd">    a target value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">factors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="n">f</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">f</span>
        <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">factors</span><span class="p">)</span>
</code></pre></div>

<hr>
<h1 id="problem6">problem 6</h1>
<p><a href="https://projecteuler.net/problem=6">Question</a>:</p>
<blockquote>
<p>The sum of the squares of the first ten natural numbers is,</p>
<p>1<sup>2</sup> + 2<sup>2</sup> + ... + 10<sup>2</sup> = 385</p>
<p>The square of the sum of the first ten natural numbers is,</p>
<p>(1 + 2 + ... + 10)<sup>2</sup> = 55<sup>2</sup> = 3025</p>
<p>Hence the difference between the sum of the squares of the first ten
natural numbers and the square of the sum is 3025 − 385 = 2640.</p>
<p>Find the difference between the sum of the squares of the first one
hundred natural numbers and the square of the sum.
</p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>int &lt; 100</code></li>
<li><strong>test criteria</strong>: none</li>
</ul>
<p>This problem involves nothing but math computation. Consider that
problem space is so small, I didnot bother with anything else but went
with brute force:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">a</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)])</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">*</span><span class="n">b</span>

    <span class="nb">print</span> <span class="n">b</span><span class="o">-</span><span class="n">a</span>
</code></pre></div>

<hr>
<h1 id="problem7">problem 7</h1>
<p><a href="https://projecteuler.net/problem=7">Question</a></p>
<blockquote>
<p>By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13, we can
see that the 6th prime is 13.</p>
<p>What is the 10 001st prime number?
</p>
</blockquote>
<p>Another prime number problem.</p>
<ul>
<li><strong>problem space</strong>: much greater than 10001. I would think prime
  numbers are spaced out further and further when moving away from 2.</li>
<li><strong>test criteria</strong>:<ol>
<li>is prime?</li>
<li>is the 10001st one?</li>
</ol>
</li>
</ul>
<p>Since we have done primality test in <a href="#problem3">problem 3</a>, the
easiest way is simply counting how many primes we got:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">10001</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span>

    <span class="nb">print</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">th prime is&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">2</span>
</code></pre></div>

<p>Note that we start with <code>i=3</code> so we have skipped counting <code>2</code> and <code>3</code>
&rarr; thus the correct counter is <code>i-2</code>.</p>
<h2>analysis</h2>
<p>How (un)linear are prime numbers found within natural numbers? Using
the first 10,000 of them for a quick analysis surprisingly reveals
that they are quite <code>linear</code> with small jigzags but not much.</p>
<figure class="col s12 center">
  <img src="../downloads/euler/ten_thousand_primes.png"
       class="responsive-image">
  <figcaption>First 10,000 primes</figcaption>
</figure>
<figure class="col s12 center">
  <img src="../downloads/euler/one_hundred_primes.png"
       class="responsive-image">
  <figcaption>First 100 primes</figcaption>
</figure>
<figure class="col s12 center">
  <img src="../downloads/euler/ten_thousand_primes_analysis.png"
       class="responsive-image">
  <figcaption>9,900th-10,000th primes</figcaption>
</figure>

<hr>
<h1 id="problem8">problem 8</h1>
<p><a href="https://projecteuler.net/problem=8">Question</a>:</p>
<blockquote>
<p>The four adjacent digits in the 1000-digit number that have the
greatest product are <code>9 × 9 × 8 × 9 = 5832</code>.</p>
<p><code>73167176531330624919225119674426574742355349194934
96983520312774506326239578318016984801869478851843
85861560789112949495459501737958331952853208805511
12540698747158523863050715693290963295227443043557
66896648950445244523161731856403098711121722383113
62229893423380308135336276614282806444486645238749
30358907296290491560440772390713810515859307960866
70172427121883998797908792274921901699720888093776
65727333001053367881220235421809751254540594752243
52584907711670556013604839586446706324415722155397
53697817977846174064955149290862569321978468622482
83972241375657056057490261407972968652414535100474
82166370484403199890008895243450658541227588666881
16427171479924442928230863465674813919123162824586
17866458359124566529476545682848912883142607690042
24219022671055626321111109370544217506941658960408
07198403850962455444362981230987879927244284909188
84580156166097919133875499200524063689912560717606
05886116467109405077541002256983155200055935729725
71636269561882670428252483600823257530420752963450</code></p>
<p>Find the thirteen adjacent digits in the 1000-digit number that have
the greatest product. What is the value of this product?</p>
</blockquote>
<p>My thought was to treat this l000-digit number as a list first. Then
the problem becomes max product of 13 adjacent items.</p>
<ul>
<li><strong>problem space</strong>: <code>len([int.....]) = 1000</code></li>
<li><strong>test</strong> criteria: find product of 13 consecutive items, and max(all products)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">73167176531330624919225119674426574742355349194934</span>
<span class="s1">96983520312774506326239578318016984801869478851843</span>
<span class="s1">85861560789112949495459501737958331952853208805511</span>
<span class="s1">12540698747158523863050715693290963295227443043557</span>
<span class="s1">66896648950445244523161731856403098711121722383113</span>
<span class="s1">62229893423380308135336276614282806444486645238749</span>
<span class="s1">30358907296290491560440772390713810515859307960866</span>
<span class="s1">70172427121883998797908792274921901699720888093776</span>
<span class="s1">65727333001053367881220235421809751254540594752243</span>
<span class="s1">52584907711670556013604839586446706324415722155397</span>
<span class="s1">53697817977846174064955149290862569321978468622482</span>
<span class="s1">83972241375657056057490261407972968652414535100474</span>
<span class="s1">82166370484403199890008895243450658541227588666881</span>
<span class="s1">16427171479924442928230863465674813919123162824586</span>
<span class="s1">17866458359124566529476545682848912883142607690042</span>
<span class="s1">24219022671055626321111109370544217506941658960408</span>
<span class="s1">07198403850962455444362981230987879927244284909188</span>
<span class="s1">84580156166097919133875499200524063689912560717606</span>
<span class="s1">05886116467109405077541002256983155200055935729725</span>
<span class="s1">71636269561882670428252483600823257530420752963450</span>
<span class="s1">    &#39;&#39;&#39;</span>

    <span class="n">matrix</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">matrix</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">13</span>

    <span class="n">products</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span><span class="o">-</span><span class="n">n</span><span class="p">):</span>
        <span class="n">products</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">n</span><span class="p">]))</span>

    <span class="nb">print</span> <span class="nb">max</span><span class="p">(</span><span class="n">products</span><span class="p">)</span>
</code></pre></div>

<p>One small thing after reading discussion threads was to replace
<code>lambda x,y: x*y</code> with <code>from operator import mul</code>.  See <a href="https://docs.python.org/2/library/operator.html">Python
operator</a> manual for
more.</p>
<hr>
<h1>problem 9</h1>
<p><a href="https://projecteuler.net/problem=9">Question</a>:</p>
<blockquote>
<p>A Pythagorean triplet is a set of three natural numbers, <code>a&gt;b&gt;c</code>, for
which, a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup>.</p>
<p>For example, 3<sup>2</sup> + 4<sup>2</sup> = 9 + 16 = 25 = 5<sup>2</sup>.
There exists exactly one Pythagorean triplet for which <code>a+b+c = 1000</code>.
Find the product <code>abc</code>.</p>
</blockquote>
<ul>
<li><strong>problem space</strong>: combo of any 3 integers where <code>int &lt; 1000</code></li>
<li><strong>test criteria</strong>:<ol>
<li><code>a != b != c</code></li>
<li><code>a + b + c = 1000</code></li>
<li><code>a^2 + b^2 = c^2</code></li>
</ol>
</li>
</ul>
<h2>method 1</h2>
<p>Iterate all combo of 3 integers and test by criteria:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>

<span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">tmp_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span> <span class="mi">3</span><span class="p">):</span>
        <span class="n">tmp_sum</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>
        <span class="k">if</span> <span class="n">tmp_sum</span> <span class="o">!=</span> <span class="n">n</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">c</span> <span class="o">*</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span> <span class="o">*</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">^2+</span><span class="si">%d</span><span class="s1">^2=</span><span class="si">%d</span><span class="s1">^2&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="nb">print</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
            <span class="k">break</span>
</code></pre></div>

<h2>method 2</h2>
<p>We can reduce ''problem space'' dramatically if iterating combo of 2
which, a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup> numbers instead
of 3! Since a,b,c are bound by a criteria that sum of them = 1000, we
can derive c if given a and b.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
        <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]:</span>
            <span class="k">continue</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">c</span> <span class="o">*</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span> <span class="o">*</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">^2+</span><span class="si">%d</span><span class="s1">^2=</span><span class="si">%d</span><span class="s1">^2&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="nb">print</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span>
            <span class="k">break</span>
</code></pre></div>

<h2>performance</h2>
<ul>
<li>method 1: <strong>109.4s</strong></li>
<li>method 2: <strong>2.31s</strong></li>
</ul>
<hr>
<h1 id="problem10">problem 10</h1>
<p><a href="https://projecteuler.net/problem=10">Question</a>:</p>
<blockquote>
<p>The sum of the primes below 10 is 2 + 3 + 5 + 7 = 17.</p>
<p>Find the sum of all the primes below two million.</p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>int &lt; 2000,000</code></li>
<li><strong>test criteria</strong>: is prime?</li>
</ul>
<p>Easiest approach is to find all primes under <code>2,000,000</code> and add them
up.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_primes</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">2000000</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">get_primes</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
</code></pre></div>

<h2>primality test</h2>
<p>This topic is not easy. My implementation is so called <strong>naive</strong>
version because it is simple to understand but does not scale well
when testing large number.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test function if a given number is prime.</span>

<span class="sd">    Argument:</span>
<span class="sd">    :n: number to test</span>

<span class="sd">    Return:</span>
<span class="sd">    :Boolean: true if n is prime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">6</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<h2>get primes up to N</h2>
<p>My implementation is, well, not creative nor fast. This version, found
in [here][4], is a much nicer version, even though I don't fully
understand this yet.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ifilter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">sqrt</span>


<span class="k">def</span><span class="w"> </span><span class="nf">primes_up_to</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates all primes less than n.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="n">F</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span>
    <span class="n">seq1</span> <span class="o">=</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">seq2</span> <span class="o">=</span> <span class="n">xrange</span><span class="p">(</span><span class="n">seq1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ifilter</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">,</span> <span class="n">seq1</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">p</span>
        <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">p</span> <span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">p</span><span class="p">):</span>
            <span class="n">F</span><span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ifilter</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">,</span> <span class="n">seq2</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">p</span>
</code></pre></div>

<p>To find all primes under <code>1,000,000</code>, performance comparison:</p>
<ol>
<li>my naive version: 3.1s</li>
<li>this version: 0.14s</li>
</ol>
<p>However, this version suffers by using <code>F</code> to maintain the sieve. For
a large <code>n</code> (&gt; long long in C), Python will complain with an error!</p>
<h2>see also</h2>
<p>From
<a href="http://www.macdevcenter.com/pub/a/python/excerpt/pythonckbk_chap1/index1.html?page=2">here</a>,
I got a couple nice ones.</p>
<h3>a one liner to get primes under N</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">primes_oneliner</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="n">aux</span> <span class="o">=</span> <span class="p">{</span>  <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">aux</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">p</span><span class="o">%</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">aux</span> <span class="k">if</span> <span class="n">p</span><span class="o">&gt;=</span><span class="n">d</span><span class="o">+</span><span class="n">d</span><span class="p">]]</span>
</code></pre></div>

<h3>prime generator</h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>
<span class="k">def</span><span class="w"> </span><span class="nf">erat2</span><span class="p">(</span> <span class="p">):</span>
    <span class="n">D</span> <span class="o">=</span> <span class="p">{</span>  <span class="p">}</span>
    <span class="k">yield</span> <span class="mi">2</span>
    <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">islice</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">D</span><span class="p">[</span><span class="n">q</span><span class="o">*</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="n">q</span>
            <span class="k">yield</span> <span class="n">q</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="n">q</span>
            <span class="k">while</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">D</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="n">x</span><span class="o">&amp;</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">+=</span> <span class="n">p</span>
            <span class="n">D</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span>
</code></pre></div>

<h3>get primes up to N</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">primes_less_than</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="c1"># make `primes&#39; a list of known primes &lt; N</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">N</span> <span class="o">&lt;=</span> <span class="mi">17</span><span class="p">:</span> <span class="k">return</span> <span class="n">primes</span>
    <span class="c1"># candidate primes are all odd numbers less than N and over 15,</span>
    <span class="c1"># not divisible by the first few known primes, in descending order</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">((</span><span class="n">N</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">|</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
                  <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">7</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">11</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">13</span><span class="p">]</span>
    <span class="c1"># make `top&#39; the biggest number that we must check for compositeness</span>
    <span class="n">top</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">N</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">top</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">top</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">N</span><span class="p">:</span>
        <span class="n">top</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="c1"># main loop, weeding out non-primes among the remaining candidates</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># get the smallest candidate: it must be a prime</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">candidates</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">top</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="c1"># remove all candidates which are divisible by the newfound prime</span>
        <span class="n">candidates</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">_</span> <span class="n">_rmod_</span> <span class="n">_</span><span class="p">,</span> <span class="n">candidates</span><span class="p">)</span>
    <span class="c1"># all remaining candidates are prime, add them (in ascending order)</span>
    <span class="n">candidates</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span> <span class="p">)</span>
    <span class="n">primes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">primes</span>
</code></pre></div>

<hr>
<h1>problem 11</h1>
<p><a href="https://projecteuler.net/problem=11">Question</a>:</p>
<blockquote>
<p><p>In the 20×20 grid below, four numbers along a diagonal line have
been marked in red.</p>
<p style="font-family:'courier new';text-align:center;font-size:10pt;">
08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08<br>
49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00<br>
81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65<br>
52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91<br>
22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80<br>
24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50<br>
32 98 81 28 64 23 67 10 <span style="color:#ff0000;"><b>26</b></span> 38 40 67 59 54 70 66 18 38 64 70<br>
67 26 20 68 02 62 12 20 95 <span style="color:#ff0000;"><b>63</b></span> 94 39 63 08 40 91 66 49 94 21<br>
24 55 58 05 66 73 99 26 97 17 <span style="color:#ff0000;"><b>78</b></span> 78 96 83 14 88 34 89 63 72<br>
21 36 23 09 75 00 76 44 20 45 35 <span style="color:#ff0000;"><b>14</b></span> 00 61 33 97 34 31 33 95<br>
78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92<br>
16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57<br>
86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58<br>
19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40<br>
04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66<br>
88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69<br>
04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36<br>
20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16<br>
20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54<br>
01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48<br></p>
<p>The product of these numbers is 26 × 63 × 78 × 14 = 1788696.</p></p>
<p><p>What is the greatest product of four adjacent numbers in the same
direction (up, down, left, right, or diagonally) in the 20×20
grid?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: 20x20 int matrix</li>
<li><strong>test criteria</strong>: 4 numbers are selected by proper indexing, and
  find <code>max([sums])</code>.</li>
</ul>
<p>The challenge is how to select four numbers in the same pattern as the
example shown above.</p>
<p>Note that requirement is to count both horizontally and vertically
adjacent numbers, but also diagonally adjacent ones &rarr; this
includes diagonal numbers in both directions &larr; from left to right
and from right to left.</p>
<p>For example, diagonally left to right, first number's index is <code>i</code>, if
the first index is <code>i</code>, next index is <code>i+20*1+1</code>, then <code>i+20*2+2</code>,
then <code>i+20*3+3</code>.  Not bad.</p>
<p>First, we <strong>flatten</strong> the matrix into a list of integer.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08</span>
<span class="s1">49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00</span>
<span class="s1">81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65</span>
<span class="s1">52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91</span>
<span class="s1">22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80</span>
<span class="s1">24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50</span>
<span class="s1">32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70</span>
<span class="s1">67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21</span>
<span class="s1">24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72</span>
<span class="s1">21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95</span>
<span class="s1">78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92</span>
<span class="s1">16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57</span>
<span class="s1">86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58</span>
<span class="s1">19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40</span>
<span class="s1">04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66</span>
<span class="s1">88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69</span>
<span class="s1">04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36</span>
<span class="s1">20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16</span>
<span class="s1">20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54</span>
<span class="s1">01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48</span>
<span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">matrix</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)]</span>
    <span class="n">row_size</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">col_size</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre></div>

<h2>method 1</h2>
<p>In this method, we count index in a brute force fashion &rarr; 4
directions to count:</p>
<ol>
<li>horizontal</li>
<li>vertical</li>
<li>diagonal from left to right</li>
<li>and diagonal from right to left</li>
</ol>
<h3>horizontal</h3>
<p>Horizontal selection is a moving window of a size <code>n (n=4)</code>. By
iterating through rows and columns, selection is
<code>row[col_index:col_index+n]</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">horizontal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_size</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_size</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="n">r</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">+</span>
                              <span class="n">c</span><span class="p">:</span><span class="n">r</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div>

<h3>vertical</h3>
<p>Vertical is straightforward: column index is fixed, we are to select
<code>row_index</code> &rarr; <code>row_index+4</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">vertical</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_size</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">+</span> <span class="n">c</span>
                <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div>

<h3>diagonal left to right</h3>
<p>Similar to counting vertically, we also shift column index by 1 per
row iteration:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">diagonal_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Find diagonal adjacent numbers per requirement.</span>
<span class="sd">    The one counts from left to right.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># iterate row</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="c1"># iterate col</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_size</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># iterate adjacent per requirement</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">j</span>
                <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">):</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>

            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div>

<h3>diagonal right to left</h3>
<p>Basically the opposite of diagonal selection from left to right &rarr;
by reducing column index by 1 per row iteration:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">diagonal_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Find diagonal adjacent numbers per requirement.</span>
<span class="sd">    This one counts from right to left.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># iterate row</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="c1"># iterate col</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">col_size</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># iterate adjacent per requirement</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">))):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">row_size</span> <span class="o">+</span> <span class="n">c</span> <span class="o">-</span> <span class="n">j</span>
                <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">):</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>

            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre></div>

<h2>method 2</h2>
<p>Apparently finding index as above is tedious and error prone. Instead
of moving indexes, how about moving the matrix itself instead? Among
all four selections, horizontal moving window is the easiest. So how
about moving matrix in a way that counting vertical and diagonal
becoming horizontal? The clue lies in:</p>
<ul>
<li>vertical &rarr; horizontal: transpose</li>
<li>left &amp; right and right&rarr;left: reverse a list</li>
</ul>
<h3>moving window</h3>
<p>Moving window is to select 4 rows each time from the entire matrix:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">moving_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">window_size</span><span class="p">):</span>
    <span class="n">combo</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">window_size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">combo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="n">window_size</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">combo</span>
</code></pre></div>

<h3>horizontal</h3>
<p>Horizontal selection is easy:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">horizontal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">window_size</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">moving_window</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">window_size</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
</code></pre></div>

<h3>vertical</h3>
<p>This is a neat trick on how to transpose a matrix: <code>zip(*self.matrix)</code>
where <code>self.matrix</code> is a list of list mimicing a matrix.</p>
<p>Once matrix has been turned 90 degrees, vertical counting becomes
horizontal!</p>
<div class="highlight"><pre><span></span><code><span class="c1"># transpose matrix and count verticals</span>
<span class="n">results</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
</code></pre></div>

<h3>diagonal left to right</h3>
<p>The idea is to first take a subset of matrix (<code>moving_window()</code>),
assuming that first row is fixed, shifting the other 3 lines to the
left &rarr; 2nd line shifted by 1, 3rd line shifted by 2, 4th line
shifted by 4 &rarr; so the selection is actually lining up
<strong>vertically</strong>. Well, then we know how to select <strong>vertical</strong>, don't
we :)</p>
<p>How to shift? by using list's <code>pop</code> method (popping from left) and
append 0s to the right.</p>
<p>Note that because shifting will be in place, meaning the original list
will change, it is necessary to make a <code>deepcopy</code> of the picked
subset so the original matrix is intact.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">diagonal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">window_size</span><span class="p">):</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">moving_window</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">window_size</span><span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">sub_set</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
        <span class="c1"># we need to make a copy since we are to shift</span>
        <span class="c1"># rows in place. Since sub_set is a list[list],</span>
        <span class="c1"># deepcopy is needed!</span>
        <span class="n">sub_set_copy</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">sub_set</span><span class="p">)</span>

        <span class="c1"># shift rows so diagnoal numbers will then be aligned</span>
        <span class="c1"># vertically.</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">sub</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sub_set_copy</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">idx</span><span class="p">):</span>
                <span class="n">sub</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">sub</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="c1"># transpose vertical to horizontal, and done :)</span>
        <span class="n">results</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">sub_set_copy</span><span class="p">),</span> <span class="n">window_size</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div>

<h3>diagonal right to left</h3>
<p>This is the mirror action of diagonal left to right &rarr; we can
flip the matrix:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># diagonal right to left</span>
<span class="c1"># first we reverse the matrix, then treat it as left -&gt; right</span>
<span class="n">reversed_matrix</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">m</span><span class="p">))</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">]</span>
<span class="n">results</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diagonal</span><span class="p">(</span><span class="n">reversed_matrix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
</code></pre></div>

<hr>
<h1 id="problem12">problem 12</h1>
<p><a href="https://projecteuler.net/problem=12">Question</a>:</p>
<blockquote>
<p><p>The sequence of triangle numbers is generated by adding the
natural numbers. So the 7<sup>th</sup> triangle number would be 1 +
2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten terms would be:</p> <p
style="text-align:center;">1, 3, 6, 10, 15, 21, 28, 36, 45, 55,
...</p> <p>Let us list the factors of the first seven triangle
numbers:</p> <blockquote style="font-family:'courier
new';"><b>&nbsp;1</b>: 1<br><b>&nbsp;3</b>: 1,3<br><b>&nbsp;6</b>:
1,2,3,6<br><b>10</b>: 1,2,5,10<br><b>15</b>: 1,3,5,15<br><b>21</b>:
1,3,7,21<br><b>28</b>: 1,2,4,7,14,28</blockquote> <p>We can see that
28 is the first triangle number to have over five divisors.</p>
<p>What is the value of the first triangle number to have over five
hundred divisors?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>&lt; 500!</code>, but this is too much to iterate</li>
<li><strong>test criteria</strong>:<ol>
<li>is divisor of <code>n</code>?</li>
<li><code>&gt; 500</code> divisors in total?</li>
</ol>
</li>
</ul>
<h2>find divisors</h2>
<p>The dummy way to search for divisors of a number <code>n</code>. <strong>Note</strong> the
problem space of this is <code>sqrt</code> of <code>n</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find all divisors given number &quot;n&quot;.</span>

<span class="sd">    Note that problem space is sqrt(n) since factors</span>
<span class="sd">    will repeat themselves passing that point. This greatly reduced</span>
<span class="sd">    number of iteration needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">yield</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="n">i</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>

<h2>method 1</h2>
<p>Brute force. One thing to note is the starting point. Knowing the
result is 12374, we could potentially see how we can manipulate the
starting value of <code>m</code> in order to reduce searching time &larr; this is
an after thought.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">max_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">10000</span> <span class="c1"># we can guess this starting point by trial and error</span>
    <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">max_count</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">all_divisors</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">divisors</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
        <span class="n">max_count</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_count</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_divisors</span><span class="p">))</span>

        <span class="c1"># test criteria</span>
        <span class="k">if</span> <span class="n">max_count</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="c1"># move on</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># print result</span>
    <span class="nb">print</span> <span class="n">num</span><span class="p">,</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">max_count</span>
</code></pre></div>

<hr>
<h1>problem 13</h1>
<p><a href="https://projecteuler.net/problem=13">Question</a>:</p>
<blockquote>
<p><p>Work out the first ten digits of the sum of the following
one-hundred 50-digit numbers.</p>
<div style="font-family:'courier new';font-size:10pt;text-align:center;">
37107287533902102798797998220837590246510135740250<br>
46376937677490009712648124896970078050417018260538<br>
74324986199524741059474233309513058123726617309629<br>
91942213363574161572522430563301811072406154908250<br>
23067588207539346171171980310421047513778063246676<br>
89261670696623633820136378418383684178734361726757<br>
28112879812849979408065481931592621691275889832738<br>
44274228917432520321923589422876796487670272189318<br>
47451445736001306439091167216856844588711603153276<br>
70386486105843025439939619828917593665686757934951<br>
62176457141856560629502157223196586755079324193331<br>
64906352462741904929101432445813822663347944758178<br>
92575867718337217661963751590579239728245598838407<br>
58203565325359399008402633568948830189458628227828<br>
80181199384826282014278194139940567587151170094390<br>
35398664372827112653829987240784473053190104293586<br>
86515506006295864861532075273371959191420517255829<br>
71693888707715466499115593487603532921714970056938<br>
54370070576826684624621495650076471787294438377604<br>
53282654108756828443191190634694037855217779295145<br>
36123272525000296071075082563815656710885258350721<br>
45876576172410976447339110607218265236877223636045<br>
17423706905851860660448207621209813287860733969412<br>
81142660418086830619328460811191061556940512689692<br>
51934325451728388641918047049293215058642563049483<br>
62467221648435076201727918039944693004732956340691<br>
15732444386908125794514089057706229429197107928209<br>
55037687525678773091862540744969844508330393682126<br>
18336384825330154686196124348767681297534375946515<br>
80386287592878490201521685554828717201219257766954<br>
78182833757993103614740356856449095527097864797581<br>
16726320100436897842553539920931837441497806860984<br>
48403098129077791799088218795327364475675590848030<br>
87086987551392711854517078544161852424320693150332<br>
59959406895756536782107074926966537676326235447210<br>
69793950679652694742597709739166693763042633987085<br>
41052684708299085211399427365734116182760315001271<br>
65378607361501080857009149939512557028198746004375<br>
35829035317434717326932123578154982629742552737307<br>
94953759765105305946966067683156574377167401875275<br>
88902802571733229619176668713819931811048770190271<br>
25267680276078003013678680992525463401061632866526<br>
36270218540497705585629946580636237993140746255962<br>
24074486908231174977792365466257246923322810917141<br>
91430288197103288597806669760892938638285025333403<br>
34413065578016127815921815005561868836468420090470<br>
23053081172816430487623791969842487255036638784583<br>
11487696932154902810424020138335124462181441773470<br>
63783299490636259666498587618221225225512486764533<br>
67720186971698544312419572409913959008952310058822<br>
95548255300263520781532296796249481641953868218774<br>
76085327132285723110424803456124867697064507995236<br>
37774242535411291684276865538926205024910326572967<br>
23701913275725675285653248258265463092207058596522<br>
29798860272258331913126375147341994889534765745501<br>
18495701454879288984856827726077713721403798879715<br>
38298203783031473527721580348144513491373226651381<br>
34829543829199918180278916522431027392251122869539<br>
40957953066405232632538044100059654939159879593635<br>
29746152185502371307642255121183693803580388584903<br>
41698116222072977186158236678424689157993532961922<br>
62467957194401269043877107275048102390895523597457<br>
23189706772547915061505504953922979530901129967519<br>
86188088225875314529584099251203829009407770775672<br>
11306739708304724483816533873502340845647058077308<br>
82959174767140363198008187129011875491310547126581<br>
97623331044818386269515456334926366572897563400500<br>
42846280183517070527831839425882145521227251250327<br>
55121603546981200581762165212827652751691296897789<br>
32238195734329339946437501907836945765883352399886<br>
75506164965184775180738168837861091527357929701337<br>
62177842752192623401942399639168044983993173312731<br>
32924185707147349566916674687634660915035914677504<br>
99518671430235219628894890102423325116913619626622<br>
73267460800591547471830798392868535206946944540724<br>
76841822524674417161514036427982273348055556214818<br>
97142617910342598647204516893989422179826088076852<br>
87783646182799346313767754307809363333018982642090<br>
10848802521674670883215120185883543223812876952786<br>
71329612474782464538636993009049310363619763878039<br>
62184073572399794223406235393808339651327408011116<br>
66627891981488087797941876876144230030984490851411<br>
60661826293682836764744779239180335110989069790714<br>
85786944089552990653640447425576083659976645795096<br>
66024396409905389607120198219976047599490197230297<br>
64913982680032973156037120041377903785566085089252<br>
16730939319872750275468906903707539413042652315011<br>
94809377245048795150954100921645863754710598436791<br>
78639167021187492431995700641917969777599028300699<br>
15368713711936614952811305876380278410754449733078<br>
40789923115535562561142322423255033685442488917353<br>
44889911501440648020369068063960672322193204149535<br>
41503128880339536053299340368006977710650566631954<br>
81234880673210146739058568557934581403627822703280<br>
82616570773948327592232845941706525094512325230608<br>
22918802058777319719839450180888072429661980811197<br>
77158542502016545090413245809786882778948721859617<br>
72107838435069186155435662884062257473692284509516<br>
20849603980134001723930671666823555245252804609722<br>
53503534226472524250874054075591789781264330331690<br></div></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: given 100 50-digit numbers</li>
<li><strong>test criteria</strong>: none given. The challenge is how to keep track of
  sum result.</li>
</ul>
<p>How to count the most significant 10 digits of this sum? Don't brute
force this one. Instead, we are back to the basics of summing two
numbers &rarr; add least significant digits, and carry over overflow
&rarr; this reduced math to adding at most 100 single digit numbers
plus a carry over value (which is bound to be <code>&lt; 100*9</code>!) each time,
how wonderful!</p>
<p>Trick to add single digits is to transpose matrix so it turns from
visually vertical to horizontal:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;......&#39;&#39;&#39;</span> <span class="c1"># &lt;-- that matrix</span>

    <span class="n">m</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># flip and transpose</span>
    <span class="c1"># flip: start computing from lower digit and</span>
    <span class="c1"># up, like human does</span>
    <span class="c1">#</span>
    <span class="c1"># transpose: computing as a horizontal list</span>
    <span class="c1"># instead of visually vertical</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">]</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">matrix</span><span class="p">)</span>

    <span class="n">overflow</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span><span class="p">])</span> <span class="o">+</span> <span class="n">overflow</span>

        <span class="c1"># this is the digit residual</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">total</span> <span class="o">-</span> <span class="n">total</span><span class="o">/</span><span class="mi">10</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># next overflow</span>
        <span class="n">overflow</span> <span class="o">=</span> <span class="n">total</span><span class="o">/</span><span class="mi">10</span>

    <span class="c1"># flip back so lower digit is on the right most</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>

    <span class="nb">print</span> <span class="p">[</span><span class="n">overflow</span><span class="p">]</span><span class="o">+</span><span class="n">result</span><span class="p">[:</span><span class="mi">10</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">overflow</span><span class="p">))]</span>
</code></pre></div>

<hr>
<h1>problem 14</h1>
<p><a href="https://projecteuler.net/problem=14">Question</a>:</p>
<blockquote>
<p><p>The following iterative sequence is defined for the set of
positive integers:</p> <p style="margin-left:50px;"><var>n</var> →
<var>n</var>/2 (<var>n</var> is even)<br><var>n</var> →
3<var>n</var> + 1 (<var>n</var> is odd)</p> <p>Using the rule above
and starting with 13, we generate the following sequence:</p> <div
style="text-align:center;">13 → 40 → 20 → 10 → 5 → 16 → 8 → 4 → 2 →
1</div> <p>It can be seen that this sequence (starting at 13 and
finishing at 1) contains 10 terms. Although it has not been proved
yet (Collatz Problem), it is thought that all starting numbers
finish at 1.</p> <p>Which starting number, under one million,
produces the longest chain?</p> <p class="note"><b>NOTE:</b> Once
the chain starts the terms are allowed to go above one million.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>int &lt; 1000,000</code></li>
<li><strong>test criteria</strong>: max length of chain, chain is created based on
  the rule given</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000000</span>
    <span class="n">max_len</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">chain_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
        <span class="n">max_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_len</span><span class="p">,</span> <span class="n">chain_len</span><span class="p">)</span>

        <span class="nb">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">chain_len</span>
</code></pre></div>

<h2>chain</h2>
<p>Nothing fancy here. Go by the rules:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">chain</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">n</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span>
</code></pre></div>

<hr>
<h1>problem 15</h1>
<p><a href="https://projecteuler.net/problem=15">Question</a>:</p>
<blockquote>
<p>Starting in the top left corner of a 2×2 grid, and only being able to
move to the right and down, there are exactly 6 routes to the bottom
right corner.</p>
<p><figure class="col s12 center">
  <img src="../downloads/euler/P015.gif"
       class="responsive-image">
</figure></p>
<p>How many such routes are there through a 20×20 grid?
</p>
</blockquote>
<p>This is a typical <a href="https://en.wikipedia.org/wiki/Dynamic_programming">dynamic
programming</a>
problem (and my first time encounter this concept).</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">21</span>  <span class="c1"># number of nodes, not legs, per side</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">grid</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">y</span><span class="p">]:</span>
                <span class="n">grid</span><span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

    <span class="nb">print</span> <span class="n">grid</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
</code></pre></div>

<p>Well, it turned out, this does <strong>not</strong> need computing even! Answer
is <code>40!/(20!*20!)</code>, what!!!!?</p>
<blockquote>
<p>Consider an example solution to the problem. It would be a list of 40
moves. The heart of this method lies in realizing that every single
path will consist of exactly 20 downward movements and 20 rightward
movements. As there are only two possible movements (down, right) we
can represent these paths as binary strings with a 0 indicating a down
move and a 1 for a right.</p>
<p>Consider two sets, P and B. P will be the set of all paths from the
starting position to the finish position consisting of only downward
and rightward movements (shortest paths). B will be the set of all
binary strings of length 40 consisting of exactly 20 0's and 20
1's. Clearly the cardinality of P is the solution to the problem. If
we can establish a bijection from P to B, then we can say, by the
bijective principle, that |B| = |P|.</p>
<p>Consider an arbitrary path, p, in P. We can clearly create a binary
string representation of p using the rules mentioned above. Therefore
our map M:P -&gt; B is surjective. And the fact that every binary string
representation represents a unique path implies that M is
injective. Therefore M is bijective.</p>
<p>We can calculate the cardinality of B, |B|, by labeling each digit in
a given string with an index. The question is then simplified into
"How many ways can 20 digits, identified by their indices, of a binary
string of length 40 be chosen to be 0 (or 1)?" In other words, how
many ways can we scatter the 20 downward (or rightward) movements
throughout the path? The answer to which is 40 choose 20,
or 137846528820.
</p>
</blockquote>
<p>and someone mentioned <a href="https://en.wikipedia.org/wiki/Pascal%27s_triangle">Pascal's triangle</a>, but I don't get this.</p>
<hr>
<h1>problem 16</h1>
<p><a href="https://projecteuler.net/problem=16">Question</a>:</p>
<blockquote>
<p>2<sup>15</sup> = 32768 and the sum of its digits is <code>3 + 2 + 7 + 6 +
8 = 26</code>.  What is the sum of the digits of the number
2<sup>1000</sup>?</p>
</blockquote>
<p>Didn't even bother with analysis because this problem is easy. The
only concern is whether Python math can handle large number such as
''2**100'' &rarr; it does, but I would consider this to be '''not
scalable'''. How about 2 to the power of 1000,000? I need to rethink
this one.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">1000</span><span class="p">)))</span>
</code></pre></div>

<p>Going through posts in <a href="https://projecteuler.net/thread=16;page=4">discussion
thread</a>, only one person
raised this question. Others went with computing <code>2**100</code> first and
convert it to string. However, it did confirm with my concern that
some language, eg. EMACScript, can only handle <code>2**53</code>, and java has
to use <code>BitInt</code> package. So the concern is valid but no one offers a
clean solution.</p>
<hr>
<h1>problem 17</h1>
<p><a href="https://projecteuler.net/problem=17">Question</a>:</p>
<blockquote>
<p><p>If the numbers 1 to 5 are written out in words: one, two,
  three, four, five, then there are 3 + 3 + 5 + 4 + 4 = 19 letters
  used in total.</p> <p>If all the numbers from 1 to 1000 (one
  thousand) inclusive were written out in words, how many letters
  would be used? </p> <br><p class="note"><b>NOTE:</b> Do not count
  spaces or hyphens. For example, 342 (three hundred and forty-two)
  contains 23 letters and 115 (one hundred and fifteen) contains 20
  letters. The use of "and" when writing out numbers is in
  compliance with British usage.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>int in [1, 1000]</code> inclusive</li>
<li><strong>test criteria</strong>: none really. we are to turn digits into ordinal
  representation.</li>
</ul>
<p>I don't see there is a shortcut to this problem. Just build a mapping
between digit to its english name, and <strong>strip off all white spaces</strong>
when counting.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">ordinals</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span>
        <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;four&#39;</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;five&#39;</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">:</span> <span class="s1">&#39;six&#39;</span><span class="p">,</span>
        <span class="mi">7</span><span class="p">:</span> <span class="s1">&#39;seven&#39;</span><span class="p">,</span>
        <span class="mi">8</span><span class="p">:</span> <span class="s1">&#39;eight&#39;</span><span class="p">,</span>
        <span class="mi">9</span><span class="p">:</span> <span class="s1">&#39;nine&#39;</span><span class="p">,</span>
        <span class="mi">10</span><span class="p">:</span> <span class="s1">&#39;ten&#39;</span><span class="p">,</span>
        <span class="mi">11</span><span class="p">:</span> <span class="s1">&#39;eleven&#39;</span><span class="p">,</span>
        <span class="mi">12</span><span class="p">:</span> <span class="s1">&#39;twelve&#39;</span><span class="p">,</span>
        <span class="mi">13</span><span class="p">:</span> <span class="s1">&#39;thirteen&#39;</span><span class="p">,</span>
        <span class="mi">14</span><span class="p">:</span> <span class="s1">&#39;fourteen&#39;</span><span class="p">,</span>
        <span class="mi">15</span><span class="p">:</span> <span class="s1">&#39;fifteen&#39;</span><span class="p">,</span>
        <span class="mi">16</span><span class="p">:</span> <span class="s1">&#39;sixteen&#39;</span><span class="p">,</span>
        <span class="mi">17</span><span class="p">:</span> <span class="s1">&#39;seventeen&#39;</span><span class="p">,</span>
        <span class="mi">18</span><span class="p">:</span> <span class="s1">&#39;eighteen&#39;</span><span class="p">,</span>
        <span class="mi">19</span><span class="p">:</span> <span class="s1">&#39;nineteen&#39;</span><span class="p">,</span>
        <span class="mi">20</span><span class="p">:</span> <span class="s1">&#39;twenty&#39;</span><span class="p">,</span>
        <span class="mi">30</span><span class="p">:</span> <span class="s1">&#39;thirty&#39;</span><span class="p">,</span>
        <span class="mi">40</span><span class="p">:</span> <span class="s1">&#39;forty&#39;</span><span class="p">,</span>
        <span class="mi">50</span><span class="p">:</span> <span class="s1">&#39;fifty&#39;</span><span class="p">,</span>
        <span class="mi">60</span><span class="p">:</span> <span class="s1">&#39;sixty&#39;</span><span class="p">,</span>
        <span class="mi">70</span><span class="p">:</span> <span class="s1">&#39;seventy&#39;</span><span class="p">,</span>
        <span class="mi">80</span><span class="p">:</span> <span class="s1">&#39;eighty&#39;</span><span class="p">,</span>
        <span class="mi">90</span><span class="p">:</span> <span class="s1">&#39;ninety&#39;</span><span class="p">,</span>
        <span class="mi">100</span><span class="p">:</span> <span class="s1">&#39;hundred&#39;</span><span class="p">,</span>
        <span class="mi">1000</span><span class="p">:</span> <span class="s1">&#39;thousand&#39;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ordinals</span> <span class="ow">and</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]:</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">ordinals</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="n">thousand</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">1000</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="n">ordinals</span><span class="p">[</span><span class="n">thousand</span><span class="p">]</span> <span class="o">+</span> <span class="n">ordinals</span><span class="p">[</span><span class="mi">1000</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">100</span><span class="p">:</span>
                <span class="c1"># 3-digit numbers</span>
                <span class="n">hundred</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">100</span>
                <span class="n">tmp</span> <span class="o">+=</span> <span class="n">ordinals</span><span class="p">[</span><span class="n">hundred</span><span class="p">]</span> <span class="o">+</span> <span class="n">ordinals</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="mi">100</span>
                <span class="k">if</span> <span class="n">x</span><span class="p">:</span>
                    <span class="n">tmp</span> <span class="o">+=</span> <span class="s1">&#39;and&#39;</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ordinals</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">10</span><span class="p">:</span>
                <span class="c1"># 2-digit numbers</span>
                <span class="n">ten</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">10</span>
                <span class="n">tmp</span> <span class="o">+=</span> <span class="n">ordinals</span><span class="p">[</span><span class="n">ten</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">ten</span>
            <span class="n">tmp</span> <span class="o">+=</span> <span class="n">ordinals</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>

    <span class="nb">print</span> <span class="n">results</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">results</span><span class="p">])</span>
</code></pre></div>

<hr>
<h1>problem 18</h1>
<p><a href="https://projecteuler.net/problem=18">Question</a>:</p>
<blockquote>
<p><div class="problem_content" role="problem">
  <p>
    By starting at the top of the triangle below and moving to adjacent numbers on
    the row below, the maximum total from top to bottom is 23.
  </p>
  <p style="text-align:center;font-family:'courier new';font-size:12pt;">
    <span style="color:#ff0000;"><b>3</b></span><br><span style="color:#ff0000;"><b>7</b></span> 4<br>
    2 <span style="color:#ff0000;"><b>4</b></span> 6<br>
    8 5 <span style="color:#ff0000;"><b>9</b></span> 3</p>
  <p>That is, 3 + 7 + 4 + 9 = 23.</p>
  <p>Find the maximum total from top to bottom of the triangle below:</p>
  <p style="text-align:center;font-family:'courier new';">75<br>
    95 64<br>
    17 47 82<br>
    18 35 87 10<br>
    20 04 82 47 65<br>
    19 01 23 75 03 34<br>
    88 02 77 73 07 63 67<br>
    99 65 04 28 06 16 70 92<br>
    41 41 26 56 83 40 80 70 33<br>
    41 48 72 33 47 32 37 16 94 29<br>
    53 71 44 65 25 43 91 52 97 51 14<br>
    70 11 33 28 77 73 17 78 39 68 17 57<br>
    91 71 52 38 17 14 91 43 58 50 27 29 48<br>
    63 66 04 68 89 53 67 30 73 16 69 87 40 31<br>
    04 62 98 27 23 09 70 98 73 93 38 53 60 04 23</p>
</div></p>
<p><strong>NOTE</strong>: As there are only 16384 routes, it is possible to solve this
problem by trying every route. However, Problem 67 is the same
challenge with a triangle containing one-hundred rows; it cannot be
solved by brute force, and requires a clever method! ;o)</p>
</blockquote>
<ul>
<li><strong>problem space</strong>: given matrix</li>
<li><strong>test criteria</strong>: max of sum of picked route</li>
</ul>
<p>But, as indicated by the problem, do not use <code>route</code> as computation
base. We are moving from top of the pyramid to bottom. So option is
the 1st row is <strong>deterministic</strong>! It has to be 75.</p>
<p>What about 2nd row? If we are to <strong>maximize</strong> sum, we of course want
to pick the max of the two &rarr; 95? But wait a minute! The 3rd row
also plays a role in this decision. There are 4 possible sums:</p>
<ol>
<li>95+17</li>
<li>95+47</li>
<li>64+47</li>
<li>64+82</li>
</ol>
<p>So we are to use this to determine which one to take. In other words,
the next decision always present 4 possible combinations. We are to
pick the one that yields the max. So this means we want to ''peek
ahead'' 1 row beyond the next one. Once we hit the bottom of the
pyramid, decision reduces to 2 options. Well, then pick the largest
sum &larr; this is also the break condition, isn't it!?</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The catch of this problem is you can only select the adjacent</span>
<span class="sd">    number of the next row.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">75</span>
<span class="s1">95 64</span>
<span class="s1">17 47 82</span>
<span class="s1">18 35 87 10</span>
<span class="s1">20 04 82 47 65</span>
<span class="s1">19 01 23 75 03 34</span>
<span class="s1">88 02 77 73 07 63 67</span>
<span class="s1">99 65 04 28 06 16 70 92</span>
<span class="s1">41 41 26 56 83 40 80 70 33</span>
<span class="s1">41 48 72 33 47 32 37 16 94 29</span>
<span class="s1">53 71 44 65 25 43 91 52 97 51 14</span>
<span class="s1">70 11 33 28 77 73 17 78 39 68 17 57</span>
<span class="s1">91 71 52 38 17 14 91 43 58 50 27 29 48</span>
<span class="s1">63 66 04 68 89 53 67 30 73 16 69 87 40 31</span>
<span class="s1">04 62 98 27 23 09 70 98 73 93 38 53 60 04 23</span>
<span class="s1">    &#39;&#39;&#39;</span>

    <span class="c1"># build matrix</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>

    <span class="n">col_idx</span> <span class="o">=</span> <span class="n">row_idx</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">pick</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">while</span> <span class="n">row_idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">pick</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">row_idx</span><span class="p">][</span><span class="n">col_idx</span><span class="p">])</span>

        <span class="n">max_combo</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">next_col_idx</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># next row, 2 options</span>
        <span class="k">if</span> <span class="n">row_idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">row_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">col_idx</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span>

                <span class="c1"># next row + 1, another 2 options</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">row_idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">row_idx</span> <span class="o">+</span> <span class="mi">2</span><span class="p">][</span><span class="n">col_idx</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>

                    <span class="c1"># whoever yields the max sum wins</span>
                    <span class="k">if</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="o">&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="n">max_combo</span><span class="p">):</span>
                        <span class="n">max_combo</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                        <span class="n">next_col_idx</span> <span class="o">=</span> <span class="n">col_idx</span> <span class="o">+</span> <span class="n">i</span>

        <span class="c1"># keep track of which col we are current on</span>
        <span class="n">col_idx</span> <span class="o">=</span> <span class="n">next_col_idx</span>

        <span class="c1"># move on to the next row</span>
        <span class="n">row_idx</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="n">pick</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pick</span><span class="p">])</span>
</code></pre></div>

<hr>
<h1>problem 19</h1>
<p><a href="https://projecteuler.net/problem=19">Question</a>:</p>
<blockquote>
<p><p> You are given the following information, but you may prefer to
    do some research for yourself.  </p> <ul> <li>1 Jan 1900 was a
    Monday.</li> <li>Thirty days has September,<br> April, June and
    November.<br> All the rest have thirty-one,<br> Saving February
    alone,<br> Which has twenty-eight, rain or shine.<br> And on
    leap years, twenty-nine.  </li> <li> A leap year occurs on any
    year evenly divisible by 4, but not on a century unless it is
    divisible by 400.  </li> </ul> <p> How many Sundays fell on the
    first of the month during the twentieth century (1 Jan 1901 to
    31 Dec 2000)?  </p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>1/1/1901 - 12/31/2000</code></li>
<li><strong>test criteria</strong>:<ol>
<li>is 1st day of a month?</li>
<li>is Sunday?</li>
</ol>
</li>
</ul>
<p>Such a small problem space that it is not necessary to overthink this
problem. Iterate and check:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">date</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">1901</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">start</span><span class="o">.</span><span class="n">year</span> <span class="o">&lt;</span> <span class="mi">2001</span><span class="p">:</span>
        <span class="c1"># check requirements</span>
        <span class="c1"># 1. 1st day of a month</span>
        <span class="c1"># 2. is a Sunday</span>
        <span class="k">if</span> <span class="n">start</span><span class="o">.</span><span class="n">day</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">start</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span> <span class="n">start</span>

        <span class="n">start</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="nb">print</span> <span class="n">count</span>
</code></pre></div>

<hr>
<h1>problem 20</h1>
<p><a href="https://projecteuler.net/problem=20">Question</a>:</p>
<blockquote>
<p><p> <i>n</i>! means <i>n</i> × (<i>n</i> − 1) × ... × 3 × 2 × 1
    </p> <p> For example, 10! = 10 × 9 × ... × 3 × 2 × 1 =
    3628800,<br>and the sum of the digits in the number 10! is 3 +
    6 + 2 + 8 + 8 + 0 + 0 = 27.  </p> <p>Find the sum of the digits
    in the number 100!</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <code>n!, n = 100</code></li>
<li><strong>test criteria</strong>: none</li>
</ul>
<p>The challenge is supposed to computing <code>n!</code>. But in modern computer
this is nothing. I know this is the cheap way to solve it, but works.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">p</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">*</span> <span class="n">n</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="nb">sum</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)])</span>
</code></pre></div>

<hr>
<h1>problem 21</h1>
<p><a href="https://projecteuler.net/problem=21">Question</a>:</p>
<blockquote>
<p><p>Let d(<i>n</i>) be defined as the sum of proper divisors of
<i>n</i> (numbers less than <i>n</i> which divide evenly into
<i>n</i>).<br> If d(<i>a</i>) = <i>b</i> and d(<i>b</i>) = <i>a</i>,
where <i>a</i> ≠ <i>b</i>, then <i>a</i> and <i>b</i> are an
amicable pair and each of <i>a</i> and <i>b</i> are called amicable
numbers.</p> <p>For example, the proper divisors of 220 are 1, 2, 4,
5, 10, 11, 20, 22, 44, 55 and 110; therefore d(220) = 284. The
proper divisors of 284 are 1, 2, 4, 71 and 142; so d(284) = 220.</p>
<p>Evaluate the sum of all the amicable numbers under 10000.</p></p>
</blockquote>
<ul>
<li>problem space: <code>int &lt; 10,000</code></li>
<li>test criteria: is amicable number?</li>
</ul>
<p>Finding divisors, see <a href="#problem12">problem 12</a>
Note when testing amicable number, <strong>a!=b</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span>
    <span class="n">amicable_numbers</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># enumerate all numbers under given &quot;n&quot;</span>
    <span class="c1"># and test for amicable numbers per requirement</span>
    <span class="c1"># listed in the problem</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">amicable_numbers</span><span class="p">:</span>
            <span class="n">test</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">divisor</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="n">test</span><span class="p">:</span>
                <span class="c1"># a=b</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">(</span><span class="n">divisor</span><span class="p">(</span><span class="n">test</span><span class="p">)):</span>
                <span class="n">amicable_numbers</span> <span class="o">+=</span> <span class="p">[</span><span class="n">n</span><span class="p">,</span> <span class="n">test</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">amicable_numbers</span><span class="p">))</span>
</code></pre></div>

<hr>
<h1>problem 22</h1>
<p><a href="https://projecteuler.net/problem=22">Question</a>:</p>
<blockquote>
<p>Using
<a href="https://projecteuler.net/project/resources/p022_names.txt">names.txt</a>
(right click and 'Save Link/Target As...'), a 46K text file
containing over five-thousand first names, begin by sorting it into
alphabetical order. Then working out the alphabetical value for each
name, multiply this value by its alphabetical position in the list
to obtain a name score.</p>
<p>For example, when the list is sorted into alphabetical order, COLIN,
which is worth 3 + 15 + 12 + 9 + 14 = 53, is the 938th name in the
list.  So, COLIN would obtain a score of 938 × 53 = 49714.</p>
<p>What is the total of all the name scores in the file?</p>
</blockquote>
<ul>
<li>problem space: given .txt file</li>
<li>test criteria: compute name score</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">csv</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">string</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;p022_names.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">names</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">names</span><span class="p">):</span>
        <span class="c1"># The key is to find the character value based on</span>
        <span class="c1"># list &quot;A-Z&quot; instead of its &quot;ord(x)&quot; ordinal value!</span>
        <span class="c1"># You can use the test case &quot;COLIN&quot; to verify.</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="p">(</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> \
            <span class="nb">sum</span><span class="p">([</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">name</span><span class="p">])</span>

    <span class="nb">print</span> <span class="n">score</span>
</code></pre></div>

<p>Note the trick:</p>
<div class="highlight"><pre><span></span><code><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
</code></pre></div>

<p>will find the ordinal value of character <strong>A</strong>.</p>
<hr>
<h1>problem 23</h1>
<p><a href="https://projecteuler.net/problem=23">Question</a>:</p>
<blockquote>
<p><div class="problem_content" role="problem"> A perfect number is a
number for which the sum of its proper divisors is exactly equal to
the number. For example, the sum of the proper divisors of 28 would
be 1 + 2 + 4 + 7 + 14 = 28, which means that 28 is a perfect number.</p>
<p>A number <var>n</var> is called deficient if the sum of its proper
divisors is less than <var>n</var> and it is called abundant if this
sum exceeds <var>n</var>.</p>
<p>As 12 is the smallest abundant number, 1 + 2 + 3 + 4 + 6 = 16, the
smallest number that can be written as the sum of two abundant
numbers is 24. By mathematical analysis, it can be shown that all
integers greater than 28123 can be written as the sum of two
abundant numbers.  However, this upper limit cannot be reduced any
further by analysis even though it is known that the greatest number
that cannot be expressed as the sum of two abundant numbers is less
than this limit.</p>
<p>Find the sum of all the positive integers which cannot be written as
the sum of two abundant numbers.</p>
</div>
</blockquote>
<ul>
<li>problem space: <code>int &lt; 28123</code></li>
<li>test criteria: if <code>a+b=c</code>, that a or b is <strong>NOT</strong> an <em>abundant
    number</em>?</li>
</ul>
<p>My approach is simple --- it's easy to compute sum of <code>[1,n]
(=(n+1)n/2)</code>. Why don't we remove those numbers that are <strong>NOT</strong>
meeting the test criteria!</p>
<ol>
<li>find all redundants in problem space</li>
<li>get all possible sum(a,b) where a,b are both redundants (thus the
    reverse logic), including when a=b and a!=b</li>
<li>remove these numbers from range(1,n), what's left are the ones we
    need</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">28213</span>

    <span class="c1"># get all redundants</span>
    <span class="n">redundants</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">divisor</span><span class="p">(</span><span class="n">m</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">redundants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="c1"># remove all possible combos when a,b are both redundants</span>
    <span class="c1"># and  a != b</span>
    <span class="n">possible_sums</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span>
        <span class="nb">sum</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">redundants</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="nb">sum</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">])</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">possible_sums</span><span class="p">)</span>

    <span class="c1"># remove all combos when a,b are both redundants</span>
    <span class="c1"># and a == b</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">results</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">redundants</span> <span class="k">if</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">])</span>

    <span class="c1"># what&#39;s left are numbers meeting the test criteria</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>

<hr>
<h1>problem 24</h1>
<p><a href="https://projecteuler.net/problem=24">Question</a>:</p>
<blockquote>
<p>A permutation is an ordered arrangement of objects. For example,
3124 is one possible permutation of the digits 1, 2, 3 and 4. If all
of the permutations are listed numerically or alphabetically, we
call it lexicographic order. The lexicographic permutations of 0, 1
and 2 are:</p>
<p>012   021   102   120   201   210</p>
<p>What is the millionth lexicographic permutation of the digits 0, 1, 2,
3, 4, 5, 6, 7, 8 and 9?</p>
</blockquote>
<p>With help of advanced features such as the <a href="https://docs.python.org/2/library/itertools.html">Python
itertools</a>, there
isnot much to brag about. Simply create the permutation list, sort and
pop by the requesting index.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">1000000</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">permu</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">permutations</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span>
    <span class="n">permu</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="nb">print</span> <span class="n">permu</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<hr>
<h1>problem 25</h1>
<p><a href="https://projecteuler.net/problem=25">Question</a>:</p>
<blockquote>
<p><p>The Fibonacci sequence is defined by the recurrence relation:</p>
<blockquote>F<sub><i>n</i></sub> = F<sub><i>n</i>−1</sub> +
F<sub><i>n</i>−2</sub>, where F<sub>1</sub> = 1 and F<sub>2</sub> =
1.</blockquote> <p>Hence the first 12 terms will be:</p>
<blockquote>F<sub>1</sub> = 1<br> F<sub>2</sub> = 1<br>
F<sub>3</sub> = 2<br> F<sub>4</sub> = 3<br> F<sub>5</sub> = 5<br>
F<sub>6</sub> = 8<br> F<sub>7</sub> = 13<br> F<sub>8</sub> = 21<br>
F<sub>9</sub> = 34<br> F<sub>10</sub> = 55<br> F<sub>11</sub> =
89<br> F<sub>12</sub> = 144</blockquote> <p>The 12th term,
F<sub>12</sub>, is the first term to contain three digits.</p>
<p>What is the index of the first term in the Fibonacci sequence to
contain 1000 digits?</p></p>
</blockquote>
<ul>
<li>problem space: int with &lt; 1,000 digits</li>
<li>test criteria: is a fibonacci number?</li>
</ul>
<p>Keep generating Fibonacci number until test criteria is met:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="n">index</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span>
        <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="n">index</span>
</code></pre></div>

<hr>
<h1>problem 26</h1>
<p><a href="https://projecteuler.net/problem=26">Question</a>:</p>
<blockquote>
<p><p>A unit fraction contains 1 in the numerator. The decimal
representation of the unit fractions with denominators 2 to 10 are
given:</p> <blockquote> <table class="table
striped"><tbody><tr><td><sup>1</sup>/<sub>2</sub></td><td>=&nbsp;</td><td>0.5</td>
</tr><tr><td><sup>1</sup>/<sub>3</sub></td><td>=&nbsp;</td><td>0.(3)</td>
</tr><tr><td><sup>1</sup>/<sub>4</sub></td><td>=&nbsp;</td><td>0.25</td>
</tr><tr><td><sup>1</sup>/<sub>5</sub></td><td>=&nbsp;</td><td>0.2</td>
</tr><tr><td><sup>1</sup>/<sub>6</sub></td><td>=&nbsp;</td><td>0.1(6)</td>
</tr><tr><td><sup>1</sup>/<sub>7</sub></td><td>=&nbsp;</td><td>0.(142857)</td>
</tr><tr><td><sup>1</sup>/<sub>8</sub></td><td>=&nbsp;</td><td>0.125</td>
</tr><tr><td><sup>1</sup>/<sub>9</sub></td><td>=&nbsp;</td><td>0.(1)</td>
</tr><tr><td><sup>1</sup>/<sub>10</sub></td><td>=&nbsp;</td><td>0.1</td>
</tr></tbody></table></blockquote> <p>Where 0.1(6) means
0.166666..., and has a 1-digit recurring cycle. It can be seen that
<sup>1</sup>/<sub>7</sub> has a 6-digit recurring cycle.</p> <p>Find
the value of <i>d</i> &lt; 1000 for which
<sup>1</sup>/<sub><i>d</i></sub> contains the longest recurring
cycle in its decimal fraction part.</p></p>
</blockquote>
<ul>
<li>problem space: <code>int &lt; 1,000</code></li>
<li>test criteria: max of recurring pattern</li>
</ul>
<p>The challenge lies in two places:</p>
<ol>
<li>how to generate and track decimal places</li>
<li>how to identify recurring patttern</li>
</ol>
<h2>division 101</h2>
<p>We don't know how long the recurring pattern may represent, therefore
we cannot assume any number of digits will be sufficient. As a matter of
fact, on my laptop Python's precision is at 17th decimal point. This
eliminates the possibility of using Python's built-in divisor to
generate result. One important discussion is <a href="https://docs.python.org/2/tutorial/floatingpoint.html">Python's floating
point</a> document.</p>
<p>To resolve this, we are back to basics of how division is done &larr; we keep
multiplying 10 to the number until it is greater than the divisor &rarr; the
<code>int(a/b)</code> is the result, <code>(a%b)</code>, or the <strong>remainder</strong>, is behind the
decimal point, and we repeat!</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">decimal_fraction</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate division digits up to specified count.</span>

<span class="sd">    Back to the very basic of how division is done.</span>
<span class="sd">    We keep track of the remainder and multiple as many 10s as</span>
<span class="sd">    needed so it can be divided by the given divisor again,</span>
<span class="sd">    and on and on and on.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    m -- numerator</span>
<span class="sd">    n -- denominator</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">m</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">max_digits</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">*=</span> <span class="mi">10</span>
        <span class="k">yield</span> <span class="n">m</span> <span class="o">/</span> <span class="n">n</span>

        <span class="c1"># remainder</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="n">m</span> <span class="o">/</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>

<h2>identify recurring pattern</h2>
<p>Google <em>identify recurring substring</em> gives a clue. Good to know.</p>
<div class="highlight"><pre><span></span><code>    <span class="c1"># regex pattern to identify recurring substring</span>
    <span class="n">recurring_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^(\d+?)((\d+?)\3+)$&#39;</span><span class="p">)</span>

    <span class="o">....</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">recurring_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tmp</span><span class="p">:</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div>

<p>This re pattern isn't ideal, however. For <code>1/7 = 0.(142857)</code>, pattern
gives <em>428571</em> instead. For the purpose of this problem, the number of
digits is still 6 so it didnot matter. But it is not prefect.</p>
<p>To put it all together:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="c1"># regex pattern to identify recurring substring</span>
    <span class="n">recurring_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^(\d+?)((\d+?)\3+)$&#39;</span><span class="p">)</span>

    <span class="n">max_found</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="c1"># this magic number is troublesome</span>
        <span class="c1"># better, we should replace this with a while loop.</span>
        <span class="n">max_digits_to_search</span> <span class="o">=</span> <span class="mi">10000</span>
        <span class="n">digits</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">decimal_fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">max_digits_to_search</span><span class="p">))</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">recurring_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tmp</span><span class="p">:</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">max_found</span><span class="p">:</span>
                <span class="n">max_found</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
                <span class="c1"># print digits</span>
                <span class="nb">print</span> <span class="n">x</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>  <span class="c1"># , tmp</span>
</code></pre></div>

<p>Another thing I didn't like was the <em>max_digits_to_search</em>. Since we
have not idea how long the recurring pattern may be, it is arbitrary to
set a bound &larr; what if the recurring pattern is 1 million digits long!?
Ideally this should be a self-adaptable loop to adjust this value based
on the finding recurring length. Here we are cheating by giving it 10
times of <em>n</em>.</p>
<h2>see also</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Floating_point">floating point wiki</a></li>
<li>showing the right way to
    <a href="http://www.floating-point-gui.de/errors/comparison/">compare</a> two
    floating numbers</li>
<li>Python's floating point <a href="https://docs.python.org/2/tutorial/floatingpoint.html">issues and
    notes</a></li>
</ul>
<hr>
<h1>problem 27</h1>
<p><a href="https://projecteuler.net/problem=27">Question</a>:</p>
<p><img alt="" src="https://fengxia41103.github.io/myblog/downloads/euler/Euler_p27.jpg" title="Euler_p27.jpg"></p>
<ul>
<li>problem space: <code>|a| &lt; 1000 and |b| &lt; 1000</code></li>
<li>test criteria: n<em>n+a</em>n+b, n=0,1.... is prime?</li>
</ul>
<p>Clue to this problem:</p>
<ol>
<li>for <strong>n=0</strong> → <font color="blue">b must be a prime</font></li>
<li>for <strong>n=1</strong>, <code>a+b+1</code> must be an odd number &rarr; <code>|a|</code> must be an
    odd number and <code>|b| &gt; |a|</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">all_primes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">get_primes</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>

    <span class="n">max_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># iterate all b</span>
    <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">all_primes</span><span class="p">:</span>
        <span class="c1"># abs(a)&lt;b, and a must be an odd number</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">b</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">b</span>
                <span class="k">if</span> <span class="n">tmp</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">tmp</span> <span class="ow">in</span> <span class="n">all_primes</span> <span class="ow">or</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">tmp</span><span class="p">)):</span>
                    <span class="c1"># count for generated primes</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">break</span>

            <span class="c1"># keep score</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max_count</span><span class="p">:</span>
                <span class="n">max_count</span> <span class="o">=</span> <span class="n">count</span>
                <span class="nb">print</span> <span class="n">max_count</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
</code></pre></div>

<p>See <a href="#problem10">problem 10</a> for <code>get_primes</code> and <code>is_prime</code> methods.</p>
<hr>
<h1 id="problem28">problem 28</h1>
<p><a href="https://projecteuler.net/problem=28">Question</a>:</p>
<blockquote>
<p>Starting with the number 1 and moving to the right in a clockwise
direction a 5 by 5 spiral is formed as follows:</p>
<p><span style="color:#ff0000;font-family:'courier
new';"><b>21</b></span> 22 23 24 <span
style="color:#ff0000;font-family:'courier new';"><b>25</b></span>\
20  <span style="color:#ff0000;font-family:'courier
new';"><b>7</b></span>  8  <span
style="color:#ff0000;font-family:'courier new';"><b>9</b></span> 10\
19  6  <span style="color:#ff0000;font-family:'courier
new';"><b>1</b></span>  2 11\ 18  <span
style="color:#ff0000;font-family:'courier new';"><b>5</b></span>  4
 <span style="color:#ff0000;font-family:'courier
new';"><b>3</b></span> 12\ <span
style="color:#ff0000;font-family:'courier new';"><b>17</b></span> 16
15 14 <span style="color:#ff0000;font-family:'courier
new';"><b>13</b></span></p>
<p>It can be verified that the sum of the numbers on the diagonals is
101.</p>
<p>What is the sum of the numbers on the diagonals in a 1001 by 1001
spiral formed in the same way?</p>
</blockquote>
<ul>
<li>problem space: <code>int &lt; 1001x1001</code></li>
<li>test criteria: how to construct such a spiral?</li>
</ul>
<p>Wow, cannot believe this. You don't need to construct this spiral at
all. Instead, observing that diagonal numbers are the 4 at the corner
of each spiral, and in examples above, the smallest matrix:</p>
<div class="highlight"><pre><span></span><code>    7 8 9
    6 1 2
    5 4 3
</code></pre></div>

<p>the 4 corners are 3,5,7,9 &rarr; spaced out <strong>2</strong>. Next circle out: (9),
13, 17, 15, 21, 25 → spaced out by <strong>4</strong>! So let's guess, the next
circle out, could it be spaced out by 6? exactly! (25), 31, 37, 43,
49.</p>
<p>Further, the matrix can only grow in <strong>odd</strong> size:</p>
<ol>
<li>1st circle, when size is 3x3, space out by 2</li>
<li>2nd circle, when size is 5x5, space out by 4</li>
<li>3rd circle, when size is 7x7, space out by 6</li>
</ol>
<p>Pattern is clear: <font color="blue">for <code>nth</code> circle, matrix size is
<code>2*n+1</code>, and step (space) is <code>2*n</code></font>. So for given size 1001, we are
looking at <code>(1001-1)/2=500</code>th circle to achieve this matrix, and the
step for the outer most four corners will be <code>2*500=1000</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1001</span>

    <span class="n">total</span> <span class="o">=</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># m is the circle counter</span>
    <span class="n">num</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># need (n+1)/2 circles to achieve n by n matrix</span>
        <span class="c1"># compute 4 corner values</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">+=</span> <span class="n">m</span> <span class="o">*</span> <span class="mi">2</span>  <span class="c1"># 2*m is the step</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">num</span>

        <span class="c1"># next spiral, please</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">total</span>
</code></pre></div>

<hr>
<h1>problem 29</h1>
<p><a href="https://projecteuler.net/problem=29">Question</a>:</p>
<blockquote>
<p><p>Consider all integer combinations of <i>a</i><sup><i>b</i></sup> for 2 ≤ <i>a</i> ≤ 5 and 2 ≤ <i>b</i> ≤ 5:</p>
<blockquote>2<sup>2</sup>=4, 2<sup>3</sup>=8, 2<sup>4</sup>=16, 2<sup>5</sup>=32<br>
3<sup>2</sup>=9, 3<sup>3</sup>=27, 3<sup>4</sup>=81, 3<sup>5</sup>=243<br>
4<sup>2</sup>=16, 4<sup>3</sup>=64, 4<sup>4</sup>=256, 4<sup>5</sup>=1024<br>
5<sup>2</sup>=25, 5<sup>3</sup>=125, 5<sup>4</sup>=625, 5<sup>5</sup>=3125<br></blockquote>
<p>If they are then placed in numerical order, with any repeats removed, we get the following sequence of 15 distinct terms:</p>
<p style="text-align:center;">4, 8, 9, 16, 25, 27, 32, 64, 81, 125, 243, 256, 625, 1024, 3125</p>
<p>How many distinct terms are in the sequence generated by <i>a</i><sup><i>b</i></sup> for 2 ≤ <i>a</i> ≤ 100 and 2 ≤ <i>b</i> ≤ 100?</p></p>
</blockquote>
<ul>
<li>problem space: <code>int &lt; 100**100</code></li>
<li>test criteria: which (a,b) combo will generate duplicate?</li>
</ul>
<p>As I have indicated in test criteria, the key is to understand why
(a,b) combo can generate duplicates, eg. <code>2^4 = 4^2</code> because of
<code>4=2^2</code>. So if we form all possible (a,b) combos, testing <code>a1^x = a2
vs. y=b2/b1</code>, if x=y, then <code>a1^b1 = a2^b2</code>.</p>
<p>Now take this analysis one step further. Any <em>a</em> is in form of
<code>x*y*z</code>... where x,y,z are primes. So if we transform <code>a^b</code> into its
prime factor fashion, we get <code>(2x, 1y, 3z....)</code> and so on. So instead
of computing the actual number a^b, we can also compare this <strong>prime
form</strong> for duplicates. The benefit of doing this is obvious &larr; <strong>a
is [2,100] inclusive, a merely one hundred numbers to search for its
prime factors, a much smaller problem space</strong>.</p>
<p>Wait!!! I'm overthinking again. This problem is solved by a one-liner
(brute force):</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">a</span> <span class="o">**</span> <span class="n">b</span> <span class="k">for</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
</code></pre></div>

<hr>
<h1 id="problem30">problem 30</h1>
<p><a href="https://projecteuler.net/problem=30">Question</a>:</p>
<blockquote>
<div class="problem_content" role="problem">
<p><p>Surprisingly there are only three numbers that can be written as the sum of fourth powers of their digits:</p>
<blockquote>1634 = 1<sup>4</sup> + 6<sup>4</sup> + 3<sup>4</sup> + 4<sup>4</sup><br>
8208 = 8<sup>4</sup> + 2<sup>4</sup> + 0<sup>4</sup> + 8<sup>4</sup><br>
9474 = 9<sup>4</sup> + 4<sup>4</sup> + 7<sup>4</sup> + 4<sup>4</sup></blockquote>
<p class="info">As 1 = 1<sup>4</sup> is not a sum it is not included.</p>
<p>The sum of these numbers is 1634 + 8208 + 9474 = 19316.</p>
<p>Find the sum of all the numbers that can be written as the sum of fifth powers of their digits.</p></p>
<p></div>
</p>
</blockquote>
<ul>
<li>problem space: infinite &rarr; how are we to bound search range?</li>
<li>test criteria: defined clearly in the problem, sum(fifth power of
  digit) = the number itself.</li>
</ul>
<p>The concern raised in determining the problem space sheds a clue on
the max of this number. Max of a single digit is <code>9</code>, so the max it
can contribute to a sum is <code>9^5 = 59409</code> &rarr; once we move into
6-digit space, <code>number of digits * 9^5</code> will not be able to keep up
with the growing number of digits anymore. So <strong>problem space is
max-ed at 199999</strong>!</p>
<p><img alt="Max by digits vs. Max from sum() of 5th power of each
digits" class="col s12" src="https://fengxia41103.github.io/myblog/downloads/euler/Euler_p30.png" title="Max by digits vs. Max from sum() of 5th power of each digits"></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">199999</span><span class="p">):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">**</span> <span class="mi">5</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">tmp</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="nb">print</span> <span class="n">result</span>
</code></pre></div>

<hr>
<h1>problem 31</h1>
<p><a href="https://projecteuler.net/problem=31">Question</a>:</p>
<blockquote>
<p><div class="problem_content" role="problem">
In England the currency is made up of pound, £, and pence, p, and there
are eight coins in general circulation:</p>
<blockquote>
<p>1p, 2p, 5p, 10p, 20p, 50p, £1 (100p) and £2 (200p).</p>
</blockquote>
<p>It is possible to make £2 in the following way:</p>
<blockquote>
<p>1×£1 + 1×50p + 2×20p + 1×5p + 1×2p + 3×1p</p>
</blockquote>
<p>How many different ways can £2 be made using any number of coins?</p>
</div>
</blockquote>
<p><img alt="PE overview" src="https://fengxia41103.github.io/myblog/downloads/euler/031_overview.pdf" title="PE overview"></p>
<ul>
<li>problem space: max number of <code>1p(=200) * max of
    2p(=100)</code>.... &mdash; it's a large number, but does represent the
    max possible space.</li>
<li>test criteria: add up to 2 pounds</li>
</ul>
<p>Formulate this, we are to solve coefficients <code>(a,b,c\...g)</code> of this
equation:</p>
<div class="highlight"><pre><span></span><code><span class="mf">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">20</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">50</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">200</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">200</span>
</code></pre></div>

<p>where:</p>
<ul>
<li>a in [0,200]</li>
<li>b in [0,100]</li>
<li>c in [0,40]</li>
<li>d in [0,20]</li>
<li>e in [0,10]</li>
<li>f in [0,4]</li>
<li>g in [0,2]</li>
<li>h in [0,1]</li>
</ul>
<p>Possible combinations = <code>201x101x41x21x11x5x3x2</code> &mdash; moral of the
story, don't iterate through this entire space! Notice that once h=1,
it eliminates <code>201x101x41x21x11x5x3</code> combos! So if drawing a matrix,
half of this matrix should be empty. Now with each step we go down
this path, the number of possible combo should decrease quite
fast. But how to determine this and model this in code?</p>
<p>Well, admittedly, I tried brute force (after running out of ideas) in
hope to get answer first so I could read thread discussions for clues.
But even that didn't work out after hours of waiting &larr; this gives
73681(!?) why?</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">operator</span><span class="w"> </span><span class="kn">import</span> <span class="n">add</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">coefficients</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">200</span> <span class="o">/</span> <span class="n">x</span><span class="p">,</span> <span class="n">factors</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coefficients</span><span class="p">]):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">factors</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">tmp</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span> <span class="n">count</span><span class="p">,</span> <span class="n">a</span>
    <span class="nb">print</span> <span class="n">count</span>
</code></pre></div>

<p><img alt="Dynamic programming on coin change
problem" src="https://fengxia41103.github.io/myblog/downloads/euler/Dyn_prog.pdf" title="Dynamic programming on coin change problem"></p>
<p>This led me to Google for solution (not being cheap, but eager to be
enlightened), I came across a <a href="https://www.thanassis.space/euler31.html">great
post</a> on this problem (the
detail explanation below is <strong>copied</strong> from this post). First of all,
this is a typical problem of so called <a href="https://en.wikipedia.org/wiki/Dynamic_programming">dynamic
programming</a>
(notice the technique of
<a href="http://www.algorithmist.com/index.php/Memoization">memoization</a>. I'm
impressed that there is even a name for this particular problem
&mdash; <a href="http://www.algorithmist.com/index.php/Coin_Change">coin change
problem</a>!
wow. There is a similar problem called <a href="https://en.wikipedia.org/wiki/Coin_problem">coin
problem</a>.</p>
<blockquote>
<p>Coin Change is the problem of finding the number of ways of making
changes for a particular amount of cents, n, using a given set of
denominations d<sub>1</sub>... d<sub>m</sub>~.</p>
</blockquote>
<h2>1p</h2>
<table>
<thead>
<tr>
<th>Target in cents</th>
<th>Using only 1p</th>
<th>Using &lt;= 2p</th>
<th>Using &lt;= 5p</th>
<th>...</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td></td>
<td></td>
<td>...</td>
</tr>
</tbody>
</table>
<p>If I wanted to accumulate just 1 cent (column <code>Target in cents</code>), how
many ways are there to do it, using coins less than or equal to 1p? &rarr;
Only one way &mdash; so, fill up the cell of column <code>Using only 1p</code> with 1.</p>
<p>Moving on &mdash; what if I could use coins less than or equal to 2p?</p>
<table>
<thead>
<tr>
<th>Target in cents</th>
<th>Using only 1p</th>
<th>Using &lt;= 2p</th>
<th>Using &lt;= 5p</th>
<th>...</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td></td>
<td>...</td>
</tr>
</tbody>
</table>
<p>There is still only one way - using 1p. The 2p coins can't be used,
since our target (a total of 1 cent for this line of the table) is less
than 2p.</p>
<p>So all the first line fills up with 1s:</p>
<table>
<thead>
<tr>
<th>Target in cents</th>
<th>only 1p</th>
<th>&lt;= 2p</th>
<th>&lt;= 5p</th>
<th>&lt;= 10p</th>
<th>&lt;= 20p</th>
<th>&lt;= 50p</th>
<th>&lt;= 100p</th>
<th>&lt;= 200p</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Only one way to reach the target of 1 cent, no matter what coins I use.</p>
<h2>2p</h2>
<p>What if we move to a target of 2 cents?</p>
<table>
<thead>
<tr>
<th>Target in cents</th>
<th>only 1p</th>
<th>&lt;= 2p</th>
<th>&lt;= 5p</th>
<th>&lt;= 10p</th>
<th>&lt;= 20p</th>
<th>&lt;= 50p</th>
<th>&lt;= 100p</th>
<th>&lt;= 200p</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Well, using only 1p there is only one way: 1p+1p.</p>
<p>When using coins less than or equal to 2p, however, we can also do it
via a single 2p coin - so there are now 2 ways:</p>
<table>
<thead>
<tr>
<th>Target in cents</th>
<th>only 1p</th>
<th>&lt;= 2p</th>
<th>&lt;= 5p</th>
<th>&lt;= 10p</th>
<th>&lt;= 20p</th>
<th>&lt;= 50p</th>
<th>&lt;= 100p</th>
<th>&lt;= 200p</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Additional coins don't help any - the total number of ways remains 2
<code>(1p+1p,2p)</code> throughout the rest of the line.</p>
<h2>Breaking it down, target: 3,4,5,... cents</h2>
<p>Thinking the same way:</p>
<table>
<thead>
<tr>
<th>Target in cents</th>
<th>only 1p</th>
<th>&lt;= 2p</th>
<th>&lt;= 5p</th>
<th>&lt;= 10p</th>
<th>&lt;= 20p</th>
<th>&lt;= 50p</th>
<th>&lt;= 100p</th>
<th>&lt;= 200p</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>3</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>4</td>
</tr>
</tbody>
</table>
<ul>
<li>3 cents can be formed as <code>(1p+1p+1p,1p+2p)</code>, so starting from column
    <code>&lt;=2p</code>, the number is 2</li>
<li>4 cents can be formed as <code>(4x1p, 2x1p+1x2p, 2x2p)</code>, so starting from
    column <code>&lt;=2p</code>, the number is 3</li>
<li>5 cents can be formed as <code>(5x1p, 3x1p+1x2p, 1x1p+2x2p, 1x5p)</code>, so
    starting from column <code>&lt;=5p</code>, the number is 4</li>
<li>etc...</li>
</ul>
<p>So, now that we've done this process manually, what do wenotice?</p>
<ul>
<li>We notice that when forming the values in a line, the first column
  is always 1. There is only one way to form any target N, if you just
  use 1p coins: <em>Nx1p</em>.</li>
<li>We also notice that when filling up a cell, we check to see if the
  corresponding coin "fits" in. If it doesn't, we just copy the value
  of the cell on the left - i.e. the number of ways to form a target
  sum doesn't change, since we can't use this column's coin.</li>
<li>If the coin <strong>does</strong> fit, however, we then form a number by adding
  two things: (a) the number of ways we can form the target
  <strong>WITHOUT</strong> using the coin (which is on the cell on our left) plus
  (b) the number of ways we can form the <code>target-columnCoin</code>, i.e. the
  number of ways to form the remainder, if we subtract (i.e.  use) the
  coin from our target.</li>
</ul>
<p>For example, on line 5 (target: 5 cents) the highlighted cell of
column <code>&lt;=2p</code> is formed as <code>1+2</code>:</p>
<ul>
<li>There is 1 way to form a target of 5 cents using only 1p coins (the
  cell on the left has value 1)</li>
<li>If we use a coin of 2p, then the remainder is <code>target-2p=5p-2p=3p</code>,
  which we can lookup above, on line 3, and see that there are 2 ways
  to reach it, using <code>&lt;=2p</code>.</li>
</ul>
<p>This lookup is key &mdash; we basically reuse previous calculations
with a single lookup.</p>
<h2>code</h2>
<p>With all the details above, hopefully by now you can see what we are
doing &larr; we are to build a matrix with target from 1 up
to 200. Matrix's row is target value, column is coin face
value. Rules:</p>
<ul>
<li>if coin value &gt; target → copy value from left
    <code>matrix[row][col-1]</code></li>
<li>otherwise, value =
    <code>matrix[row][col-1]+matrix[row-coin][col]</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">coin</span><span class="p">,</span> <span class="n">matrix</span><span class="p">):</span>
    <span class="n">target</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># if coin &gt; target</span>
    <span class="k">elif</span> <span class="n">coin</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">:</span>
        <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

    <span class="c1"># if coin &lt;= target, lookup</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">[</span><span class="n">row</span> <span class="o">-</span> <span class="n">coin</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">+</span> <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">matrix</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># the 8 coins correspond to 8 columns</span>
    <span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>

    <span class="n">TARGET</span> <span class="o">=</span> <span class="mi">200</span>

    <span class="c1"># initialize matrix with 1s</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">coins</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">TARGET</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>

    <span class="c1"># iterate from 1 up to TARGET</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">TARGET</span><span class="p">):</span>
        <span class="c1"># iterate all coins</span>
        <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">coin</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coins</span><span class="p">):</span>
            <span class="n">matrix</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">coin</span><span class="p">,</span> <span class="n">matrix</span><span class="p">)</span>
        <span class="nb">print</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">matrix</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
</code></pre></div>

<hr>
<h1>problem 32</h1>
<p><a href="https://projecteuler.net/problem=32">Question</a>:</p>
<blockquote>
<p>We shall say that an <var>n</var>-digit number is pandigital if it makes
use of all the digits 1 to <var>n</var> exactly once; for example, the
5-digit number, 15234, is 1 through 5 pandigital.</p>
<p>The product 7254 is unusual, as the identity, 39 × 186 = 7254,
containing multiplicand, multiplier, and product is 1 through 9
pandigital.</p>
<p>Find the sum of all products whose multiplicand/multiplier/product
identity can be written as a 1 through 9 pandigital.</p>
<p><div class="note">
HINT: Some products can be obtained in more than one way so be sure to
only include it once in your sum.
</div></p>
</blockquote>
<p>Wiki definition of <a href="https://en.wikipedia.org/wiki/Pandigital_number">pandigital
number</a> is
<strong>different</strong> from the one given in the problem.</p>
<ul>
<li>in wiki: In mathematics, a pandigital number is an integer that in a
  given base has among its significant digits each digit used in the
  base <strong>at least once</strong>.</li>
<li>in problem: <strong>exactly once</strong></li>
</ul>
<p>Which one is correct? According to <a href="http://mathworld.wolfram.com/PandigitalNumber.html">Wolfram
Mathworld</a>, there
are 4 flavors, all are valid <em>pandigital numbers</em>:</p>
<p>| including zero?   | digits   | frequency       |
|-------------------+----------+-----------------|
| yes               | 0-9      | exactly once    |
| yes               | 0-9      | at least once   |
| no                | 1-9      | exactly once    |
| no                | 1-9      | at least once   |</p>
<p>Follow problem instructions,</p>
<ul>
<li>
<p>problem space: 1-9, exactly once, max will be 987654321 → without
  considering test criteria, max space is sqrt(987654321) → 31,427.</p>
</li>
<li>
<p>test criteria: <code>a*b=c</code> and digits in a,b,c together forms a
  pandigital number &rarr; considering all digits together is 9 digits in
  length &rarr; <code>max(c)</code> can only be a 4-digit number, and <code>max(a)</code> a
  4-digit number and <code>max(b)</code> a 2-digit number. So the max problem
  space is actually becoming <code>9999*99</code>.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">9</span>

    <span class="n">products</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d%d%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;0&#39;</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># too many digits</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># is 1-9 pendigital number?</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="p">):</span>  <span class="c1"># exactly once</span>
                <span class="n">products</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="nb">print</span> <span class="n">a</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">tmp</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">products</span><span class="p">))</span>
</code></pre></div>

<hr>
<h1>problem 33</h1>
<p><a href="https://projecteuler.net/problem=33">Question</a>:</p>
<blockquote>
<p><p>The fraction <sup>49</sup>/<sub>98</sub> is a curious fraction,
as an inexperienced mathematician in attempting to simplify it may
incorrectly believe that <sup>49</sup>/<sub>98</sub> =
<sup>4</sup>/<sub>8</sub>, which is correct, is obtained by
cancelling the 9s.</p> <p>We shall consider fractions like,
<sup>30</sup>/<sub>50</sub> = <sup>3</sup>/<sub>5</sub>, to be
trivial examples.</p> <p>There are exactly four non-trivial examples
of this type of fraction, less than one in value, and containing two
digits in the numerator and denominator.</p> <p>If the product of
these four fractions is given in its lowest common terms, find the
value of the denominator.</p>
</p>
</blockquote>
<ul>
<li>problem space: numerator and denominator are 2-digit number &rarr;
  both &lt; 99, pretty small space</li>
<li>test criteria:</li>
<li>in form <code>a*10+b/b*10+c</code> &larr; <code>c!=0</code>, and <code>fraction == a/c</code></li>
<li>fraction is &lt; 1</li>
</ul>
<p>Coding is straightforward. Using
<a href="https://docs.python.org/2/library/fractions.html">fractions</a> package,
it automatically reduce fraction to its lowest common term, eg.
Fraction(12,15) becomes Fraction(4,5).</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">fractions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Fraction</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
            <span class="c1"># test criteria: y not multiple of 10</span>
            <span class="k">if</span> <span class="n">y</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># test criteria: not in non-trivial pattern</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">!=</span> <span class="n">y</span> <span class="o">/</span> <span class="mi">10</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># test criteria: is the type of fraction</span>
            <span class="k">if</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="mi">10</span><span class="p">,</span> <span class="n">y</span> <span class="o">%</span> <span class="mi">10</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">*=</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">result</span>
</code></pre></div>

<hr>
<h1>problem 34</h1>
<p><a href="https://projecteuler.net/problem=34">Question</a>:</p>
<blockquote>
<p>145 is a curious number, as 1! + 4! + 5! = 1 + 24 + 120 = 145.</p>
<p>Find the sum of all numbers which are equal to the sum of the
factorial of their digits.</p>
<p>Note: as 1! = 1 and 2! = 2 are not sums they are not included.</p>
</blockquote>
<p>These type of numbers are called
<a href="http://mathworld.wolfram.com/Factorion.html">Factorion</a>, and their sum
are mathematically explained
<a href="http://mathworld.wolfram.com/FactorialSums.html">here</a>.</p>
<ul>
<li>problem space: similar to <a href="#problem30">problem 30</a>, adding
  <code>9!=362880</code> is a clue on the bound &larr; growing a decimal point
  will out pace adding a factorial at 7th digit. So problem space must
  be &lt; 1000,000.</li>
<li>test criteria: as indicated in problem, <code>sum(factorial(digit in
  num)) = num</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">factorial</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># bound</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">500000</span>

    <span class="c1"># factorials of 0-9. Note: f(0) = 1</span>
    <span class="n">factorials</span> <span class="o">=</span> <span class="p">[</span><span class="n">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>

    <span class="c1"># iterate all nubmers in bound</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">factorials</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">tmp</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">x</span>
            <span class="nb">print</span> <span class="n">tmp</span>
    <span class="nb">print</span> <span class="n">result</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>

<p>Note: <code>500000</code> is the upper bound I tweaked after knowing the correct
answer. Since UB(upper bound) is the key in this solution, I liked this
post found in discussion:</p>
<blockquote>
<p>Your upper bound should be based on the intersection of y=x and
y=9!*log(x). The first equation is the progression of the value of a
number, the second is the progression of the maximum value for a digit
(9!) times the number of digits.</p>
<p>In this case your intersection is just before 2,309,171.</p>
<p>After that point, the sum of the factorials of the digits of a number
(even if they were all 9s) will never exceed the value of the number
itself.</p>
</blockquote>
<hr>
<h1 id="problem35">problem 35</h1>
<p><a href="https://projecteuler.net/problem=35">Question</a>:</p>
<blockquote>
<p>The number, 197, is called a circular prime because all rotations of
the digits: 197, 971, and 719, are themselves prime.</p>
<p>There are thirteen such primes below 100: 2, 3, 5, 7, 11, 13, 17,
31, 37, 71, 73, 79, and 97.</p>
<p>How many circular primes are there below one million?</p>
</blockquote>
<ul>
<li>problem space: int &lt; <code>1000,000</code></li>
<li>test criteria: is prime? is circular variation a prime?</li>
</ul>
<p>All numbers in problem space are in form
<code>a*100000+b*10000+c*1000+d*100+e*10+f</code> where <code>0&lt;=a,b,c,d,e,f&lt;=9</code>.  How
many circular numbers it can generate? &rarr; 5. In general, for a
<code>n-digit</code> number, it can have <code>n-1</code> circular variations.</p>
<p>We can eliminate a couple obvious cases:</p>
<ul>
<li>if <code>f</code> coefficient is 5, a circular variable is divisible by 5
  &rarr; no 5 in (a,b,c,d,e,f)</li>
<li>if <code>f</code> is even, a circular variation is divisible by 2 &rarr; all
  coefficients are odd</li>
<li>if <code>f</code> is 0, a circular variation is divisible by 10 &rarr; all
  coefficients are &gt; 0</li>
</ul>
<p>This makes the option pretty limited, they can only be 1,3,7,9! &rarr;</p>
<ol>
<li>for 6-digit number: possible combinations <code>4**6=4096</code>.</li>
<li>for 5-digit number: <code>4**5=1024</code></li>
<li>and so forth</li>
</ol>
<p>Total possible numbers, therefore, are 5,460. Not bad.</p>
<p>With this established, the only one that stands a chance is itself
needs to be a prime first. That should eliminate combination that only
contains 3 and 9 because they would be divisible by 3 &rarr; among the
5,460 combos, if it is &gt;10, then it must have 1 or 7 in it.</p>
<p>Now to the circular variations. An obvious case is that if all
coefficients are equal and the number itself is prime, then we find
one already because it has no circular variation. For the others, its
circular must be within the 5,460 combos. So if we pick out all the
primes among them first, we can turn the test from whether its
circular variation is prime to whether a prime is a circular version
of another prime.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_prime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">permutations</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000000</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">digits</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">):</span>
        <span class="c1"># save all primes of n-digit</span>
        <span class="n">primes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">tens</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span> <span class="o">**</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">digits</span><span class="p">)]</span>
        <span class="n">coeff</span> <span class="o">=</span> <span class="n">permutations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">*</span> <span class="n">digits</span><span class="p">,</span> <span class="n">digits</span><span class="p">)</span>

        <span class="c1"># iterate coefficient combo</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
            <span class="c1"># test criteria: 1 or 7 in coeff</span>
            <span class="k">if</span> <span class="mi">1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="mi">7</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># target number</span>
            <span class="n">num</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">tens</span><span class="p">)])</span>

            <span class="c1"># test criteria: is prime?</span>
            <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
                <span class="n">primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="c1"># test criteria: is circular variation a prime?</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">:</span>
            <span class="c1"># circular</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="ow">in</span> <span class="n">primes</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">digits</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">tmp</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">digits</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> digits&#39;</span> <span class="o">%</span> <span class="n">digits</span><span class="p">,</span> <span class="n">c</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="c1"># plus 2,3,5,7 back</span>
    <span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">results</span><span class="p">))</span> <span class="o">+</span> <span class="mi">4</span>
</code></pre></div>

<hr>
<h1>problem 36</h1>
<p><a href="https://projecteuler.net/problem=36">Question</a>:</p>
<blockquote>
<p><p>The decimal number, 585 = 1001001001<sub>2</sub> (binary), is palindromic in both bases.</p>
<p>Find the sum of all numbers, less than one million, which are palindromic in base 10 and base 2.</p>
<p class="info">(Please note that the palindromic number, in either base, may not include leading zeros.)</p></p>
</blockquote>
<ul>
<li>problem space: int &lt; <code>1000,000</code></li>
<li>test criteria: is
  <a href="https://en.wikipedia.org/wiki/Palindromic_number">palindromic</a>?</li>
</ul>
<p><img alt="Overview posted in PE
threads" src="https://fengxia41103.github.io/myblog/downloads/euler/036_overview.pdf" title="Overview posted in PE threads"></p>
<p>A palindromic number is <strong>symmetrical</strong>. A more mathematical
description can be found
<a href="http://mathworld.wolfram.com/PalindromicNumber.html">here</a>.</p>
<p>Testing palindromic is to simply flip <em>str(a)</em> and compare two strings
being equal.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000000</span>

    <span class="c1"># palindromic test</span>
    <span class="n">test</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="n">x</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="c1"># iterate problem space</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="c1"># test criteria: ending 0</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c1"># test criteria: most significant == least significant</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">continue</span>

        <span class="c1"># test criteria: palindromic</span>
        <span class="c1"># Note: bin(a) generates &quot;0b101...&quot; -&gt; strip off &quot;0b&quot;</span>
        <span class="k">if</span> <span class="n">test</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="ow">and</span> <span class="n">test</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]):</span>
            <span class="nb">print</span> <span class="n">i</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="n">i</span>

    <span class="nb">print</span> <span class="n">result</span>
</code></pre></div>

<p>A nice trick indeed to flip a string:</p>
<div class="highlight"><pre><span></span><code><span class="n">this_string</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div>

<p>Nice!</p>
<p>How about a one-liner, a true beauty:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#Use only odd numbers as reverse in binary will have leading zero</span>
<span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">10</span> <span class="o">!=</span><span class="mi">0</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">bin</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="o">==</span><span class="nb">bin</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">2</span><span class="p">:][::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000000</span><span class="p">,</span><span class="mi">2</span><span class="p">)))</span>
</code></pre></div>

<hr>
<h1>problem 37</h1>
<p><a href="https://projecteuler.net/problem=37">Question</a>:</p>
<blockquote>
<p>The number 3797 has an interesting property. Being prime itself, it is
possible to continuously remove digits from left to right, and remain
prime at each stage: 3797, 797, 97, and 7. Similarly we can work from
right to left: 3797, 379, 37, and 3.</p>
<p>Find the sum of the only eleven primes that are both truncatable from
left to right and right to left.</p>
<p>NOTE: 2, 3, 5, and 7 are not considered to be truncatable primes.
</p>
</blockquote>
<ul>
<li><strong>problem space</strong>: unknown, this is problematic</li>
<li><strong>test criteria</strong>: is prime? is truncated version also prime?</li>
</ul>
<p>A bit similar to <a href="#problem35">problem 35</a>, if
truncated version is also a prime, digits must meet these 2 criteria:</p>
<ol>
<li>only 3, 7, or 9 ← any even number will result in a truncated
    version being even, and any 5 or 0 will make it non-prime. A
    special case is <code>1</code> &larr; 1 is not a prime, so won't work. <code>2</code>
    has a double identity &mdash; both an even number and a
    prime. Because we will be truncating in both direction, its being
    an even number won't work, thus eliminated also.</li>
<li>9 can not be on either end ← otherwise, it will can be truncated
    into a single <em>9</em> and is not a prime &rarr; so the number has to
    both start and end with 3 or 7.</li>
</ol>
<p>Further trial showed that the eligible number has to either start with
73 or 37, and ends with 37 or 73. Now instead of getting all the prime
first in arbitrary space and test for circular validity, how about
building the number from all primes less than 100? This turned out to
be much more efficient than previous approach.</p>
<p>Given a prime number, say 37, we can extend it to right by
<code>37*10+[3,7,9]</code>, and to left by <code>[3,7,9]*10+37</code>. We then test the
primality of new number, if it is a prime, extend further; otherwise,
we can stop here. When do we know we hit the hard wall? when extending
with [3,7,9] does not yield any prime anymore. So going from both
direction we are to guarantee all space by the test criteria.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extend_right</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">depth</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recursion by extending number from left to right.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        depth: recursive depth</span>

<span class="sd">    Return:</span>
<span class="sd">        found: extended number that is a prime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
    <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nb">print</span> <span class="s1">&#39;working on right&#39;</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">num</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">:</span>
        <span class="n">to_right</span> <span class="o">=</span> <span class="n">num</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">d</span>

        <span class="c1"># extending left to right</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">to_right</span><span class="p">):</span>
            <span class="n">found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">to_right</span><span class="p">)</span>
            <span class="n">found</span> <span class="o">+=</span> <span class="n">extend_right</span><span class="p">(</span><span class="n">to_right</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">found</span>


<span class="k">def</span><span class="w"> </span><span class="nf">extend_left</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">depth</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recursion by extending number from right to left.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">digits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
    <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="nb">print</span> <span class="s1">&#39;working on left&#39;</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">num</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">:</span>
        <span class="n">to_left</span> <span class="o">=</span> <span class="n">d</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)))</span> <span class="o">+</span> <span class="n">num</span>

        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">to_left</span><span class="p">):</span>
            <span class="n">found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">to_left</span><span class="p">)</span>
            <span class="n">found</span> <span class="o">+=</span> <span class="n">extend_left</span><span class="p">(</span><span class="n">to_left</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">found</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_3</span><span class="p">():</span>
    <span class="c1"># this is the entire problem space</span>
    <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">get_primes</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
        <span class="n">found</span> <span class="o">+=</span> <span class="n">extend_right</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">found</span> <span class="o">+=</span> <span class="n">extend_left</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># test circular variables</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">test_1</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">is_prime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">:]))))</span>
    <span class="n">test_2</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">is_prime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="n">i</span><span class="p">]))))</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span><span class="n">found</span><span class="p">)):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="ow">and</span> <span class="n">test_1</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="ow">and</span> <span class="n">test_2</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="nb">print</span> <span class="s1">&#39;found one&#39;</span><span class="p">,</span> <span class="n">f</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
    <span class="nb">print</span> <span class="n">result</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>

<hr>
<h1>problem 38</h1>
<p><a href="https://projecteuler.net/problem=38">Question</a>:</p>
<blockquote>
<p><p>Take the number 192 and multiply it by each of 1, 2, and 3:</p>
<blockquote>192 × 1 = 192<br>
192 × 2 = 384<br>
192 × 3 = 576</blockquote>
<p>By concatenating each product we get the 1 to 9 pandigital, 192384576. We will call 192384576 the concatenated product of 192 and (1,2,3)</p>
<p>The same can be achieved by starting with 9 and multiplying by 1, 2, 3, 4, and 5, giving the pandigital, 918273645, which is the concatenated product of 9 and (1,2,3,4,5).</p>
<p>What is the largest 1 to 9 pandigital 9-digit number that can be
formed as the concatenated product of an integer with (1,2, ... ,
<var>n</var>) where <var>n</var> &gt; 1?</p>
</p>
</blockquote>
<ul>
<li>problem space: 100,000,000 &lt; product &lt; 999,999,999, because
  product must be a 9-digit number</li>
<li>test criteria: product is a 9-digit pandigital?</li>
</ul>
<p>If product is bound by 9 digits, this becomes quite easy:</p>
<ol>
<li>n = 2 &rarr; x is max at 4 digit &rarr; <code>x + 2*x</code> can generate a 9-digit</li>
<li>n = 3 &rarr; x is max at 3 digit (as example shown)</li>
<li>n = 4 &rarr; x is max at 2 digit</li>
</ol>
<p>Now think about it, we can narrow this down even further &mdash; if we
are to search for the <strong>largest</strong> 9-digit number, it has to start
with 9. Some posts say it also needs to be 4-digit. This I actually
doubt even though it was so at the end. I think iterating 2-4 is a
safer bet.</p>
<h2>method 1</h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">operator</span><span class="w"> </span><span class="kn">import</span> <span class="n">add</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">():</span>
    <span class="n">max_digits</span> <span class="o">=</span> <span class="mi">9</span>

    <span class="c1"># 1-9 pandigital test</span>
    <span class="n">test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;123456789&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># iterate problem space</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]:</span>  <span class="c1"># number of digits</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">n</span><span class="p">):</span>  <span class="c1"># potential numbers</span>
            <span class="c1"># concatenated sum strings</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
                               <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_digits</span> <span class="o">/</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>

            <span class="c1"># pandigital test</span>
            <span class="k">if</span> <span class="n">test</span><span class="p">(</span><span class="n">tmp</span><span class="p">):</span>
                <span class="nb">print</span> <span class="s1">&#39;found&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">tmp</span>
                <span class="n">result</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">tmp</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">result</span>
</code></pre></div>

<p>Notice how we test 1-9 pandigital number?</p>
<div class="highlight"><pre><span></span><code><span class="n">test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;123456789&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>

<p>What a beauty!</p>
<h2>method 2</h2>
<p>If we can establish that the number has four digits, the code can be
dramatically simplified:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Same solution with assumption that the number has 9 digits</span>
<span class="sd">    and starts with 9 -&gt; 9xxx.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">):</span>
        <span class="n">st</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;123456789&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
            <span class="nb">print</span> <span class="n">x</span><span class="p">,</span> <span class="n">st</span>
</code></pre></div>

<hr>
<h1>problem 39</h1>
<p><a href="https://projecteuler.net/problem=39">Question</a>:</p>
<blockquote>
<p>If <i>p</i> is the perimeter of a right angle triangle with integral
length sides, {<i>a</i>,<i>b</i>,<i>c</i>}, there are exactly three
solutions for <i>p</i> = 120.</p>
<p>{20,48,52}, {24,45,51}, {30,40,50}</p>
<p>For which value of <i>p</i> ≤ 1000, is the number of solutions
maximised?
</p>
</blockquote>
<ul>
<li>problem space: <code>a+b+c &lt; 1,000</code></li>
<li>test criteria: is a triangle? is a right triangle? a+b+c=p?</li>
</ul>
<p>The key of this problem is hidden criteria defined by <strong>a,b,c being a
triangle</strong> &rarr; sum of any two sides must be greater than the other;
diff of any sides must be less than the other.</p>
<ol>
<li><code>a+b&gt;c</code> and <code>a+c&gt;b</code> and <code>b+c&gt;a</code></li>
<li><code>a-b&lt;c</code> and <code>a-c&lt;b</code> and <code>b-c&lt;a</code></li>
</ol>
<p>Note you only need one of these two tests to validate both conditions
because they are the same rule actually.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">p</span> <span class="o">=</span> <span class="mi">1000</span>

    <span class="n">triangle_test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">z</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">+</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="n">x</span>
    <span class="n">right_angle_test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">z</span> <span class="o">*</span> <span class="n">z</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">p</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># c must be &lt; n/2</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># b must be (n-c)/2</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span>

                <span class="k">if</span> <span class="n">triangle_test</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="ow">and</span> <span class="n">right_angle_test</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># save result</span>
        <span class="n">result</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
        <span class="nb">print</span> <span class="n">n</span><span class="p">,</span> <span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">count</span>

    <span class="nb">print</span> <span class="n">result</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">result</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div>

<p>Note the trick how I use a list <code>result = [0]*p</code> to track counts.</p>
<hr>
<h1>problem 40</h1>
<p><a href="https://projecteuler.net/problem=40">Question</a>:</p>
<blockquote>
<p><p>An irrational decimal fraction is created by concatenating the
positive integers:</p> <p
style="text-align:center;">0.12345678910<span
style="color:#dd0000;font-size:14pt;">1</span>112131415161718192021...</p>
<p>It can be seen that the 12<sup>th</sup> digit of the fractional
part is 1.</p> <p>If <i>d</i><sub><i>n</i></sub> represents the
<i>n</i><sup>th</sup> digit of the fractional part, find the value
of the following expression.</p> <p
style="text-align:center;"><i>d</i><sub>1</sub> ×
<i>d</i><sub>10</sub> × <i>d</i><sub>100</sub> ×
<i>d</i><sub>1000</sub> × <i>d</i><sub>10000</sub> ×
<i>d</i><sub>100000</sub> × <i>d</i><sub>1000000</sub></p></p>
</blockquote>
<ul>
<li>problem space: &lt; <code>1000,000</code>, because we are working with digits, not
    numbers, so the <code>1000,000</code>th digit is definitely &lt; 1M</li>
<li>test criteria: count index of digits if concatenated using the
    pattern</li>
</ul>
<h2>method 1</h2>
<p>Problem space is limited, we can brute force by building the
concatenated list (in memory):</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000000</span>
    <span class="n">marks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span> <span class="o">**</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>

    <span class="n">start</span> <span class="o">=</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">on</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">while</span> <span class="n">end</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">tmp</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">end</span><span class="p">,</span> <span class="n">end</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
        <span class="n">on</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># print on, start, end</span>

    <span class="nb">print</span> <span class="p">[</span><span class="n">tmp</span><span class="p">[</span><span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">marks</span><span class="p">]</span>
    <span class="nb">print</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">tmp</span><span class="p">[</span><span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">marks</span><span class="p">])</span>
</code></pre></div>

<p>Found a simpler presentation in discussion thread:</p>
<div class="highlight"><pre><span></span><code><span class="n">n</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)))</span>
<span class="nb">print</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]),[</span><span class="mi">10</span><span class="o">**</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">)]))</span>
</code></pre></div>

<h2>method 2</h2>
<p>To be smarter, we are only interested in <code>xth</code> when the index count
crosses the <code>10xx th</code> mark. So instead of building the whole string
and index it, we keep a score on the index itself:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000000</span>

    <span class="c1"># index boundaries we are interested in</span>
    <span class="n">marks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span> <span class="o">**</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)]</span>
    <span class="c1"># next index boundary to watch</span>
    <span class="n">next_mark</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># keep track of string index</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">end</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># count numbers</span>
    <span class="n">on</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># iterate problem space</span>
    <span class="k">while</span> <span class="n">end</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="c1"># track indexes</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">end</span><span class="p">,</span> <span class="n">end</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>

        <span class="c1"># check index boundary</span>
        <span class="k">if</span> <span class="n">end</span> <span class="o">&gt;=</span> <span class="n">marks</span><span class="p">[</span><span class="n">next_mark</span><span class="p">]:</span>
            <span class="c1"># crossed a boundary, we should have one &#39;&#39;xxth&#39;&#39; digit</span>
            <span class="nb">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">on</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">marks</span><span class="p">[</span><span class="n">next_mark</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>

            <span class="c1"># next index boundary</span>
            <span class="n">next_mark</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># next number to concatenate</span>
        <span class="n">on</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>

<hr>
<h1>problem 41</h1>
<p><a href="https://projecteuler.net/problem=41">Question</a>:</p>
<blockquote>
<p><p>We shall say that an <i>n</i>-digit number is pandigital if it makes use of all the digits 1 to <i>n</i> exactly once. For example, 2143 is a 4-digit pandigital and is also prime.</p>
<p>What is the largest <i>n</i>-digit pandigital prime that exists?</p></p>
</blockquote>
<ul>
<li>problem space: <code>1-n</code> exactly once &rarr; <code>n</code> can not exceed 9</li>
<li>test criteria: is prime? is pandigital?</li>
</ul>
<p>I would start with 9-digit primes that also starts with digit 9
&mdash; ''9xxxx'', and if it passes pandigital test, it is the one.</p>
<p>However, after trial, this strategy did not work. Brute force by step
of <code>-2</code> is not viable due to the large number of numbers we have to
test. Changing this thought a little bit, we use
<code>itertools.permutations</code> to generate all combo which is guaranteed
to be pandigital prior to testing for primality.</p>
<p>Key observations:</p>
<ol>
<li>No 8 or 9 digit pandigital number can be prime. All of them are
   divisible by 3, because sum of digits is a multiple of 3.</li>
<li>The greatest pandigital prime has to occur in amongst the 7 digit
   nunbers, or less.</li>
<li>Moreover, the last digit of the pandigital number has to be odd,
   for it to stand a chance of being prime.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_prime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">permutations</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">digit_count</span> <span class="o">=</span> <span class="mi">9</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">digit_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># 1-n pandigital test</span>
        <span class="n">test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span>
            <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>

        <span class="c1"># iterate all combo</span>
        <span class="k">for</span> <span class="n">digits</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">digit_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">digit_count</span><span class="p">):</span>
            <span class="c1"># ending digit of these can be skipped</span>
            <span class="k">if</span> <span class="n">digits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">]:</span>
                <span class="k">continue</span>

            <span class="c1"># possible number to test</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">]))</span>

            <span class="c1"># test criteria: is prime? is pandigital?</span>
            <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="ow">and</span> <span class="n">test</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="nb">print</span> <span class="s1">&#39;found one&#39;</span><span class="p">,</span> <span class="n">digit_count</span><span class="p">,</span> <span class="n">n</span>
                <span class="n">candidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

        <span class="c1"># we could have stopped here as long as &quot;candidates&quot; is not null</span>
        <span class="c1"># any more because we are counting from 9-digits down.</span>
        <span class="c1"># Just to be thorough, we are listing all such numbers.</span>
        <span class="n">digit_count</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="nb">max</span><span class="p">(</span><span class="n">candidates</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span>
</code></pre></div>

<hr>
<h1>problem 42</h1>
<p><a href="https://projecteuler.net/problem=42">Question</a>:</p>
<blockquote>
<p><p>The <i>n</i><sup>th</sup> term of the sequence of triangle
numbers is given by, <i>t<sub>n</sub></i> = ½<i>n</i>(<i>n</i>+1);
so the first ten triangle numbers are:</p> <p
style="text-align:center;">1, 3, 6, 10, 15, 21, 28, 36, 45, 55,
...</p> <p>By converting each letter in a word to a number
corresponding to its alphabetical position and adding these values
we form a word value. For example, the word value for SKY is 19 +
11 + 25 = 55 = <i>t</i><sub>10</sub>. If the word value is a
triangle number then we shall call the word a triangle word.</p>
<p>Using <a href="https://fengxia41103.github.io/myblog/downloads/euler/P042_words.txt">P042 words.txt</a>, a 16K
text file containing nearly two-thousand common English words, how
many are triangle words?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: words in the given .txt file</li>
<li><strong>test criteria</strong>: word's value add up to a triangle number</li>
</ul>
<p>This is pretty straightforward. Create a list of triangle numbers,
then iterate through words in the text file to create their values,
then match.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">csv</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">string</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">get_score</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">sum</span><span class="p">([</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>

    <span class="n">names</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;p042_words.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">word_scores</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">get_score</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">names</span><span class="p">)</span>
    <span class="n">triangle_numbers</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">word_scores</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)]</span>

    <span class="n">result</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">word_scores</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="ow">in</span> <span class="n">triangle_numbers</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">)</span>
    <span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>

<p>The only take away I could think of is to <code>dynamically</code> determine the
upper bound to generate triangle numbers. I used <code>max()/2</code>. In
reality, it can be reduced further by doing <code>sqrt(max())</code>. Well, I
wanted to stick with basic math so did not import <code>math.sqrt</code>.</p>
<hr>
<h1>problem 43</h1>
<p><a href="https://projecteuler.net/problem=43">Question</a>:</p>
<blockquote>
<p><p>The number, 1406357289, is a 0 to 9 pandigital number because it
is made up of each of the digits 0 to 9 in some order, but it also
has a rather interesting sub-string divisibility property.</p>
<p>Let <i>d</i><sub>1</sub> be the 1<sup>st</sup> digit,
<i>d</i><sub>2</sub> be the 2<sup>nd</sup> digit, and so on. In this
way, we note the following:</p>
<ul><li><i>d</i><sub>2</sub><i>d</i><sub>3</sub><i>d</i><sub>4</sub>=406
is divisible by 2</li>
<li><i>d</i><sub>3</sub><i>d</i><sub>4</sub><i>d</i><sub>5</sub>=063
is divisible by 3</li>
<li><i>d</i><sub>4</sub><i>d</i><sub>5</sub><i>d</i><sub>6</sub>=635
is divisible by 5</li>
<li><i>d</i><sub>5</sub><i>d</i><sub>6</sub><i>d</i><sub>7</sub>=357
is divisible by 7</li>
<li><i>d</i><sub>6</sub><i>d</i><sub>7</sub><i>d</i><sub>8</sub>=572
is divisible by 11</li>
<li><i>d</i><sub>7</sub><i>d</i><sub>8</sub><i>d</i><sub>9</sub>=728
is divisible by 13</li>
<li><i>d</i><sub>8</sub><i>d</i><sub>9</sub><i>d</i><sub>10</sub>=289
is divisible by 17</li> </ul><p>Find the sum of all 0 to 9
pandigital numbers with this property.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: permutation of 0-9 &rarr; 3628800 of them</li>
<li><strong>test criteria</strong>: test by the <code>sub-string divisibility property</code></li>
</ul>
<p>To generate problem space, we use <code>itertools.permutations</code>, nice and
easy. To observe test criteria, we notice a couple filters to rule out
some combinations (see code below). The rest are just dumb tests.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># no 0 on both ends</span>
    <span class="n">space</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">itertools</span><span class="o">.</span><span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">10</span><span class="p">))</span>

    <span class="c1"># test criteria: d2d3d4 % 2 == 0</span>
    <span class="n">space</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">space</span><span class="p">)</span>

    <span class="c1"># test criteria: d3d4d5 % 3 == 0</span>
    <span class="n">space</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">space</span><span class="p">)</span>

    <span class="c1"># test criteria: d4d5d6 % 5 == 0</span>
    <span class="n">space</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">space</span><span class="p">)</span>

    <span class="c1"># test criteria: d5d6d7 % 7 == 0</span>
    <span class="n">test_7</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="err">`</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">7</span><span class="p">]]))</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="c1"># test criteria: d6d7d8 % 11 == 0</span>
    <span class="n">test_11</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="err">`</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">8</span><span class="p">]]))</span> <span class="o">%</span> <span class="mi">11</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="c1"># test criteria: d7d8d9 % 13 == 0</span>
    <span class="n">test_13</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="err">`</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]]))</span> <span class="o">%</span> <span class="mi">13</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="c1"># test criteria: d8d9d10 % 17 == 0</span>
    <span class="n">test_17</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="err">`</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">10</span><span class="p">]]))</span> <span class="o">%</span> <span class="mi">17</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="c1"># all tests</span>
    <span class="n">test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">test_7</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">test_11</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">test_13</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="n">test_17</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># result</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="err">`</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">n</span><span class="p">]))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">space</span><span class="p">)])</span>
</code></pre></div>

<hr>
<h1 id="problem44">problem 44</h1>
<p><a href="https://projecteuler.net/problem=44">Question</a>:</p>
<blockquote>
<p><p>Pentagonal numbers are generated by the formula,
P<sub><var>n</var></sub>=<var>n</var>(3<var>n</var>−1)/2. The first
ten pentagonal numbers are:</p> <p style="text-align:center;">1, 5,
12, 22, 35, 51, 70, 92, 117, 145, ...</p> <p>It can be seen that
P<sub>4</sub> + P<sub>7</sub> = 22 + 70 = 92 =
P<sub>8</sub>. However, their difference, 70 − 22 = 48, is not
pentagonal.</p> <p>Find the pair of pentagonal numbers,
P<sub><var>j</var></sub> and P<sub><var>k</var></sub>, for which
their sum and difference are pentagonal and D =
|P<sub><var>k</var></sub> − P<sub><var>j</var></sub>| is minimised;
what is the value of D?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no upper bound</li>
<li><strong>test criteria</strong>: a pair of pentagonal numbers, their sum and
  abs(diff) are also pentagonals, and search for the min(diff)</li>
</ul>
<p>This should be straightforward, creating a generator of pentagonal
number, and select any 2 to run by the test criteria. However, because
there is no UP, this method will be a trial and error to find a
qualified pair. But even then how do we know this is minimized?</p>
<h2>method 1 (brute force)</h2>
<p>This generated correct answer, but this is luck not mathematically
proven:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>

<span class="k">def</span><span class="w"> </span><span class="nf">pentagonal_generator</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">m</span> <span class="o">*</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">3000</span>
    <span class="n">pentagonals</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pentagonal_generator</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">pentagonals</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">pentagonals</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="n">pentagonals</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s1">&#39;found&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span>
</code></pre></div>

<p>UP started at <code>1000</code> but without finding any qualified pair, then
increased to <code>2000</code>, failed again, then to <code>3000</code>, and it generated a
single pair:<code>(1560090, 7042750)</code>, and it turned out to be the correct
answer <code>a-b = 5482660</code>.</p>
<h2>method 2</h2>
<p>This one guarantees to find the <code>minimal</code>. The idea is simple, if
<code>a-b=c</code> and all three are pentagonal numbers, then <code>a=b+c</code>. We could
derive <code>c</code> must be in form of <code>3n+1</code>, so we first iterate through all
pentagonal numbers that fits <code>3n+1</code> pattern as <code>c</code>, then iterate all
<code>b</code> which must be less than <code>c</code>, and <code>a=b+c</code> and <code>a+c=b+2c</code>! If both
are also pentagonal numbers, we find our <code>minimal</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">3000</span>
    <span class="n">pentagonals</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pentagonal_generator</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>

    <span class="c1"># if a, b are two adjacent pentagonal numbers,</span>
    <span class="c1"># then a-b fits a pattern: 3n+1</span>
    <span class="n">diffs</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pentagonals</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">diffs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">,</span> <span class="n">pentagonals</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">+</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">pentagonals</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">pentagonals</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s1">&#39;found&#39;</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
                <span class="k">return</span>
</code></pre></div>

<p>This one not only guarantees the <code>minimal</code> value, but also takes less
iterations:</p>
<ul>
<li>method 1: <code>2,537,438</code> iterations</li>
<li>method 2: <code>608,718</code> iterations, 4 times faster than method 1.</li>
</ul>
<hr>
<h1 id="problem45">problem 45</h1>
<p><a href="https://projecteuler.net/problem=45">Question</a>:</p>
<blockquote>
<p><p>Triangle, pentagonal, and hexagonal numbers are generated by the
following formulae:</p> <table class="table striped"> <tr><td>
Triangle</td> <td>T<sub><i>n</i></sub>=<i>n</i>(<i>n</i>+1)/2</td>
<td>1, 3, 6, 10, 15, ...</td> </tr> <tr><td>Pentagonal</td>
<td>P<sub><i>n</i></sub>=<i>n</i>(3<i>n</i>−1)/2</td> <td>1, 5, 12,
22, 35, ...</td> </tr><tr><td>Hexagonal</td>
<td>H<sub><i>n</i></sub>=<i>n</i>(2<i>n</i>−1)</td> <td>1, 6, 15,
28, 45, ...</td> </tr></table></p>
<p><p>It can be verified that T<sub>285</sub> = P<sub>165</sub> =
H<sub>143</sub> = 40755.</p> <p>Find the next triangle number that
is also pentagonal and hexagonal.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no upper bound</li>
<li><strong>test criteria</strong>: is triangle and is pentagonal and is hexagonal?</li>
</ul>
<p>Brute force way is to create a list of each kind of numbers, then take
the set intersection. First two are 1 and 40755. We are searching for
the 3rd one:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p44</span><span class="w"> </span><span class="kn">import</span> <span class="n">pentagonal_generator</span>


<span class="k">def</span><span class="w"> </span><span class="nf">triangle_generator</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">m</span> <span class="o">*</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">def</span><span class="w"> </span><span class="nf">hexagonal_generator</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">m</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">10000</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">pentagonal_generator</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span>
            <span class="n">triangle_generator</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">hexagonal_generator</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>

    <span class="nb">print</span> <span class="n">n</span><span class="p">,</span> <span class="n">result</span>
</code></pre></div>

<p>After reading the discussion threads, a couple new discoveries:</p>
<ol>
<li>all hexagonal numbers are also triangle numbers, so we could skip
    generating triangle numbers altogehter</li>
<li>now to make a number that is both hexgonal and pentagonal, check
    <a href="http://mathworld.wolfram.com/HexagonalPentagonalNumber.html">this</a>
    out! Math is beautiful.</li>
</ol>
<hr>
<h1>problem 46</h1>
<p><a href="https://projecteuler.net/problem=46">Question</a>:</p>
<blockquote>
<p><p>It was proposed by Christian Goldbach that every odd composite number can be written as the sum of a prime and twice a square.</p>
<p style="margin-left:10px;">9 = 7 + 2×1<sup>2</sup><br>
15 = 7 + 2×2<sup>2</sup><br>
21 = 3 + 2×3<sup>2</sup><br>
25 = 7 + 2×3<sup>2</sup><br>
27 = 19 + 2×2<sup>2</sup><br>
33 = 31 + 2×1<sup>2</sup></p>
<p>It turns out that the conjecture was false.</p>
<p>What is the smallest odd composite that cannot be written as the
sum of a prime and twice a square?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no UP</li>
<li><strong>test criteria</strong>: logically how to test a conjecture false? &larr;
  finding one that breaks the conjecture. But not finding one (yet)
  does <code>'not</code>' prove it false.</li>
</ul>
<p>My approach is to generate two sets, and check whether they have
interaction:</p>
<ol>
<li><strong>set 1</strong>: odd numbers that fit the <code>prime+2*x*x</code> pattern, where
   <code>x</code> is 1-N, and  <code>prime</code> are primes below N.</li>
<li><strong>set 2</strong>: consecutive <code>odd</code> numbers below a the same upper bound N.</li>
</ol>
<p>What's in set 2 but not in set 1 is an odd number that falsify the
conjecture &rarr; then pick the minimal one.</p>
<p>Upper bound N is by trial and error if the returned list is
empty. Incremented by 1,000 per step, 6,000 will find two such
numbers: 5993, 5777.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_primes</span><span class="p">,</span> <span class="n">is_prime</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">6000</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span>
        <span class="p">[</span><span class="n">p</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">get_primes</span><span class="p">(</span><span class="n">n</span><span class="p">)]))</span>

    <span class="nb">print</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="ow">not</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</code></pre></div>

<p>Value for <code>n</code> was set through trial and error &larr; increased until
result returns a non null list. When set to 6,000, it actually found
two values: 5,777 and 5,993.</p>
<p>Never thought I would have tackled <a href="https://en.wikipedia.org/wiki/Goldbach%27s_conjecture">Goldbach
conjecture</a>,
wow! However, original conjecture is different, so this one was made
up to be false on purpose.</p>
<hr>
<h1>problem 47</h1>
<p><a href="https://projecteuler.net/problem=47">Question</a>:</p>
<blockquote>
<p><p>The first two consecutive numbers to have two distinct prime
factors are:</p> <p style="margin-left:100px;">14 = 2 × 7<br>15 = 3
× 5</p> <p>The first three consecutive numbers to have three
distinct prime factors are:</p> <p style="margin-left:100px;">644 =
2² × 7 × 23<br>645 = 3 × 5 × 43<br>646 = 2 × 17 × 19.</p> <p>Find
the first four consecutive integers to have four distinct prime
factors. What is the first of these numbers?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no upper bound</li>
<li><strong>test criteria</strong>: 4 consecutive numbers, all have 4 distinct prime factors</li>
</ul>
<p>If <code>a,b,c,d</code> are consecutive, there are only two patterns possible:</p>
<ol>
<li>even, odd, even, odd</li>
<li>odd, even, odd, even</li>
</ol>
<p>Also, at least one of the four numbers is divisible by 3. Looking at
the example, my guess is the number with 4 distinct prime factors
could be a 4-digit number, so let's try UP of 10,000 to begin with.</p>
<p>Another observation: two even numbers, say <code>a</code> and <code>c</code>, are separated
by 2, both would have 2 as a factor, so the product of their other 3
factors should generate two numbers with delta of 1! &rarr; find 2
pairs of three-prime whose product has delta of 1. I bet there aren't
that many of such pair.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_primes</span>


<span class="k">def</span><span class="w"> </span><span class="nf">get_prime_factors</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">primes</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get prime factors of n.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    :n: target number</span>
<span class="sd">    :primes: Optionally passing in a pregenerated prime list.</span>

<span class="sd">    Return:</span>
<span class="sd">    :factors: prime factors</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">primes</span><span class="p">:</span>
        <span class="n">primes</span> <span class="o">=</span> <span class="n">get_primes</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

    <span class="c1"># find prime factors</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">%</span> <span class="n">p</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">p</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="n">p</span>
            <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">factors</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># generate primes under an upper bound</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">get_primes</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>

    <span class="c1"># smallest 4 prime product = 2*3*5*7 = 210</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">210</span>

    <span class="c1"># until 4 consecutive numbers are found</span>
    <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">found</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="n">found</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">found</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="c1"># if having 4 distinct prime factors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">get_prime_factors</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">primes</span><span class="p">)))</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

        <span class="c1"># increment</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># answer</span>
    <span class="nb">print</span> <span class="n">found</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
</code></pre></div>

<p>I'm happy to see my answer looks clear comparing to other
threads. This solution is clear and elegant, though not that fast.</p>
<hr>
<h1>problem 48</h1>
<p><a href="https://projecteuler.net/problem=48">Question</a>:</p>
<blockquote>
<p><p>The series, 1<sup>1</sup> + 2<sup>2</sup> + 3<sup>3</sup> + ... +
10<sup>10</sup> = 10405071317.</p> <p>Find the last ten digits of
the series, 1<sup>1</sup> + 2<sup>2</sup> + 3<sup>3</sup> + ... +
1000<sup>1000</sup>.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: 1000<sup>1000</sup></li>
<li><strong>test criteria</strong>: there isn't a test</li>
</ul>
<p>Python can handle big number like 999<sup>999</sup> just fine, so this
problem is too simple to be on the list:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span> <span class="nb">str</span><span class="p">(</span><span class="nb">sum</span><span class="p">([</span><span class="nb">pow</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1001</span><span class="p">)]))[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span>
</code></pre></div>

<p>Note the problem is actually seeking the <strong>least significant 10
digits</strong>. Searching for <strong>most significant 10 digits</strong> would have been
more challenging.</p>
<hr>
<h1>problem 49</h1>
<p><a href="https://projecteuler.net/problem=49">Question</a>:</p>
<blockquote>
<p><p>The arithmetic sequence, 1487, 4817, 8147, in which each of the
terms increases by 3330, is unusual in two ways: (i) each of the
three terms are prime, and, (ii) each of the 4-digit numbers are
permutations of one another.</p> <p>There are no arithmetic
sequences made up of three 1-, 2-, or 3-digit primes, exhibiting
this property, but there is one other 4-digit increasing
sequence.</p> <p>What 12-digit number do you form by concatenating
the three terms in this sequence?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: 4-digit number</li>
<li><strong>test criteria</strong>:</li>
<li>all terms are prime</li>
<li>are permutation of each other</li>
</ul>
<p>Such a limited problem space, simple filter by test criteria.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_prime</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">3330</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">b</span> <span class="o">+</span> <span class="mi">3330</span>

        <span class="c1"># test 1: are primes</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">primes</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">:</span>
            <span class="c1"># test 2: are permutations of each other</span>
            <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
                <span class="nb">print</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
</code></pre></div>

<p>It was not clear to me that 3 numbers had to be separated by <code>3,330</code>. So
using the other two criteria would generate more than 2 sets of
candidates by iterating 4-digit prime. Once this test criteria was
added, there are only 2 left.</p>
<div class="highlight"><pre><span></span><code><span class="mf">1487</span><span class="w"> </span><span class="mf">4817</span><span class="w"> </span><span class="mf">8147</span>
<span class="mf">2969</span><span class="w"> </span><span class="mf">6299</span><span class="w"> </span><span class="mf">9629</span>
</code></pre></div>

<hr>
<h1>problem 50</h1>
<p><a href="https://projecteuler.net/problem=50">Question</a>:</p>
<blockquote>
<p><p>The prime 41, can be written as the sum of six consecutive
primes:</p> <div style="text-align:center;">41 = 2 + 3 + 5 + 7 +
11 + 13</div> <p>This is the longest sum of consecutive primes that
adds to a prime below one-hundred.</p> <p>The longest sum of
consecutive primes below one-thousand that adds to a prime, contains
21 terms, and is equal to 953.</p> <p>Which prime, below
one-million, can be written as the sum of the most consecutive
primes?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: prime numbers below <code>1,000,000</code></li>
<li><strong>test criteria</strong>: is prime, and is a sum of consecutive primes, and is below 1,000,000</li>
</ul>
<p>Using a sliding window technique. First generate prime list below
<code>1,000,000</code>, then set a window size to search for this prime. Since we
are looking for the longest consecutive prime list that meets
criteria, my thought is to start with a large window size then
downsize it each step, so that the 1st encounter would be the answer.</p>
<p>The hard part is to set the initial window size. Tried <code>len(primes)-1</code>
but this was very slow. Then I realized that there is no need to scan
the entire list if the sum within given window is already greater than
1,000,000. This speeds up the search quite a bit. Then, this leads me
to realize that I could use this same logic to set the <code>max</code> window to
try! This dramatically cut down the searching range &rarr; from <code>79,497</code>
to <code>547</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_primes</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000000</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">get_primes</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>

    <span class="c1"># set max window size</span>
    <span class="n">window</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="nb">sum</span><span class="p">(</span><span class="n">primes</span><span class="p">[:</span><span class="n">window</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">window</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># moving window</span>
    <span class="k">while</span> <span class="n">window</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># moving window start and end</span>
        <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">window</span>

        <span class="c1"># move till the end of prime list</span>
        <span class="k">while</span> <span class="n">end</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">primes</span><span class="p">):</span>
            <span class="c1"># test: always true, is sum of primes</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">primes</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">])</span>

            <span class="c1"># too big, skip</span>
            <span class="k">if</span> <span class="n">tmp</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="c1"># test: is prime, &lt; n</span>
            <span class="k">elif</span> <span class="n">tmp</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">tmp</span> <span class="ow">in</span> <span class="n">primes</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s1">&#39;found&#39;</span><span class="p">,</span> <span class="n">window</span><span class="p">,</span> <span class="n">tmp</span>
                <span class="k">return</span>

            <span class="c1"># sliding window</span>
            <span class="n">start</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">window</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="c1"># try next window size</span>
        <span class="n">window</span> <span class="o">-=</span> <span class="mi">1</span>
</code></pre></div>

<hr>
<h1>problem 51</h1>
<p><a href="https://projecteuler.net/problem=51">Question</a>:</p>
<blockquote>
<p><p>By replacing the 1<sup>st</sup> digit of the 2-digit number <em>3,
it turns out that six of the nine possible values: 13, 23, 43, 53,
73, and 83, are all prime.</p> <p>By replacing the 3<sup>rd</sup>
and 4<sup>th</sup> digits of 56</em>*3 with the same digit, this 5-digit
number is the first example having seven primes among the ten
generated numbers, yielding the family: 56003, 56113, 56333, 56443,
56663, 56773, and 56993. Consequently 56003, being the first member
of this family, is the smallest prime with this property.</p>
<p>Find the smallest prime which, by replacing part of the number
(not necessarily adjacent digits) with the same digit, is part of an
eight prime value family.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no upper bound. we don't know how many digits these primes can have.</li>
<li><strong>test criteria</strong>: 8 primes, same digits get replaced by 8 numbers from 0-9.</li>
</ul>
<p>Observations:</p>
<ol>
<li>The 8 primes we are searching must have the same number of digits
   &rarr; searching space for each iteration is not too bad.</li>
<li>Replacing number are 8 numbers from 0-9, but we don't know who they are.</li>
<li>Can't be replacing the last digit &larr; it will generate an even
   number, thus  falsify it being a prime.</li>
<li>Can't be replacing single digit &rarr; it will generate number
   divisible by 3 &rarr; extending this, if the resulting family has 8
   primes, we have to replace <code>%3==0</code> number of digits. Any other
   number of digits will result in 3 of the 10 possible generated
   numbers to be divisible by 3.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_primes</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">get_primes</span><span class="p">(</span><span class="mi">10000000</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span> <span class="n">p</span>
</code></pre></div>

<hr>
<h1>problem 52</h1>
<p><a href="https://projecteuler.net/problem=52">Question</a>:</p>
<blockquote>
<p><p>It can be seen that the number, 125874, and its double, 251748,
contain exactly the same digits, but in a different order.</p>
<p>Find the smallest positive integer, <i>x</i>, such that
2<i>x</i>, 3<i>x</i>, 4<i>x</i>, 5<i>x</i>, and 6<i>x</i>, contain
the same digits.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no upper bound</li>
<li><strong>test criteria</strong>: as stated in problem</li>
</ul>
<p>This one is easy for brute force:</p>
<ol>
<li>using <code>set</code> equal to determine whether they have the same digits</li>
<li>since they contain the same number of digits also, the smallest of
   the set has to  start with digit <code>1</code> in order for <code>6x</code> to stand a chance.</li>
<li>at least 6 digits &larr; multiply 2x... can generate 5 different
   numbers, plus 1  &rarr; 6 digits minimum.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="c1"># 2x, 3x, 4x, 5x, 6x</span>
    <span class="n">multipliers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

    <span class="c1"># starting point, at least 6-digit number</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">5</span>

    <span class="c1"># search</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># compute 2x...</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">m</span><span class="p">))</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">multipliers</span><span class="p">]</span>

        <span class="c1"># test: having same digits?</span>
        <span class="k">if</span> <span class="n">reduce</span><span class="p">(</span><span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">,</span> <span class="n">tmp</span><span class="p">)</span> <span class="o">==</span> <span class="n">tmp</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="nb">print</span> <span class="n">n</span>
            <span class="k">return</span>  <span class="c1"># done</span>

        <span class="c1"># next one, most significant digit must be 1</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>

<hr>
<h1>problem 53</h1>
<p><a href="https://projecteuler.net/problem=53">Question</a>:</p>
<blockquote>
<p><p>There are exactly ten ways of selecting three from five,
12345:</p> <p style="text-align:center;">123, 124, 125, 134, 135,
145, 234, 235, 245, and 345</p> <p>In combinatorics, we use the
notation, <sup>5</sup>C<sub>3</sub> = 10.</p> <p>In general,</p>
<div style="text-align:center;">
<table><tr><td><sup><var>n</var></sup>C<sub><var>r</var></sub> =
</td> <td><div style="text-align:center;"><var>n</var>!<br>&lt;span
style="border-top:1px solid</p>
<h1>000;"&gt;<var>r</var>!(<var>n−r</var>)!</span></div></td> <td>,where</h1>
<p><var>r</var> ≤ <var>n</var>, <var>n</var>! =
<var>n</var>×(<var>n</var>−1)×...×3×2×1, and 0! = 1.</td>
</tr></table></div> <p>It is not until <var>n</var> = 23, that a
value exceeds one-million: <sup>23</sup>C<sub>10</sub> =
1144066.</p> <p>How many, not necessarily distinct, values of
&nbsp;<sup><var>n</var></sup>C<sub><var>r</var></sub>, for 1 ≤
<var>n</var> ≤ 100, are greater than one-million?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: looks like limited since 1 &le; n &le; 100, and r &le; n</li>
<li><strong>test criteria</strong>: the value is greater than <code>1,000,000</code></li>
</ul>
<p>Key is to implement an <a href="http://stackoverflow.com/questions/3025162/statistics-combinations-in-python/34087694">efficient
<code>nCk</code></a>
function instead of using <code>math.factorials</code> because the latter grows
too fast. Found an implementation on SO:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">operator</span><span class="w"> </span><span class="kn">import</span> <span class="n">mul</span>    <span class="c1"># or mul=lambda x,y:x*y</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fractions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Fraction</span>

<span class="k">def</span><span class="w"> </span><span class="nf">nCk</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">reduce</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">)),</span> <span class="mi">1</span><span class="p">))</span>
</code></pre></div>

<p>The rest is easy, brute force it:
1. <code>i</code> must be greater than 10
2. <code>j</code> must be between 3 and <code>i-2</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">BENCHMARK</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">6</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">nCk</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">BENCHMARK</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span> <span class="n">count</span>
</code></pre></div>

<p>Math behind <code>nCk</code> is a <a href="https://en.wikipedia.org/wiki/Pascal%27s_triangle">Pascal's
triangle</a> &larr;
using factorial for <code>nCk</code> computation is not necessary.</p>
<p>Taking this a bit further, I searched benchmark vs. count to analyze
how quickly this relationship will converge. To my surprise it is
quite linear!</p>
<p><img alt="" class="col s12" src="https://fengxia41103.github.io/myblog/downloads/euler/P53.png"></p>
<hr>
<h1>problem 54</h1>
<p><a href="https://projecteuler.net/problem=54">Question</a>:</p>
<blockquote>
<p><p>In the card game poker, a hand consists of five cards and are
ranked, from lowest to highest, in the following way:</p>
<ul><li><b>High Card</b>: Highest value card.</li> <li><b>One
Pair</b>: Two cards of the same value.</li> <li><b>Two Pairs</b>:
Two different pairs.</li> <li><b>Three of a Kind</b>: Three cards of
the same value.</li> <li><b>Straight</b>: All cards are consecutive
values.</li> <li><b>Flush</b>: All cards of the same suit.</li>
<li><b>Full House</b>: Three of a kind and a pair.</li> <li><b>Four
of a Kind</b>: Four cards of the same value.</li> <li><b>Straight
Flush</b>: All cards are consecutive values of same suit.</li>
<li><b>Royal Flush</b>: Ten, Jack, Queen, King, Ace, in same
suit.</li> </ul><p>The cards are valued in the order:<br>2, 3, 4, 5,
6, 7, 8, 9, 10, Jack, Queen, King, Ace.</p> <p>If two players have
the same ranked hands then the rank made up of the highest value
wins; for example, a pair of eights beats a pair of fives (see
example 1 below). But if two ranks tie, for example, both players
have a pair of queens, then highest cards in each hand are compared
(see example 4 below); if the highest cards tie then the next
highest cards are compared, and so on.</p> <p>Consider the following
five hands dealt to two players:</p> <div
style="text-align:center;"> <table class="table
striped"><tr><td><b>Hand</b></td><td>&nbsp;</td><td><b>Player
1</b></td><td>&nbsp;</td><td><b>Player
2</b></td><td>&nbsp;</td><td><b>Winner</b></td> </tr><tr><td
style="vertical-align:top;"><b>1</b></td><td>&nbsp;</td><td>5H 5C 6S
7S KD<br><div class="note">Pair of
Fives</div></td><td>&nbsp;</td><td>2C 3S 8S 8D TD<br><div
class="note">Pair of Eights</div></td><td>&nbsp;</td><td
style="vertical-align:top;">Player 2</td> </tr><tr><td
style="vertical-align:top;"><b>2</b></td><td>&nbsp;</td><td>5D 8C 9S
JS AC<br><div class="note">Highest card
Ace</div></td><td>&nbsp;</td><td>2C 5C 7D 8S QH<br><div
class="note">Highest card Queen</div></td><td>&nbsp;</td><td
style="vertical-align:top;">Player 1</td> </tr><tr><td
style="vertical-align:top;"><b>3</b></td><td>&nbsp;</td><td>2D 9C AS
AH AC<br><div class="note">Three
Aces</div></td><td>&nbsp;</td><td>3D 6D 7D TD QD<br><div
class="note">Flush with Diamonds</div></td><td>&nbsp;</td><td
style="vertical-align:top;">Player 2</td> </tr><tr><td
style="vertical-align:top;"><b>4</b></td><td>&nbsp;</td><td>4D 6S 9H
QH QC<br><div class="note">Pair of Queens<br>Highest card
Nine</div></td><td>&nbsp;</td><td>3D 6D 7H QD QS<br><div
class="note">Pair of Queens<br>Highest card
Seven</div></td><td>&nbsp;</td><td
style="vertical-align:top;">Player 1</td> </tr><tr><td
style="vertical-align:top;"><b>5</b></td><td>&nbsp;</td><td>2H 2D 4C
4D 4S<br><div class="note">Full House<br>With Three
Fours</div></td><td>&nbsp;</td><td>3C 3D 3S 9S 9D<br><div
class="note">Full House<br>with Three
Threes</div></td><td>&nbsp;</td><td
style="vertical-align:top;">Player 1</td> </tr></table></div> <p>The
file, <a href="http://project/resources/p054_poker.txt">poker.txt</a>, contains
one-thousand random hands dealt to two players. Each line of the
file contains ten cards (separated by a single space): the first
five are Player 1's cards and the last five are Player 2's
cards. You can assume that all hands are valid (no invalid
characters or repeated cards), each player's hand is in no specific
order, and in each hand there is a clear winner.</p> <p>How many
hands does Player 1 win?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: <a href="https://en.wikipedia.org/wiki/List_of_poker_hand_categories">poker
  game</a></li>
<li><strong>test criteria</strong>: play by the rules</li>
</ul>
<p>If interested in, read the
<a href="https://en.wikipedia.org/wiki/Poker_probability">probabilities</a>,
nice!</p>
<p>I don't see this is a math problem, however. On the other hand, this
is quite like solving a practical problem in life.</p>
<h2>method 1</h2>
<p>Method 1 is elaborate. I laid out all possibles using given term and
rule and abstract each hand into a class.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyHand</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hand_in_string</span><span class="p">):</span>
        <span class="c1"># top cards</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">royal</span> <span class="o">=</span> <span class="s1">&#39;TJQKA&#39;</span>

        <span class="c1"># a full deck of cards regardless of suit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deck</span> <span class="o">=</span> <span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">royal</span><span class="p">))[</span><span class="mi">2</span><span class="p">:]</span>

        <span class="c1"># given hand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hand_in_string</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\s&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">hand_in_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;..?&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand_in_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">suits</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;.(.?)&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand_in_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;(.?).&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hand_in_string</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map_val_str_to_int</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_same_suit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">suits</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_royal</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">royal</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_consecutive</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals_count</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rank</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_data</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">map_val_str_to_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val_in_str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Map card values.</span>

<span class="sd">        T(en) - 10</span>
<span class="sd">        J(ack) - 11</span>
<span class="sd">        Q(ueen) - 12</span>
<span class="sd">        K(ing) - 13</span>
<span class="sd">        A(ce) - 14</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deck</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">val_in_str</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_royal_flush</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Royal flush is TJQKA in same suit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_royal</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_same_suit</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_straight_flush</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;All cards are consecutive values of same suit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_consecutive</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_same_suit</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_four_of_a_kind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Four cards of the same value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_count</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_full_house</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Three of a kind and a pair.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_count</span> <span class="o">==</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_flush</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;All cards of the same suit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_same_suit</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_straight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;All cards are consecutive values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_consecutive</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_three_of_a_kind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Three cards of the same value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_count</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_two_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Two different pairs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_count</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_one_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Two cards of the same value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_count</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clean_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rank</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cmp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_royal_flush</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">9</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_straight_flush</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_four_of_a_kind</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">7</span>
            <span class="c1"># [7,4,4,4,4] -&gt; 44447</span>
            <span class="c1"># [4,4,4,4,7] -&gt; 44447</span>
            <span class="n">four</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">single</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">single</span> <span class="o">=</span> <span class="n">f</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">four</span> <span class="o">=</span> <span class="n">f</span>
            <span class="n">cmp_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">four</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">+</span> <span class="p">[</span><span class="n">single</span><span class="p">]</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_full_house</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">6</span>
            <span class="c1"># [9,9,3,3,3] -&gt; 33399</span>
            <span class="n">three</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">pair</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">pair</span> <span class="o">=</span> <span class="n">f</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">three</span> <span class="o">=</span> <span class="n">f</span>
            <span class="n">cmp_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">three</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="n">pair</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_flush</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_straight</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_three_of_a_kind</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="c1"># [9,6,3,3,3] -&gt; 33396</span>
            <span class="c1"># [3,3,3,6,9] -&gt; 33396</span>
            <span class="n">three</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">singles</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">three</span> <span class="o">=</span> <span class="n">f</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">singles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">cmp_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">three</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">singles</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_two_pairs</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="c1"># [6,6,9,9,10] -&gt; [9,9,6,6,10]</span>
            <span class="c1"># [10,6,6,9,9] -&gt; [9,9,6,6,10]</span>
            <span class="n">pairs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">single</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">single</span> <span class="o">=</span> <span class="n">f</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">cmp_val</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pairs</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">single</span><span class="p">]</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_one_pair</span><span class="p">():</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="c1"># [6,6,8,9,7] -&gt; [6,6,9,8,7]</span>
            <span class="c1"># [5,6,6,8,9] -&gt; [6,6,9,8,5]</span>
            <span class="n">pair</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">singles</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals_int</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">singles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pair</span> <span class="o">=</span> <span class="n">f</span>
            <span class="n">cmp_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">pair</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">singles</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">rank</span><span class="p">,</span> <span class="n">cmp_val</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">rank</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">rank</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmp_val</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">cmp_val</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>  <span class="c1"># tie</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># equal rank</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmp_val</span><span class="p">)):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmp_val</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">cmp_val</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmp_val</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">cmp_val</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="mi">1</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;p054_poker.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">hands</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">hand1</span> <span class="o">=</span> <span class="n">MyHand</span><span class="p">(</span><span class="n">hands</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">hands</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">])</span>
            <span class="n">hand2</span> <span class="o">=</span> <span class="n">MyHand</span><span class="p">(</span><span class="n">hands</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">hands</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:])</span>

            <span class="k">if</span> <span class="n">hand1</span> <span class="o">&gt;</span> <span class="n">hand2</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s1">&#39;player 1 win&#39;</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="n">count</span>
</code></pre></div>

<h2>method 2</h2>
<p>Building upon experience gained from method 1, I have refactored the
code to make it more <code>pythonic</code> looking. Instead of using a
<code>class</code> to represent a hand, it goes straight to converting a hand
string into a <code>'rank</code>' and a <code>'cmp_val</code>' list.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rank_hand</span><span class="p">(</span><span class="n">hand</span><span class="p">):</span>
    <span class="c1"># utility functions</span>
    <span class="n">deck</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;TJQKA&#39;</span><span class="p">)</span>
    <span class="n">card_val</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">deck</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="n">vals</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;(.?).&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">suits</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;.(.?)&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">is_straight</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span>

    <span class="c1"># parser</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">suits</span><span class="p">(</span><span class="n">hand</span><span class="p">)</span>
    <span class="n">v</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">card_val</span><span class="p">,</span> <span class="n">vals</span><span class="p">(</span><span class="n">hand</span><span class="p">)))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># variables to track rank and pattern</span>
    <span class="n">rank</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cmp_val</span> <span class="o">=</span> <span class="n">v</span>
    <span class="n">count</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]))</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
        <span class="n">count</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">c</span><span class="p">]</span>

    <span class="c1"># convert hand to rank and a comparable data form</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># same suit</span>
        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">60</span><span class="p">:</span>  <span class="c1"># royal flush</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">9</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>  <span class="c1"># flush</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="k">if</span> <span class="n">is_straight</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>  <span class="c1"># straight flush</span>
                <span class="n">rank</span> <span class="o">=</span> <span class="mi">8</span>

    <span class="k">else</span><span class="p">:</span>  <span class="c1"># different suit</span>
        <span class="k">if</span> <span class="n">count</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>  <span class="c1"># four of a kind</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">7</span>
            <span class="n">cmp_val</span> <span class="o">=</span> <span class="n">count</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">count</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>  <span class="c1"># 3s</span>
            <span class="k">if</span> <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>  <span class="c1"># full house</span>
                <span class="n">rank</span> <span class="o">=</span> <span class="mi">6</span>
                <span class="n">cmp_val</span> <span class="o">=</span> <span class="n">count</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># three of a kind</span>
                <span class="n">rank</span> <span class="o">=</span> <span class="mi">3</span>
                <span class="n">cmp_val</span> <span class="o">=</span> <span class="n">count</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>  <span class="c1"># 2s</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># two pairs</span>
                <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rank</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">cmp_val</span> <span class="o">=</span> <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">is_straight</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>  <span class="c1"># straight</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="k">return</span> <span class="n">rank</span><span class="p">,</span> <span class="n">cmp_val</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">():</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;p054_poker.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">hands</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">hands</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\s&#39;</span><span class="p">,</span> <span class="err">`</span><span class="p">,</span> <span class="n">hands</span><span class="p">)</span>
            <span class="n">rank1</span><span class="p">,</span> <span class="n">hand1</span> <span class="o">=</span> <span class="n">rank_hand</span><span class="p">(</span><span class="n">hands</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
            <span class="n">rank2</span><span class="p">,</span> <span class="n">hand2</span> <span class="o">=</span> <span class="n">rank_hand</span><span class="p">(</span><span class="n">hands</span><span class="p">[</span><span class="mi">10</span><span class="p">:])</span>

            <span class="c1"># comparison</span>
            <span class="k">if</span> <span class="n">rank1</span> <span class="o">&gt;</span> <span class="n">rank2</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">rank1</span> <span class="o">==</span> <span class="n">rank2</span> <span class="ow">and</span> <span class="n">hand1</span> <span class="o">&gt;</span> <span class="n">hand2</span><span class="p">:</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="n">count</span>
</code></pre></div>

<h2>crazy version</h2>
<p>Found in discussion threads. 11 lines of code! This is something
pretty crazy:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rank</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">val_dict</span><span class="o">=</span><span class="p">{</span><span class="n">c</span><span class="p">:</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="s1">&#39;23456789TJQKA&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)},</span>
         <span class="n">pair_dict</span><span class="o">=</span><span class="p">{(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mi">6</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">7</span><span class="p">},</span>
         <span class="n">no_pair_dict</span><span class="o">=</span><span class="p">{(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mi">4</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">8</span><span class="p">}):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Give a tuple showing the rank of the hand; higher is better.</span>

<span class="sd">    vals are the card values, sorted by importance -- a 2 has value 2,</span>
<span class="sd">    A has value 14.</span>

<span class="sd">    counts[0] is the highest frequency; 3 if there is three of a kind, etc.</span>
<span class="sd">    If it&#39;s bigger than 1,  the hand won&#39;t be straight or flush.</span>

<span class="sd">    pair_dict keys for duplicates are the two highest frequencies of card</span>
<span class="sd">    values, so (2, 1) means one pair, (3, 2) is full house, etc.</span>

<span class="sd">    If there are no duplicate cards, algorithm is as follows:</span>
<span class="sd">    check for straight and flush.  If neither, assign 0; if straight, 4; if</span>
<span class="sd">    flush, 5, if straight/royal flush, 8.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">repeats</span> <span class="o">=</span> <span class="p">[(</span><span class="n">s</span><span class="p">[::</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">val_dict</span><span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="n">suit</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">suit</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
    <span class="n">repeats</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">counts</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">suits</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">repeats</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="n">rk</span> <span class="o">=</span> <span class="n">pair_dict</span><span class="p">[(</span><span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">counts</span><span class="p">[</span><span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">]])]</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">rk</span> <span class="o">=</span> <span class="n">no_pair_dict</span><span class="p">[(</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vals</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">suits</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">rk</span><span class="p">,)</span> <span class="o">+</span> <span class="n">vals</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;p054_poker.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">rank</span><span class="p">(</span><span class="n">s</span><span class="p">[:</span><span class="mi">14</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">rank</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">15</span><span class="p">:])</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">f</span><span class="p">))</span>
</code></pre></div>

<p>Any here is a crazier version by the same guy, 5 lines!</p>
<div class="highlight"><pre><span></span><code><span class="c1">#Note: Requires suits (CDHS) not overlapping cards (2-9TJQKA).</span>
<span class="n">D</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mi">0</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">1</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mi">2</span><span class="p">,(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">3</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">):</span><span class="mi">4</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">5</span><span class="p">,(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span><span class="mi">6</span><span class="p">,(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">7</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="mi">8</span><span class="p">}</span>
<span class="k">def</span><span class="w"> </span><span class="nf">rank</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;23456789TJQKA&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">13</span><span class="p">)))):</span>
  <span class="n">C</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">S</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([(</span><span class="n">H</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">v</span><span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">H</span><span class="o">.</span><span class="n">split</span><span class="p">()])))</span>
  <span class="k">return</span> <span class="n">D</span><span class="p">[(</span><span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">C</span><span class="p">[</span><span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span> <span class="k">if</span> <span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1</span> <span class="k">else</span> <span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">V</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">==</span><span class="mi">4</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">S</span><span class="p">))</span><span class="o">==</span><span class="mi">1</span><span class="p">)],</span> <span class="n">V</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">([</span><span class="n">rank</span><span class="p">(</span><span class="n">s</span><span class="p">[:</span><span class="mi">14</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">rank</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">15</span><span class="p">:])</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;p054_poker.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)]))</span>
</code></pre></div>

<hr>
<h1>problem 55</h1>
<p><a href="https://projecteuler.net/problem=55">Question</a>:</p>
<blockquote>
<p><p>If we take 47, reverse and add, 47 + 74 = 121, which is
palindromic.</p> <p>Not all numbers produce palindromes so
quickly. For example,</p> <p style="margin-left:50px;">349 + 943 =
1292,<br> 1292 + 2921 = 4213<br> 4213 + 3124 = 7337</p> <p>That is,
349 took three iterations to arrive at a palindrome.</p> <p>Although
no one has proved it yet, it is thought that some numbers, like 196,
never produce a palindrome. A number that never forms a palindrome
through the reverse and add process is called a Lychrel number. Due
to the theoretical nature of these numbers, and for the purpose of
this problem, we shall assume that a number is Lychrel until proven
otherwise. In addition you are given that for every number below
ten-thousand, it will either (i) become a palindrome in less than
fifty iterations, or, (ii) no one, with all the computing power that
exists, has managed so far to map it to a palindrome. In fact, 10677
is the first number to be shown to require over fifty iterations
before producing a palindrome: 4668731596684224866951378664 (53
iterations, 28-digits).</p> <p>Surprisingly, there are palindromic
numbers that are themselves Lychrel numbers; the first example is
4994.</p> <p>How many Lychrel numbers are there below
ten-thousand?</p> <p class="note">NOTE: Wording was modified
slightly on 24 April 2007 to emphasise the theoretical nature of
Lychrel numbers.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: int &lt; <code>10,000</code></li>
<li><strong>test criteria</strong>: is not palidromic within 50 iteration &rarr; <a href="https://en.wikipedia.org/wiki/Lychrel_number">Lychrel number</a></li>
</ul>
<h2>method 1</h2>
<p>Implementation is straightforward since problem space is so small. The
tricky part is to start searching from <code>1</code>, and also a number, even
is palidromic itself, needs to take <strong>at least 1 sum</strong> before
counting for the 50-iteration criteria.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">():</span>
    <span class="n">is_palindromic</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">next_num</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">MAX_ITERATION</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">:</span>
        <span class="n">iter_count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">next_num</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">iter_count</span> <span class="o">&lt;</span> <span class="n">MAX_ITERATION</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_palindromic</span><span class="p">(</span><span class="n">tmp</span><span class="p">):</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">next_num</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
            <span class="n">iter_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">iter_count</span> <span class="o">==</span> <span class="n">MAX_ITERATION</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span> <span class="n">count</span>
</code></pre></div>

<h2>method 2</h2>
<p>Found this one in discussion thread. Like its simplicity:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_lychrel</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">():</span>
    <span class="nb">print</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_lychrel</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span>
</code></pre></div>

<hr>
<h1>problem 56</h1>
<p><a href="https://projecteuler.net/problem=56">Question</a>:</p>
<blockquote>
<p><p>A googol (10<sup>100</sup>) is a massive number: one followed by
one-hundred zeros; 100<sup>100</sup> is almost unimaginably large:
one followed by two-hundred zeros. Despite their size, the sum of
the digits in each number is only 1.</p> <p>Considering natural
numbers of the form, <i>a<sup>b</sup></i>, where <i>a, b</i> &lt;
100, what is the maximum digital sum?</p></p>
</blockquote>
<p>This problem is too simple for Python since it handles large number
just fine. A one liner.</p>
<div class="highlight"><pre><span></span><code><span class="nb">max</span><span class="p">([</span><span class="nb">sum</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="n">b</span><span class="p">))</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">101</span><span class="p">)])</span>
</code></pre></div>

<hr>
<h1>problem 57</h1>
<p><a href="https://projecteuler.net/problem=57">Question</a>:</p>
<blockquote>
<p><p>It is possible to show that the square root of two can be
expressed as an infinite continued fraction.</p> <p
style="text-align:center;">√ 2 = 1 + 1/(2 + 1/(2 + 1/(2 + ... ))) =
1.414213...</p> <p>By expanding this for the first four iterations,
we get:</p> <p>1 + 1/2 = 3/2 = 1.5<br> 1 + 1/(2 + 1/2) = 7/5 =
1.4<br> 1 + 1/(2 + 1/(2 + 1/2)) = 17/12 = 1.41666...<br> 1 + 1/(2 +
1/(2 + 1/(2 + 1/2))) = 41/29 = 1.41379...<br></p> <p>The next three
expansions are 99/70, 239/169, and 577/408, but the eighth
expansion, 1393/985, is the first example where the number of digits
in the numerator exceeds the number of digits in the
denominator.</p> <p>In the first one-thousand expansions, how many
fractions contain a numerator with more digits than denominator?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: 1000 expansion of square root of 2</li>
<li><strong>test criteria</strong>: in fraction form, numerator has more digits than denominator's</li>
</ul>
<h2>method 1</h2>
<p>Triggered by the similarity between the expansion formula and <a href="https://docs.python.org/2/library/functions.html#reduce">reduce</a> built-in function, this method approached with a brute force using <code>reduce</code>.</p>
<p>Note we <strong>have to</strong> use
<a href="https://docs.python.org/2/library/fractions.html#module-fractions">Fraction</a>
for calculations within <code>reduce</code>. Otherwise, it introduces a hell of
floating point error which makes converting back to Fraction quite
uncontrollable. For example, <code>Fraction(17/12.0)</code> will generate
<code>Fraction(6380099472108203, 4503599627370496)</code>! WTF.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">fractions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Fraction</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">():</span>
    <span class="c1"># nth iteration floating number form</span>
    <span class="n">nth</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="mi">1</span> <span class="o">+</span> \
        <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">n</span><span class="p">))</span>

    <span class="c1"># all in fractional form</span>
    <span class="n">frac</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">nth</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1001</span><span class="p">))</span>

    <span class="c1"># test: numerator has more digits</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">numerator</span><span class="p">))</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">denominator</span><span class="p">)),</span> <span class="n">frac</span><span class="p">)</span>

    <span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>

<p>However, because of using Fraction all the way through, computation
was very slow.</p>
<h2>method 2</h2>
<p>Forget about using fractions. The math is simple enough that we don't
really need that at all. Instead, keep track of numerator and
denominator as we go. Love this one.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">():</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1001</span><span class="p">):</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">,</span> <span class="n">d</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">n</span>

        <span class="c1"># test: numerator has more digits</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="n">d</span><span class="p">))</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)):</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span> <span class="n">count</span>
</code></pre></div>

<hr>
<h1>problem 58</h1>
<p><a href="https://projecteuler.net/problem=58">Question</a>:</p>
<blockquote>
<p><p>Starting with 1 and spiralling anticlockwise in the following
way, a square spiral with side length 7 is formed.</p> <p
style="text-align:center;font-family:'courier new';"><span
style="color:#ff0000;font-family:'courier new';"><b>37</b></span> 36
35 34 33 32 <span style="color:#ff0000;font-family:'courier
new';"><b>31</b></span><br> 38 <span
style="color:#ff0000;font-family:'courier new';"><b>17</b></span> 16
15 14 <span style="color:#ff0000;font-family:'courier
new';"><b>13</b></span> 30<br> 39 18 <span
style="color:#ff0000;font-family:'courier
new';">&nbsp;<b>5</b></span> &nbsp;4 <span
style="color:#ff0000;font-family:'courier
new';">&nbsp;<b>3</b></span> 12 29<br> 40 19 &nbsp;6 &nbsp;1 &nbsp;2
11 28<br> 41 20 <span style="color:#ff0000;font-family:'courier
new';">&nbsp;<b>7</b></span> &nbsp;8 &nbsp;9 10 27<br> 42 21 22 23
24 25 26<br><span style="color:#ff0000;font-family:'courier
new';"><b>43</b></span> 44 45 46 47 48 49</p> <p>It is interesting
to note that the odd squares lie along the bottom right diagonal,
but what is more interesting is that 8 out of the 13 numbers lying
along both diagonals are prime; that is, a ratio of 8/13 ≈ 62%.</p>
<p>If one complete new layer is wrapped around the spiral above, a
square spiral with side length 9 will be formed. If this process is
continued, what is the side length of the square spiral for which
the ratio of primes along both diagonals first falls below 10%?</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no upper boundary</li>
<li><strong>test criteria</strong>: percentage of primes in all diagonal numbers are &lt; 10%</li>
</ul>
<p>Building upon <a href="#problem28">problem 28</a>, this one is easy. The only
thing to watch out for is that in the problem, it is asking for the
length of the resulting square. So we need to convert circle count to
that &rarr; <code>2*m+1</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_prime</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># m is the circle counter</span>
    <span class="n">num</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># corner num</span>
    <span class="n">prime_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">prime_count</span> <span class="ow">or</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">prime_count</span> <span class="o">*</span> <span class="mi">10</span><span class="p">:</span>
        <span class="c1"># compute 4 corner values</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">+=</span> <span class="n">m</span> <span class="o">*</span> <span class="mi">2</span>  <span class="c1"># 2*m is the step</span>
            <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
                <span class="n">prime_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># next spiral, please</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div>

<p>The time was mostly consumed in primality test. Here is an article on
<a href="https://www.topcoder.com/community/data-science/data-science-tutorials/primality-testing-non-deterministic-algorithms/">primality testing non deterministic algorithm</a>.</p>
<p>However, I tried implementation of
<a href="https://en.wikipedia.org/wiki/Fermat%27s_little_theorem">Fermat</a>
test,
[https://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test
Miller Rabin] test, and various python code, but performance is 3x of
my <a href="#problem10">problem 10</a> implementation. From comments, it looks
like these algorithms are faster than native method when determining
LARGE numbers. My test was running for all primes under 1,000,000.</p>
<hr>
<h1>problem 59</h1>
<p><a href="https://projecteuler.net/problem=59">Question</a>:</p>
<blockquote>
<p><p>Each character on a computer is assigned a unique code and the
preferred standard is ASCII (American Standard Code for Information
Interchange). For example, uppercase A = 65, asterisk (*) = 42, and
lowercase k = 107.</p> <p>A modern encryption method is to take a
text file, convert the bytes to ASCII, then XOR each byte with a
given value, taken from a secret key. The advantage with the XOR
function is that using the same encryption key on the cipher text,
restores the plain text; for example, 65 XOR 42 = 107, then 107 XOR
42 = 65.</p> <p>For unbreakable encryption, the key is the same
length as the plain text message, and the key is made up of random
bytes. The user would keep the encrypted message and the encryption
key in different locations, and without both "halves", it is
impossible to decrypt the message.</p> <p>Unfortunately, this method
is impractical for most users, so the modified method is to use a
password as a key. If the password is shorter than the message,
which is likely, the key is repeated cyclically throughout the
message. The balance for this method is using a sufficiently long
password key for security, but short enough to be memorable.</p>
<p>Your task has been made easy, as the encryption key consists of
three lower case characters. Using
<a href="https://projecteuler.net/project/resources/p059_cipher.txt">cipher.txt</a>
(right click and 'Save Link/Target As...'), a file containing the
encrypted ASCII codes, and the knowledge that the plain text must
contain common English words, decrypt the message and find the sum
of the ASCII values in the original text.</p></p>
</blockquote>
<ul>
<li>problem space: the given cipher text and a 3-lower-case letters as password</li>
<li>test criteria: not clear to me, but this is the key</li>
</ul>
<p>Math is not the issue here. If we could get the message right, we could easily compute the sum. But how do we know the message is correct? I don't see a hard test in this problem. Could it be so subjective that there are more than 1 answer?</p>
<h2>method 1</h2>
<p>This approach is messy.</p>
<ol>
<li>separated given data into 3 sets &rarr; <code>msg[::3]</code>, <code>msg[1::3]</code>, <code>msg[2::3]</code></li>
<li>test ASCII value 32-127 and rule out those that will generate
   non-printable  characters after <code>XOR</code> &larr; original text are all printable.</li>
<li>1st set: <code>['b', 'c', 'd', 'e', 'f', 'g', 'i', 'r', 'x']</code></li>
<li>2nd set: ['a', 'h', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'z', '{']</li>
<li>3rd set: <code>["'", 'd', 'e', 'f', 'g', 'j', 'q', '{']</code></li>
<li>Using these characters to decode each set, and examine for
   <code>irrational</code> results. eg.  1st using <code>b(98)</code>, it generates <code>"-"</code>
   after XOR with 79 &rarr; not likely will be the start of a word or
   sentence, so <code>b</code> will be ruled out (or at least downgraded). This
   technique reduced the options to:</li>
<li>1st set: <code>['g','x']</code></li>
<li>2nd set: <code>['a','b','j','k','l','m','n','o','p','z','{']</code></li>
<li>3rd set: <code>["'",'d','e','f','g','j','{']</code></li>
<li>Last, iterate through <code>combinations(2*10*7=140)</code> and eyeball the decoded message.</li>
</ol>
<p>I know this is not <code>clever</code>. But I failed to see a hard test criteria
to know that decoded message is correct.</p>
<p><img alt="" class="col l6 m6 s12" src="https://fengxia41103.github.io/myblog/downloads/euler/P59.png"></p>
<h2>method 2</h2>
<p>This method is an improved version of method 1. Idea is the same. A
test is introduced: english sentence must have <strong>the</strong> pattern. It
turned out this test is SUFFICIENT to determine the result!</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">method_2</span><span class="p">():</span>
    <span class="c1"># construct 3 sets</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;p059_cipher.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>

    <span class="c1"># find possibles</span>
    <span class="n">possibles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">msg</span><span class="p">[</span><span class="n">i</span><span class="p">::</span><span class="mi">3</span><span class="p">]</span>

        <span class="n">pp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">127</span><span class="p">):</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">^</span> <span class="n">i</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="n">x</span> <span class="o">^</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">127</span><span class="p">)]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tmp</span><span class="p">:</span>
                <span class="n">pp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">possibles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>

    <span class="c1"># iterate</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">possibles</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">possibles</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">possibles</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
                <span class="n">pwd</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>
                <span class="n">decoded</span> <span class="o">=</span> <span class="err">`</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="nb">chr</span><span class="p">(</span><span class="n">x</span> <span class="o">^</span> <span class="n">pwd</span><span class="p">[</span><span class="n">idx</span> <span class="o">%</span> <span class="mi">3</span><span class="p">])</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>

                <span class="c1"># test: wow!</span>
                <span class="k">if</span> <span class="s1">&#39; the &#39;</span> <span class="ow">in</span> <span class="n">decoded</span><span class="p">:</span>
                    <span class="nb">print</span> <span class="err">`</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pwd</span><span class="p">)</span>
                    <span class="nb">print</span> <span class="n">decoded</span>
</code></pre></div>

<h2>method 3</h2>
<p>Some people have approached this problem using <a href="https://en.wikipedia.org/wiki/Letter_frequency">letter
frequency</a>. I will try
this method later.</p>
<hr>
<h1>problem 60</h1>
<p><a href="https://projecteuler.net/problem=60">Question</a>:</p>
<blockquote>
<p><p>The primes 3, 7, 109, and 673, are quite remarkable. By taking
any two primes and concatenating them in any order the result will
always be prime. For example, taking 7 and 109, both 7109 and 1097
are prime. The sum of these four primes, 792, represents the lowest
sum for a set of four primes with this property.</p> <p>Find the
lowest sum for a set of five primes for which any two primes
concatenate to produce another prime.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: no upper bound</li>
<li><strong>test criteria</strong>: any two of the 5 primes can be concatenated to
  form another prime</li>
</ul>
<p>This one took me quite a while. I was completely stuck at the problem
because I was chasing down the <code>(3,7,109,673)</code> path without realizing
that there could be other 4 primes also fitting this attribute,
eg. 13, 5197, 5701, 6733, and 7, 127, 6949, 7723.</p>
<p>I googled for <a href="http://www.mathblog.dk/project-euler-60-primes-concatenate/">a
hint</a>
after stuck for over a week. Without understanding his algorithm nor
his code, what struck me was this line:</p>
<div class="highlight"><pre><span></span><code>First thing is that we can’t stop once we find a solution....
</code></pre></div>

<p>With this said, my method is to keep track of ALL lists that fits the
"any two concatenated forms a prime" test. We start with a seed list
<code>[3,7,11,13]</code>, if we add 7 to 3, the list will now become
<code>[[3,7],3,7,11,13]</code>. Two conditions:</p>
<ol>
<li>always leave 3,7,11,13 available for new prime to test;</li>
<li>only append to a number that's smaller &mdash; append 7 to 3 to make
   [3,7], but not [7,3].</li>
</ol>
<h2>method 1 (brute force)</h2>
<p>To brute force this, the key is to generate enough prime number (<code>next
prime</code>) to test. Method <code>postponed_sieve</code> <a href="#problem10">problem 10</a> is
to generate prime <code>'indefinitely</code>'.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">p10</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_prime2</span><span class="p">,</span> <span class="n">postponed_sieve</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>


<span class="k">def</span><span class="w"> </span><span class="nf">method_1</span><span class="p">():</span>
    <span class="n">N</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="c1"># test: is concatenated a prime</span>
    <span class="n">prepend_test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">is_prime2</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)))</span>
    <span class="n">append_test</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="n">is_prime2</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span>

    <span class="c1"># searching seed</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">13</span><span class="p">]]</span>

    <span class="c1"># search through primes indefinitely</span>
    <span class="n">tmp_min</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">postponed_sieve</span><span class="p">():</span>
        <span class="c1"># when break here, we guarantee the &quot;lowest sum&quot;</span>
        <span class="k">if</span> <span class="n">tmp_min</span> <span class="ow">and</span> <span class="n">p</span> <span class="o">&gt;=</span> <span class="n">tmp_min</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="c1"># 2 is a special prime, skip</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="nb">print</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

        <span class="c1"># test: primality test</span>
        <span class="c1"># Use index because we will modify &quot;results&quot; list</span>
        <span class="c1"># within the loop</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)):</span>
            <span class="c1"># flag default to True</span>
            <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="c1"># check sublist</span>
            <span class="n">tmp</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span>
                <span class="c1"># test: is concatenated a prime?</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">prepend_test</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">append_test</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
                    <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>

            <span class="c1"># passed test, update results list</span>
            <span class="c1"># if p is greater than last number on that list</span>
            <span class="k">if</span> <span class="n">is_valid</span> <span class="ow">and</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">tmp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="c1"># save original list</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>

                <span class="c1"># extend list that fits pattern</span>
                <span class="n">results</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span> <span class="o">==</span> <span class="n">N</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">tmp_min</span> <span class="ow">or</span> <span class="n">tmp_min</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="n">tmp_min</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>

    <span class="c1"># print result</span>
    <span class="n">found</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">N</span><span class="p">,</span> <span class="n">results</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">found</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">found</span><span class="p">)</span>
</code></pre></div>

<p>Graph below shows that the length of candidate list grows almost
<code>linearly</code> with the growing of primes generated.</p>
<p><img alt="" class="col s12" src="https://fengxia41103.github.io/myblog/downloads/euler/P60.png"></p>
<p>When stopped at break condition, we had two pairs:</p>
<ol>
<li><code>[7, 1237, 2341, 12409, 18433]</code></li>
<li><code>[13, 5197, 5701, 6733, 8389]</code></li>
</ol>
<p>2nd one had a smaller sum, <strong>26033</strong>.</p>
<hr>
<h1>problem 61</h1>
<p><a href="https://projecteuler.net/problem=61">Question</a>:</p>
<blockquote>
<p><p>Triangle, square, pentagonal, hexagonal, heptagonal, and
octagonal numbers are all figurate (polygonal) numbers and are
generated by the following formulae:</p> <table class="table
striped"> <tr><td>Triangle</td> <td>&nbsp;</td>
<td>P<sub>3,<i>n</i></sub>=<i>n</i>(<i>n</i>+1)/2</td>
<td>&nbsp;</td> <td>1, 3, 6, 10, 15, ...</td>
</tr><tr><td>Square</td> <td>&nbsp;</td>
<td>P<sub>4,<i>n</i></sub>=<i>n</i><sup>2</sup></td> <td>&nbsp;</td>
<td>1, 4, 9, 16, 25, ...</td> </tr><tr><td>Pentagonal</td>
<td>&nbsp;</td>
<td>P<sub>5,<i>n</i></sub>=<i>n</i>(3<i>n</i>−1)/2</td>
<td>&nbsp;</td> <td>1, 5, 12, 22, 35, ...</td>
</tr><tr><td>Hexagonal</td> <td>&nbsp;</td>
<td>P<sub>6,<i>n</i></sub>=<i>n</i>(2<i>n</i>−1)</td>
<td>&nbsp;</td> <td>1, 6, 15, 28, 45, ...</td>
</tr><tr><td>Heptagonal</td> <td>&nbsp;</td>
<td>P<sub>7,<i>n</i></sub>=<i>n</i>(5<i>n</i>−3)/2</td>
<td>&nbsp;</td> <td>1, 7, 18, 34, 55, ...</td>
</tr><tr><td>Octagonal</td> <td>&nbsp;</td>
<td>P<sub>8,<i>n</i></sub>=<i>n</i>(3<i>n</i>−2)</td>
<td>&nbsp;</td> <td>1, 8, 21, 40, 65, ...</td> </tr></table><p>The
ordered set of three 4-digit numbers: 8128, 2882, 8281, has three
interesting properties.</p> <ol><li>The set is cyclic, in that the
last two digits of each number is the first two digits of the next
number (including the last number with the first).</li> <li>Each
polygonal type: triangle (P<sub>3,127</sub>=8128), square
(P<sub>4,91</sub>=8281), and pentagonal (P<sub>5,44</sub>=2882), is
represented by a different number in the set.</li> <li>This is the
only set of 4-digit numbers with this property.</li> </ol><p>Find
the sum of the only ordered set of six cyclic 4-digit numbers for
which each polygonal type: triangle, square, pentagonal, hexagonal,
heptagonal, and octagonal, is represented by a different number in
the set.</p></p>
</blockquote>
<ul>
<li><strong>problem space</strong>: 4-digit numbers</li>
<li><strong>test criteria</strong>: is cyclic, is represented by a different number in the set</li>
</ul>
<p>Generating these polygonal number is trivial. Some have been done in previous problems:
1. <a href="#problem44">problem 44</a>: <code>pentagonal_generator</code>
2. <a href="#problem45">problem 45</a>: <code>triangle_generator</code>, <code>hexagonal_generator</code></p>
<p>A quick test shows how many 4-digit number in each set: <code>[96, 68, 56,
48, 43, 40]</code> &rarr; pick one from each set, we ended up with
<code>30181294080</code> combinations &rarr; makes brute force approach
impractical.</p> </resume>
</article>



          <div id="related">
          </div>
        </div>
      </div>
    </div>

    <footer class="split-screen">
      <div class="container">
        <h5>Categories:</h5>
        <a href="https://fengxia41103.github.io/myblog/demo.html">
          <i class="fa fa-folder-open-o"></i>
          demo
        </a>
        <a href="https://fengxia41103.github.io/myblog/dev.html">
          <i class="fa fa-folder-open-o"></i>
          dev
        </a>
        <a href="https://fengxia41103.github.io/myblog/fashion.html">
          <i class="fa fa-folder-open-o"></i>
          fashion
        </a>
        <a href="https://fengxia41103.github.io/myblog/gkp.html">
          <i class="fa fa-folder-open-o"></i>
          gkp
        </a>
        <a href="https://fengxia41103.github.io/myblog/lenovo.html">
          <i class="fa fa-folder-open-o"></i>
          lenovo
        </a>
        <a href="https://fengxia41103.github.io/myblog/odoo.html">
          <i class="fa fa-folder-open-o"></i>
          odoo
        </a>
        <a href="https://fengxia41103.github.io/myblog/openstack.html">
          <i class="fa fa-folder-open-o"></i>
          openstack
        </a>
        <a href="https://fengxia41103.github.io/myblog/pm.html">
          <i class="fa fa-folder-open-o"></i>
          pm
        </a>
        <a href="https://fengxia41103.github.io/myblog/react.html">
          <i class="fa fa-folder-open-o"></i>
          REACT
        </a>
        <a href="https://fengxia41103.github.io/myblog/rh.html">
          <i class="fa fa-folder-open-o"></i>
          rh
        </a>
        <a href="https://fengxia41103.github.io/myblog/stock.html">
          <i class="fa fa-folder-open-o"></i>
          stock
        </a>
        <a href="https://fengxia41103.github.io/myblog/thoughts.html">
          <i class="fa fa-folder-open-o"></i>
          thoughts
        </a>

        <h5>Tags:</h5>
        <a href="https://fengxia41103.github.io/myblog/tag-thoughts.html">
          <i class="fa fa-tag"></i>
          thoughts
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-dev.html">
          <i class="fa fa-tag"></i>
          dev
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-react.html">
          <i class="fa fa-tag"></i>
          react
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-love.html">
          <i class="fa fa-tag"></i>
          love
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-lenovo.html">
          <i class="fa fa-tag"></i>
          lenovo
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-angular.html">
          <i class="fa fa-tag"></i>
          angular
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-feng.html">
          <i class="fa fa-tag"></i>
          feng
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-design.html">
          <i class="fa fa-tag"></i>
          design
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-family.html">
          <i class="fa fa-tag"></i>
          family
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-demo.html">
          <i class="fa fa-tag"></i>
          demo
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-odoo.html">
          <i class="fa fa-tag"></i>
          odoo
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-fashion.html">
          <i class="fa fa-tag"></i>
          fashion
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-gkp.html">
          <i class="fa fa-tag"></i>
          gkp
        </a>
        <div class="">
          <h5>Show Cases:</h5>
          <div id="showcase">
            <p>
              Photo album:
              <a href="https://fengxia41103.github.io/moment/1236/#/">1236</a>
            </p>
            <p>
              API & charts:
              <a href="http://sp500chart.s3-website-us-east-1.amazonaws.com"
                >SP500</a
              >
            </p>
            <p>
              API & charts:
              <a
                href="http://snapshots.world.s3-website.ap-northeast-2.amazonaws.com/"
                >Snapshot of The World</a
              >
            </p>

            <p>
              Django (in Chinese):
              <a href="https://fengxia41103.github.io/myblog/project gkp demo.html">GKP</a>
            </p>
            <p>
              ERP:
              <a href="https://fengxia41103.github.io/myblog/project fashion demo.html">Fashion</a>
            </p>
            <p>
              Data processing:
              <a href="https://fengxia41103.github.io/myblog/project stock demo.html">Stock</a>
            </p>
            <p>
              Angular & REACT:
              <a href="https://fengxia41103.github.io/myblog/car leasing.html">Car leasing</a>
              &nbsp;|&nbsp;
              <a href="https://fengxia41103.github.io/spa-dashboard/">
                YAML Config Dashboard
              </a>
            </p>
            <p>
              API & REACT:
              <a href="https://fengxia41103.github.io/movie/">Movies</a>
            </p>
          </div>
        </div>
      </div>
      <video autoplay muted loop id="myVideo">
        <source src="downloads/polina.mp4" type="video/mp4" />
      </video>
    </footer>
    <div class="footer-copyright">
      <div class="container">
        <div class="row">
          <div class="col l8 m8 s12">
            <p>
              2016-2022 PY Consulting Ltd. 601 W. Rosemary St., Chapel Hill, NC 27516
            </p>

            <p>
              <a href="mailto:feng_xia41103@hotmail.com">
                <i class="fa fa-envelope"></i>
              </a>

              <a href="http://github.com/fengxia41103">
                <i class="fa fa-github"></i>
              </a>

              <a href="https://www.linkedin.com/in/fengxia41103">
                <i class="fa fa-linkedin"></i>
              </a>

              <a href="">
                <i class="fa fa-phone-square"></i>
                (508)801-1794
              </a>
            </p>
          </div>
          <div class="col l4 m4 s12">
            <p class="right">
              <i class="fa fa-copyright"></i>
              All rights reserved.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- end of block main -->

    <!-- Placed at the end of the document so the pages load faster -->

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"
    ></script>

    <script
      type="text/javascript"
      src="https://fengxia41103.github.io/myblog/theme/js/bundle.js"
    ></script>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/shell.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"
    ></script>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/xml.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/diff.min.js"
    ></script>

    <script type="text/javascript">
     var exports = {};
     var j$ = jQuery.noConflict();

     j$(document).ready(function () {
       // highlight.js initialization
       hljs.initHighlightingOnLoad();
       j$("pre").each(function (i, block) {
         hljs.highlightBlock(block);
       });

       // tooltips
       j$('[data-toggle="tooltip"]').tooltip();

       // image materialbox
       j$(".materialboxed").materialbox();
     });
    </script>
    <!-- end of block JS -->

<script type="text/javascript">
  var j$ = jQuery.noConflict();

  j$(document).ready(function () {
    // This is needed to deal with browser-default
    // that is used in Material css. How stupid.
    j$("ul").addClass("browser-default");
  });
</script>
  </body>
</html>