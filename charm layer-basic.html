<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta
      name="viewport"
      content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"
    />

    <meta name="description" content="" />
    <meta name="author" content="" />

    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
    />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/monokai-sublime.min.css" integrity="sha512-ade8vHOXH67Cm9z/U2vBpckPD1Enhdxl3N05ChXyFx5xikfqggrK4RrEele+VWY/iaZyfk7Bhk6CyZvlh7+5JQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css"
    />

    <link rel="stylesheet" href="https://fengxia41103.github.io/myblog/theme/css/my.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
            integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>



    <title>Be Care Free</title>
  </head>

  <body>
    <header id="mypage-index">
      <a href="https://fengxia41103.github.io/myblog/">Be Care Free </a>

      <a href="https://fengxia41103.github.io/myblog/about.html"> . About </a>
      <a href="https://fengxia41103.github.io/myblog/lei.html"> . 夏雷 </a>
      <a href="https://fengxia41103.github.io/myblog/project euler.html"> . Project Euler </a>
      <a href="https://fengxia41103.github.io/myblog/quote.html"> . Quote </a>
      <a href="https://fengxia41103.github.io/myblog/resume.html"> . Resum&eacute; </a>
      <a href="https://fengxia41103.github.io/myblog/search.html"> . Search </a>
      <a href="https://fengxia41103.github.io/myblog/slides.html"> . Impression </a>
    </header>
    <!-- end of block navbar -->

    <div class="split-screen">
      <div class="split-left-pane">
<!-- <video autoplay muted loop id="myVideo">
     <source src="downloads/polina.mp4" type="video/mp4" />}
     </video>
-->
      </div>

      <div class="split-right-pane">
        <div id="content" class="container">
<article>
   <div>
    <i class="fa fa-calendar" style="opacity: 0.5">&nbsp;</i>
    2017-05-29


    <a class="wave-effect" href="openstack.html">
      <i class="fa fa-folder-open-o"></i>
      openstack
    </a>

    <a class="wave-effect" href="tag-lenovo.html">
      <i class="fa fa-tag"></i>
      lenovo
    </a>

    <h1 class="myhighlight">Charm layer-basic</h1>
  </div>

  <ol id="toc" class="row"></ol>

  <div>
    <div id="article-content">
      <blockquote>
        <span class="myhighlight">Copyright @ Lenovo US</span>
      </blockquote>
      <p><p>Have you ever wondered what <a href="https://github.com/juju-solutions/layer-basic.git">layer-basic</a> is for? and why every
charm needs to include it? In this article we will take a look
at its code base to decipher this mystery.</p>
<h1>Hooks</h1>
<p>We already know hooks are hardcoded. Juju expects certain hooks and
hook sequence is always executed in an order that is dictated by Juju
code.</p>
<figure class="s12 center">
  <img src="images/charm%20hooks.png" />
  <figcaption>Sequence of charm hooks</figcaption>
</figure>

<p>What do we see in hooks? If you run <code>charm build</code> and examine the <code>dist</code> folder,
hooks live in <code>dist/yourcharm/hooks</code> folder:</p>
<div class="highlight"><pre><span></span><code>.
├──<span class="w"> </span>config-changed
├──<span class="w"> </span>hook.template
├──<span class="w"> </span>install
├──<span class="w"> </span>leader-elected
├──<span class="w"> </span>leader-settings-changed
├──<span class="w"> </span>relations
│<span class="w">   </span>└──<span class="w"> </span>rack-pdu
│<span class="w">       </span>├──<span class="w"> </span>__init__.py
│<span class="w">       </span>├──<span class="w"> </span>interface.yaml
│<span class="w">       </span>├──<span class="w"> </span>provides.py
│<span class="w">       </span>└──<span class="w"> </span>requires.py
├──<span class="w"> </span>start
├──<span class="w"> </span>stop
├──<span class="w"> </span>update-status
└──<span class="w"> </span>upgrade-charm
</code></pre></div>

<p>We know we haven't defined any custom hook code for this charm,
so how were they generated? Even more interesting is
that all hooks are strangely <strong>identical</strong>.
Take <code>install</code> hook script for example:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>

<span class="c1"># Load modules from $JUJU_CHARM_DIR/lib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">charms.layer</span><span class="w"> </span><span class="kn">import</span> <span class="n">basic</span>

<span class="c1"># This will load and run the appropriate @hook and other decorated</span>
<span class="c1"># handlers from $JUJU_CHARM_DIR/reactive, $JUJU_CHARM_DIR/hooks/reactive,</span>
<span class="c1"># and $JUJU_CHARM_DIR/hooks/relations.</span>
<span class="c1">#</span>
<span class="c1"># See https://jujucharms.com/docs/stable/authors-charm-building</span>
<span class="c1"># for more information on this pattern.</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">charms.reactive</span><span class="w"> </span><span class="kn">import</span> <span class="n">main</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;lib&#39;</span><span class="p">)</span>
<span class="n">basic</span><span class="o">.</span><span class="n">bootstrap_charm_deps</span><span class="p">()</span>
<span class="n">basic</span><span class="o">.</span><span class="n">init_config_states</span><span class="p">()</span>
<span class="n">main</span><span class="p">()</span>
</code></pre></div>

<p>You can diff all of them, and they are all the same! <span
class="myhighlight">and they are all copies of the
<code>hook.template</code></span>. The <code>from charms.layer import basic</code> actually
clearly states that these hooks are <span
class="myhighlight"><strong>depending</strong></span> on <code>layer-basic</code>. There, is
why all charms are using it.</p>
<p>This actually gives us a clue to further investigate how dependent
charms are to <code>layer-basic</code>. It turned out not as necessary as we
thought.</p>
<h1>charm build</h1>
<p>Source of <code>charm build</code> is <a href="https://github.com/juju/charm-tools">here</a>. Looking into the charm <code>Builder</code> class:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Builder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handle the processing of overrides, implements the policy of BuildConfig</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">HOOK_TEMPLATE_FILE</span> <span class="o">=</span> <span class="n">path</span><span class="p">(</span><span class="s1">&#39;hooks/hook.template&#39;</span><span class="p">)</span>
</code></pre></div>

<p>Ah ha, that's where it is expecting <code>hook.template</code>. Following this we have discovered the followings:</p>
<ol>
<li>
<p>Relatioin hooks and storage hooks are dynamically generated. For
   this to work, <strong>at least one layer must provide</strong> <code>hook.template</code>. The
   interesting point is that it doesn't relie on <code>layer-basic</code>
   anymore. If you charm has a <code>/hooks/hook.template</code>, it will work.</p>
<div class="highlight"><pre><span></span><code>```python
def plan_interfaces(self, layers, output_files, plan):
  ......
  if not meta and layers.get(&#39;interfaces&#39;):
      raise BuildError(
          &#39;Includes interfaces but no metadata.yaml to bind them&#39;)
  elif self.HOOK_TEMPLATE_FILE not in output_files:
      raise BuildError(&#39;At least one layer must provide %s&#39;,
                       self.HOOK_TEMPLATE_FILE)
```
</code></pre></div>

</li>
<li>
<p>If you didn't define those <strong>must-have</strong> hooks, eg. <code>install</code> hook,
charm build will happily make the dist, but it will fail at run
time. What is happening!? It turned out <code>charm</code> binary has an option
to make <code>proof</code>, and this will complain if you miss expected hooks
(<a href="https://github.com/juju/charm-tools/issues/325">bug #325</a>), but the proof isn't part of the <code>charm build</code> process.</p>
<ol>
<li>
<p>Code expected hooks:</p>
<div class="highlight"><pre><span></span><code>    ```python
    lint.check_hook(&#39;install&#39;, hooks_path, recommended=True)
    lint.check_hook(&#39;start&#39;, hooks_path, recommended=True)
    lint.check_hook(&#39;stop&#39;, hooks_path, recommended=True)
    if os.path.exists(os.path.join(charm_path, &#39;config.yaml&#39;)):
        lint.check_hook(&#39;config-changed&#39;, hooks_path, recommended=True)
    else:
        lint.check_hook(&#39;config-changed&#39;, hooks_path)
    ```
</code></pre></div>

</li>
<li>
<p><code>charm proof</code> will catch the missing hooks:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="err">```</span><span class="n">shell</span>
<span class="w">    </span><span class="n">fengxia</span><span class="nv">@fengxia</span><span class="o">-</span><span class="n">xenial</span><span class="o">-</span><span class="nl">dev</span><span class="p">:</span><span class="o">~/</span><span class="n">workspace</span><span class="o">/</span><span class="n">wss</span><span class="o">/</span><span class="n">charms</span><span class="o">/</span><span class="n">charm</span><span class="o">-</span><span class="n">pdu</span><span class="err">$</span><span class="w"> </span><span class="n">charm</span><span class="w"> </span><span class="n">proof</span>
<span class="w">    </span><span class="nl">I</span><span class="p">:</span><span class="w"> </span><span class="n">metadata</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">(</span><span class="n">pdu</span><span class="p">)</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">(</span><span class="n">charm</span><span class="o">-</span><span class="n">pdu</span><span class="p">)</span><span class="w"> </span><span class="n">exactly</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">deployment</span><span class="p">.</span>
<span class="w">    </span><span class="nl">W</span><span class="p">:</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">copyright</span><span class="w"> </span><span class="k">file</span>
<span class="w">    </span><span class="nl">W</span><span class="p">:</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">README</span><span class="w"> </span><span class="k">file</span>
<span class="w">    </span><span class="nl">I</span><span class="p">:</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">rack</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">hooks</span>
<span class="w">    </span><span class="nl">I</span><span class="p">:</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">recommended</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="n">install</span>
<span class="w">    </span><span class="nl">I</span><span class="p">:</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">recommended</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="k">start</span>
<span class="w">    </span><span class="err">```</span>
</code></pre></div>

</li>
</ol>
</li>
</ol>
<p>If charm is executed, <code>install</code> hook will run first, which
then call two functions from <code>layer-basic</code>:</p>
<ol>
<li><code>basic.bootstrap_charm_deps()</code></li>
<li><code>basic.init_config_states()</code></li>
</ol>
<p>Let's take a look them respectively.</p>
<h1><code>boostrap_charm_deps</code></h1>
<p>This function is to setup the host Python environment for charms.</p>
<ol>
<li>
<p><code>charm-pre-install</code>: execute any nested file named <code>charm-pre-install</code>
   under an <code>exec.d</code> folder. It uses <code>check_call</code> so any script will work.
   Once the script has been executed without error, a hidden file
   <code>.{}_{}.done'.format(module_name, submodule_name))</code> will be created so
   the same preinstall script will only run ONCE &rarr; this is the
   way to make the execution only once regardless the sequence of
   hooks. Therefore whoever runs it once will write this file as
   breadcrumb for others to check.</p>
</li>
<li>
<p>Install packages in <code>wheelhouse</code> folder. Again, if this has run,
   a hidden file <code>wheelhouse/.bootstrapped</code> is created so all these
   packages are installed ONCE (reference: <a href="https://docs.python.org/3/install/index.html#inst-config-files">distutils</a>, <a href="http://setuptools.readthedocs.io/en/latest/easy_install.html#configuration-files">easy_install</a>).</p>
<p>In <code>wheelhouse.txt</code> file:</p>
<div class="highlight"><pre><span></span><code>```shell
pip&gt;=7.0.0,&lt;8.2.0
charmhelpers&gt;=0.4.0,&lt;1.0.0
charms.reactive&gt;=0.1.0,&lt;2.0.0
```
</code></pre></div>

</li>
<li>
<p>Install <code>python-virtualenv</code> if it is included in <code>config.yaml</code>.</p>
</li>
</ol>
<h1><code>init_config_states</code></h1>
<p>This is where charms will start using Juju commands (via
<a href="https://pythonhosted.org/charmhelpers/">charmhelpers</a> lib) to set states with Juju controller.  I'm
copying the codes below since they are fairly self-explanatory.
Unlike <code>bootstrap_charm_deps</code>, there is no magic file or flag to
prevent this block executed multiple times. This makes sense since
each hook can potentially modify charm states, thus run this in each
hook is necessary.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_config_states</span><span class="p">():</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">yaml</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">charmhelpers.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">hookenv</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">charms.reactive</span><span class="w"> </span><span class="kn">import</span> <span class="n">set_state</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">charms.reactive</span><span class="w"> </span><span class="kn">import</span> <span class="n">toggle_state</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">hookenv</span><span class="o">.</span><span class="n">config</span><span class="p">()</span>
    <span class="n">config_defaults</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">config_defs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">config_yaml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hookenv</span><span class="o">.</span><span class="n">charm_dir</span><span class="p">(),</span> <span class="s1">&#39;config.yaml&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">config_yaml</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_yaml</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">config_defs</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;options&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="n">config_defaults</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
                               <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">config_defs</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">config_defs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">changed</span><span class="p">(</span><span class="n">opt</span><span class="p">):</span>
            <span class="n">set_state</span><span class="p">(</span><span class="s1">&#39;config.changed&#39;</span><span class="p">)</span>
            <span class="n">set_state</span><span class="p">(</span><span class="s1">&#39;config.changed.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span>
        <span class="n">toggle_state</span><span class="p">(</span><span class="s1">&#39;config.set.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">opt</span><span class="p">),</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span>
        <span class="n">toggle_state</span><span class="p">(</span><span class="s1">&#39;config.default.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">opt</span><span class="p">),</span>
                     <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">opt</span><span class="p">)</span> <span class="o">==</span> <span class="n">config_defaults</span><span class="p">[</span><span class="n">opt</span><span class="p">])</span>
    <span class="n">hookenv</span><span class="o">.</span><span class="n">atexit</span><span class="p">(</span><span class="n">clear_config_states</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">clear_config_states</span><span class="p">():</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">charmhelpers.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">hookenv</span><span class="p">,</span> <span class="n">unitdata</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">charms.reactive</span><span class="w"> </span><span class="kn">import</span> <span class="n">remove_state</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">hookenv</span><span class="o">.</span><span class="n">config</span><span class="p">()</span>
    <span class="n">remove_state</span><span class="p">(</span><span class="s1">&#39;config.changed&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">remove_state</span><span class="p">(</span><span class="s1">&#39;config.changed.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span>
        <span class="n">remove_state</span><span class="p">(</span><span class="s1">&#39;config.set.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span>
        <span class="n">remove_state</span><span class="p">(</span><span class="s1">&#39;config.default.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span>
    <span class="n">unitdata</span><span class="o">.</span><span class="n">kv</span><span class="p">()</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</code></pre></div>

<h1>Conclusion</h1>
<p><code>layer-basic</code> is the foundation of charm building because it provides
the entry point to call preinstall scripts, to setup the host Python
environment and to initialize charm states. It has many hardcoded
lines for using <code>apt-get</code> CLI and expecting an Ubuntu
environment. These have been addressed somewhat in <a href="https://fengxia41103.github.io/myblog/python2 charm.html">python2 charm</a>.
Going forward, the code base can use some work to support host other
than Ubuntu and Python2 instead of 3.</p></p>

      <p>
        &mdash; by
        <a href="feng-xia.html">Feng Xia</a>
      </p>
    </div>
  </div>

</article>



          <div id="related">
          </div>
        </div>
      </div>
    </div>

    <footer class="split-screen">
      <div class="container">
        <h5>Categories:</h5>
        <a href="https://fengxia41103.github.io/myblog/demo.html">
          <i class="fa fa-folder-open-o"></i>
          demo
        </a>
        <a href="https://fengxia41103.github.io/myblog/dev.html">
          <i class="fa fa-folder-open-o"></i>
          dev
        </a>
        <a href="https://fengxia41103.github.io/myblog/fashion.html">
          <i class="fa fa-folder-open-o"></i>
          fashion
        </a>
        <a href="https://fengxia41103.github.io/myblog/gkp.html">
          <i class="fa fa-folder-open-o"></i>
          gkp
        </a>
        <a href="https://fengxia41103.github.io/myblog/lenovo.html">
          <i class="fa fa-folder-open-o"></i>
          lenovo
        </a>
        <a href="https://fengxia41103.github.io/myblog/odoo.html">
          <i class="fa fa-folder-open-o"></i>
          odoo
        </a>
        <a href="https://fengxia41103.github.io/myblog/openstack.html">
          <i class="fa fa-folder-open-o"></i>
          openstack
        </a>
        <a href="https://fengxia41103.github.io/myblog/pm.html">
          <i class="fa fa-folder-open-o"></i>
          pm
        </a>
        <a href="https://fengxia41103.github.io/myblog/react.html">
          <i class="fa fa-folder-open-o"></i>
          REACT
        </a>
        <a href="https://fengxia41103.github.io/myblog/rh.html">
          <i class="fa fa-folder-open-o"></i>
          rh
        </a>
        <a href="https://fengxia41103.github.io/myblog/stock.html">
          <i class="fa fa-folder-open-o"></i>
          stock
        </a>
        <a href="https://fengxia41103.github.io/myblog/thoughts.html">
          <i class="fa fa-folder-open-o"></i>
          thoughts
        </a>

        <h5>Tags:</h5>
        <a href="https://fengxia41103.github.io/myblog/tag-thoughts.html">
          <i class="fa fa-tag"></i>
          thoughts
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-dev.html">
          <i class="fa fa-tag"></i>
          dev
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-react.html">
          <i class="fa fa-tag"></i>
          react
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-love.html">
          <i class="fa fa-tag"></i>
          love
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-lenovo.html">
          <i class="fa fa-tag"></i>
          lenovo
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-angular.html">
          <i class="fa fa-tag"></i>
          angular
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-feng.html">
          <i class="fa fa-tag"></i>
          feng
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-design.html">
          <i class="fa fa-tag"></i>
          design
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-family.html">
          <i class="fa fa-tag"></i>
          family
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-demo.html">
          <i class="fa fa-tag"></i>
          demo
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-odoo.html">
          <i class="fa fa-tag"></i>
          odoo
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-fashion.html">
          <i class="fa fa-tag"></i>
          fashion
        </a>
        <a href="https://fengxia41103.github.io/myblog/tag-gkp.html">
          <i class="fa fa-tag"></i>
          gkp
        </a>
        <div class="">
          <h5>Show Cases:</h5>
          <div id="showcase">
            <p>
              Photo album:
              <a href="https://fengxia41103.github.io/moment/1236/#/">1236</a>
            </p>
            <p>
              API & charts:
              <a href="http://sp500chart.s3-website-us-east-1.amazonaws.com"
                >SP500</a
              >
            </p>
            <p>
              API & charts:
              <a
                href="http://snapshots.world.s3-website.ap-northeast-2.amazonaws.com/"
                >Snapshot of The World</a
              >
            </p>

            <p>
              Django (in Chinese):
              <a href="https://fengxia41103.github.io/myblog/project gkp demo.html">GKP</a>
            </p>
            <p>
              ERP:
              <a href="https://fengxia41103.github.io/myblog/project fashion demo.html">Fashion</a>
            </p>
            <p>
              Data processing:
              <a href="https://fengxia41103.github.io/myblog/project stock demo.html">Stock</a>
            </p>
            <p>
              Angular & REACT:
              <a href="https://fengxia41103.github.io/myblog/car leasing.html">Car leasing</a>
              &nbsp;|&nbsp;
              <a href="https://fengxia41103.github.io/spa-dashboard/">
                YAML Config Dashboard
              </a>
            </p>
            <p>
              API & REACT:
              <a href="https://fengxia41103.github.io/movie/">Movies</a>
            </p>
          </div>
        </div>
      </div>
      <video autoplay muted loop id="myVideo">
        <source src="downloads/polina.mp4" type="video/mp4" />
      </video>
    </footer>
    <div class="footer-copyright">
      <div class="container">
        <div class="row">
          <div class="col l8 m8 s12">
            <p>
              2016-2022 PY Consulting Ltd. 601 W. Rosemary St., Chapel Hill, NC 27516
            </p>

            <p>
              <a href="mailto:feng_xia41103@hotmail.com">
                <i class="fa fa-envelope"></i>
              </a>

              <a href="http://github.com/fengxia41103">
                <i class="fa fa-github"></i>
              </a>

              <a href="https://www.linkedin.com/in/fengxia41103">
                <i class="fa fa-linkedin"></i>
              </a>

              <a href="">
                <i class="fa fa-phone-square"></i>
                (508)801-1794
              </a>
            </p>
          </div>
          <div class="col l4 m4 s12">
            <p class="right">
              <i class="fa fa-copyright"></i>
              All rights reserved.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- end of block main -->

    <!-- Placed at the end of the document so the pages load faster -->

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"
    ></script>

    <script
      type="text/javascript"
      src="https://fengxia41103.github.io/myblog/theme/js/bundle.js"
    ></script>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/shell.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"
    ></script>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/xml.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/diff.min.js"
    ></script>

    <script type="text/javascript">
     var exports = {};
     var j$ = jQuery.noConflict();

     j$(document).ready(function () {
       // highlight.js initialization
       hljs.initHighlightingOnLoad();
       j$("pre").each(function (i, block) {
         hljs.highlightBlock(block);
       });

       // tooltips
       j$('[data-toggle="tooltip"]').tooltip();

       // image materialbox
       j$(".materialboxed").materialbox();
     });
    </script>
    <!-- end of block JS -->

  </body>
</html>